<section class="w-full">
  @if (loading) {
    <div class="flex justify-center items-center text-black p-4">Cargando...</div>
  } @else if (requests.length === 0) {
    <div class="flex justify-center items-center text-black p-4">
      No tienes solicitudes de colección pendientes.
    </div>
  } @else {
    <div class="flex flex-col gap-2 overflow-y-auto pr-2">
      @for (req of requests; track req.id) {
        <!-- Mobile View -->
        <div
          class="flex flex-col w-full md:hidden justify-between items-center bg-white rounded-lg border-[0.5px] border-[#757575] p-3 gap-2"
        >
          <div class="flex flex-row w-full items-center gap-3">
            <img
              [src]="req.senderAvatar || 'assets/images/defaultUser.png'"
              alt="Avatar"
              class="w-12 h-12 rounded-full object-cover shadow-sm border-[0.5px] border-[#757575]"
              (error)="onImageError($event)"
              referrerpolicy="no-referrer"
              crossorigin="anonymous"
            />
            <div>
              <p class="text-[10px] text-gray-800 font-medium">
                {{ req.senderName || 'Usuario desconocido' }}
              </p>
              <p class="text-[10px] text-gray-500">{{ req.senderEmail }}</p>
              <p class="text-[10px] text-gray-400">Quiere compartir su colección contigo</p>
            </div>
          </div>

          <div class="flex flex-col w-full gap-2">
            <div class="flex gap-2 w-full">
              <button
                mat-raised-button
                color="primary"
                class="w-full !bg-[#9811fb] !text-white"
                (click)="onAccept(req.id)"
              >
                Aceptar
              </button>
              <button
                mat-raised-button
                color="warn"
                class="w-full !bg-red-600 !text-white"
                (click)="onReject(req.id)"
              >
                Rechazar
              </button>
            </div>
          </div>
        </div>

        <!-- Desktop View -->
        <div
          class="hidden md:flex justify-between items-center bg-white rounded-lg border-[0.5px] border-[#757575] p-3"
        >
          <div class="flex md:w-[60%] lg:w-[60%] 2xl:w-[60%] 3xl:w-[60%] items-center gap-3">
            <img
              [src]="req.senderAvatar || 'assets/images/defaultUser.png'"
              alt="Avatar"
              class="w-10 h-10 rounded-full object-cover shadow-sm border-[0.5px] border-[#757575]"
              (error)="onImageError($event)"
              referrerpolicy="no-referrer"
              crossorigin="anonymous"
            />
            <div>
              <p class="text-sm text-gray-800 font-medium">
                {{ req.senderName || 'Usuario desconocido' }}
              </p>
              <p class="text-xs text-gray-500">{{ req.senderEmail }}</p>
              <p class="text-xs text-gray-400">Quiere compartir su colección contigo</p>
            </div>
          </div>

          <div
            class="w-[40%] md:w-[40%] lg:w-[40%] 2xl:w-[30%] 3xl:w-[30%] flex items-center gap-2"
          >
            <button
              mat-raised-button
              color="primary"
              class="w-full !bg-[#9811fb] !text-white"
              (click)="onAccept(req.id)"
            >
              Aceptar
            </button>
            <button
              mat-raised-button
              color="warn"
              class="w-full !bg-red-600 !text-white"
              (click)="onReject(req.id)"
            >
              Rechazar
            </button>
          </div>
        </div>
      }
    </div>
  }
</section>
