import{a as qr}from"./chunk-SXR7BR6Y.js";import{a as _i}from"./chunk-4PX63YNL.js";import{a as ga,b as _a,c as ya,d as ba}from"./chunk-J5TPZUW7.js";import{a as gi}from"./chunk-5RLPUM7S.js";import{a as va}from"./chunk-32UPDBY4.js";import{a as aa,b as la,c as ca,d as ua}from"./chunk-6GLRXAZ6.js";import"./chunk-6P4IF4CI.js";import{a as ta,d as na,f as ia}from"./chunk-YGZ5EQJU.js";import{c as Ea}from"./chunk-LFZXF7JA.js";import{a as ma}from"./chunk-NDPI645S.js";import"./chunk-AXRUWUHH.js";import"./chunk-W7VLX52Y.js";import"./chunk-XNBUNGCT.js";import{a as mi}from"./chunk-D6LKXYUQ.js";import"./chunk-Z6PT2AXA.js";import{a as ln}from"./chunk-F63DPOLD.js";import"./chunk-EK5XN74M.js";import{l as ra,m as sa,n as fi,o as rn}from"./chunk-J6OIAH2E.js";import"./chunk-E6SG4RJT.js";import{b as di,d as hi,e as Nt,f as xt,g as ea}from"./chunk-NSQ4QIVB.js";import{a as an}from"./chunk-VP7ZHMMA.js";import{a as oa,b as Ye,c as et}from"./chunk-JNEX3YXP.js";import{a as X,b as He,c as Lr,d as Nn,e as da,f as Pe,g as xn,h as qt,i as pi,j as Rn,k as ha,l as sn}from"./chunk-ZUAAQJ5J.js";import"./chunk-YUIT4C56.js";import{a as pa}from"./chunk-HI5P6VLK.js";import{a as fa}from"./chunk-AOTVPSR2.js";import{$b as Lt,Bb as ae,Bc as Wo,E as So,Fa as Ro,Fb as Mo,Fc as ui,Ga as I,Gb as Lo,Gc as $o,Hb as qo,Hc as Mr,Ic as Go,Ja as Io,Jc as Ko,Lb as Fo,Mc as Zo,Nb as Mt,Nc as Qo,Oa as Oo,Oc as Xo,Pb as D,Pc as Jo,Q as tn,Qb as ct,Qc as Yo,Rb as Ae,S as To,Sa as be,T as Y,Tc as on,V as Ct,Va as Ao,Xa as kt,Z as ci,Za as Ir,Zb as jo,_ as Q,_a as Po,_b as nn,aa as wo,bc as Pr,cc as Dr,da as Se,ea as Te,f as en,fa as Co,g as wn,gb as _e,gc as Bo,hb as ye,hc as Uo,ia as ko,ib as Do,jc as kn,kb as Ue,l as Cn,lb as Ve,mb as se,mc as Vo,na as xr,nb as S,nc as Ho,ob as E,pb as ve,t as Nr,tb as Or,ua as No,ub as Ar,w as ai,wb as we,xa as xo,y as li,ya as Rr,zb as ge,zc as zo}from"./chunk-4XNWJBNU.js";import"./chunk-X5YLR3NI.js";import{a as Oe,b as Dt,c as Eo,e as P,g as Ld,i as Je}from"./chunk-ODN5LVDJ.js";var Ua=P((jg,Xr)=>{"use strict";global.crypto&&global.crypto.getRandomValues?Xr.exports.randomBytes=function(n){var e=new Uint8Array(n);return global.crypto.getRandomValues(e),e}:Xr.exports.randomBytes=function(n){for(var e=new Array(n),t=0;t<n;t++)e[t]=Math.floor(Math.random()*256);return e}});var jt=P((Bg,Ha)=>{"use strict";var kh=Ua(),Va="abcdefghijklmnopqrstuvwxyz012345";Ha.exports={string:function(n){for(var e=Va.length,t=kh.randomBytes(n),i=[],r=0;r<n;r++)i.push(Va.substr(t[r]%e,1));return i.join("")},number:function(n){return Math.floor(Math.random()*n)},numberString:function(n){var e=(""+(n-1)).length,t=new Array(e+1).join("0");return(t+this.number(n)).slice(-e)}}});var pt=P((Ug,Ci)=>{"use strict";var Nh=jt(),un={},Jr=!1,za=global.chrome&&global.chrome.app&&global.chrome.app.runtime;Ci.exports={attachEvent:function(n,e){typeof global.addEventListener<"u"?global.addEventListener(n,e,!1):global.document&&global.attachEvent&&(global.document.attachEvent("on"+n,e),global.attachEvent("on"+n,e))},detachEvent:function(n,e){typeof global.addEventListener<"u"?global.removeEventListener(n,e,!1):global.document&&global.detachEvent&&(global.document.detachEvent("on"+n,e),global.detachEvent("on"+n,e))},unloadAdd:function(n){if(za)return null;var e=Nh.string(8);return un[e]=n,Jr&&setTimeout(this.triggerUnloadCallbacks,0),e},unloadDel:function(n){n in un&&delete un[n]},triggerUnloadCallbacks:function(){for(var n in un)un[n](),delete un[n]}};var xh=function(){Jr||(Jr=!0,Ci.exports.triggerUnloadCallbacks())};za||Ci.exports.attachEvent("unload",xh)});var $a=P((Vg,Wa)=>{"use strict";Wa.exports=function(e,t){if(t=t.split(":")[0],e=+e,!e)return!1;switch(t){case"http":case"ws":return e!==80;case"https":case"wss":return e!==443;case"ftp":return e!==21;case"gopher":return e!==70;case"file":return!1}return e!==0}});var Za=P(Yr=>{"use strict";var Rh=Object.prototype.hasOwnProperty,Ih;function Ga(n){try{return decodeURIComponent(n.replace(/\+/g," "))}catch{return null}}function Ka(n){try{return encodeURIComponent(n)}catch{return null}}function Oh(n){for(var e=/([^=?#&]+)=?([^&]*)/g,t={},i;i=e.exec(n);){var r=Ga(i[1]),s=Ga(i[2]);r===null||s===null||r in t||(t[r]=s)}return t}function Ah(n,e){e=e||"";var t=[],i,r;typeof e!="string"&&(e="?");for(r in n)if(Rh.call(n,r)){if(i=n[r],!i&&(i===null||i===Ih||isNaN(i))&&(i=""),r=Ka(r),i=Ka(i),r===null||i===null)continue;t.push(r+"="+i)}return t.length?e+t.join("&"):""}Yr.stringify=Ah;Yr.parse=Oh});var ns=P((zg,nl)=>{"use strict";var Xa=$a(),ki=Za(),Ph=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Ja=/[\n\r\t]/g,Dh=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Ya=/:\d+$/,Mh=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Lh=/^[a-zA-Z]:/;function ts(n){return(n||"").toString().replace(Ph,"")}var es=[["#","hash"],["?","query"],function(e,t){return it(t.protocol)?e.replace(/\\/g,"/"):e},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Qa={hash:1,query:1};function el(n){var e;typeof window<"u"?e=window:typeof global<"u"?e=global:typeof self<"u"?e=self:e={};var t=e.location||{};n=n||t;var i={},r=typeof n,s;if(n.protocol==="blob:")i=new rt(unescape(n.pathname),{});else if(r==="string"){i=new rt(n,{});for(s in Qa)delete i[s]}else if(r==="object"){for(s in n)s in Qa||(i[s]=n[s]);i.slashes===void 0&&(i.slashes=Dh.test(n.href))}return i}function it(n){return n==="file:"||n==="ftp:"||n==="http:"||n==="https:"||n==="ws:"||n==="wss:"}function tl(n,e){n=ts(n),n=n.replace(Ja,""),e=e||{};var t=Mh.exec(n),i=t[1]?t[1].toLowerCase():"",r=!!t[2],s=!!t[3],o=0,a;return r?s?(a=t[2]+t[3]+t[4],o=t[2].length+t[3].length):(a=t[2]+t[4],o=t[2].length):s?(a=t[3]+t[4],o=t[3].length):a=t[4],i==="file:"?o>=2&&(a=a.slice(2)):it(i)?a=t[4]:i?r&&(a=a.slice(2)):o>=2&&it(e.protocol)&&(a=t[4]),{protocol:i,slashes:r||it(i),slashesCount:o,rest:a}}function qh(n,e){if(n==="")return e;for(var t=(e||"/").split("/").slice(0,-1).concat(n.split("/")),i=t.length,r=t[i-1],s=!1,o=0;i--;)t[i]==="."?t.splice(i,1):t[i]===".."?(t.splice(i,1),o++):o&&(i===0&&(s=!0),t.splice(i,1),o--);return s&&t.unshift(""),(r==="."||r==="..")&&t.push(""),t.join("/")}function rt(n,e,t){if(n=ts(n),n=n.replace(Ja,""),!(this instanceof rt))return new rt(n,e,t);var i,r,s,o,a,l,u=es.slice(),f=typeof e,h=this,y=0;for(f!=="object"&&f!=="string"&&(t=e,e=null),t&&typeof t!="function"&&(t=ki.parse),e=el(e),r=tl(n||"",e),i=!r.protocol&&!r.slashes,h.slashes=r.slashes||i&&e.slashes,h.protocol=r.protocol||e.protocol||"",n=r.rest,(r.protocol==="file:"&&(r.slashesCount!==2||Lh.test(n))||!r.slashes&&(r.protocol||r.slashesCount<2||!it(h.protocol)))&&(u[3]=[/(.*)/,"pathname"]);y<u.length;y++){if(o=u[y],typeof o=="function"){n=o(n,h);continue}s=o[0],l=o[1],s!==s?h[l]=n:typeof s=="string"?(a=s==="@"?n.lastIndexOf(s):n.indexOf(s),~a&&(typeof o[2]=="number"?(h[l]=n.slice(0,a),n=n.slice(a+o[2])):(h[l]=n.slice(a),n=n.slice(0,a)))):(a=s.exec(n))&&(h[l]=a[1],n=n.slice(0,a.index)),h[l]=h[l]||i&&o[3]&&e[l]||"",o[4]&&(h[l]=h[l].toLowerCase())}t&&(h.query=t(h.query)),i&&e.slashes&&h.pathname.charAt(0)!=="/"&&(h.pathname!==""||e.pathname!=="")&&(h.pathname=qh(h.pathname,e.pathname)),h.pathname.charAt(0)!=="/"&&it(h.protocol)&&(h.pathname="/"+h.pathname),Xa(h.port,h.protocol)||(h.host=h.hostname,h.port=""),h.username=h.password="",h.auth&&(a=h.auth.indexOf(":"),~a?(h.username=h.auth.slice(0,a),h.username=encodeURIComponent(decodeURIComponent(h.username)),h.password=h.auth.slice(a+1),h.password=encodeURIComponent(decodeURIComponent(h.password))):h.username=encodeURIComponent(decodeURIComponent(h.auth)),h.auth=h.password?h.username+":"+h.password:h.username),h.origin=h.protocol!=="file:"&&it(h.protocol)&&h.host?h.protocol+"//"+h.host:"null",h.href=h.toString()}function Fh(n,e,t){var i=this;switch(n){case"query":typeof e=="string"&&e.length&&(e=(t||ki.parse)(e)),i[n]=e;break;case"port":i[n]=e,Xa(e,i.protocol)?e&&(i.host=i.hostname+":"+e):(i.host=i.hostname,i[n]="");break;case"hostname":i[n]=e,i.port&&(e+=":"+i.port),i.host=e;break;case"host":i[n]=e,Ya.test(e)?(e=e.split(":"),i.port=e.pop(),i.hostname=e.join(":")):(i.hostname=e,i.port="");break;case"protocol":i.protocol=e.toLowerCase(),i.slashes=!t;break;case"pathname":case"hash":if(e){var r=n==="pathname"?"/":"#";i[n]=e.charAt(0)!==r?r+e:e}else i[n]=e;break;case"username":case"password":i[n]=encodeURIComponent(e);break;case"auth":var s=e.indexOf(":");~s?(i.username=e.slice(0,s),i.username=encodeURIComponent(decodeURIComponent(i.username)),i.password=e.slice(s+1),i.password=encodeURIComponent(decodeURIComponent(i.password))):i.username=encodeURIComponent(decodeURIComponent(e))}for(var o=0;o<es.length;o++){var a=es[o];a[4]&&(i[a[1]]=i[a[1]].toLowerCase())}return i.auth=i.password?i.username+":"+i.password:i.username,i.origin=i.protocol!=="file:"&&it(i.protocol)&&i.host?i.protocol+"//"+i.host:"null",i.href=i.toString(),i}function jh(n){(!n||typeof n!="function")&&(n=ki.stringify);var e,t=this,i=t.host,r=t.protocol;r&&r.charAt(r.length-1)!==":"&&(r+=":");var s=r+(t.protocol&&t.slashes||it(t.protocol)?"//":"");return t.username?(s+=t.username,t.password&&(s+=":"+t.password),s+="@"):t.password?(s+=":"+t.password,s+="@"):t.protocol!=="file:"&&it(t.protocol)&&!i&&t.pathname!=="/"&&(s+="@"),(i[i.length-1]===":"||Ya.test(t.hostname)&&!t.port)&&(i+=":"),s+=i+t.pathname,e=typeof t.query=="object"?n(t.query):t.query,e&&(s+=e.charAt(0)!=="?"?"?"+e:e),t.hash&&(s+=t.hash),s}rt.prototype={set:Fh,toString:jh};rt.extractProtocol=tl;rt.location=el;rt.trimLeft=ts;rt.qs=ki;nl.exports=rt});var xe=P((Wg,il)=>{"use strict";var Bh=ns(),Uh=function(){};il.exports={getOrigin:function(n){if(!n)return null;var e=new Bh(n);if(e.protocol==="file:")return null;var t=e.port;return t||(t=e.protocol==="https:"?"443":"80"),e.protocol+"//"+e.hostname+":"+t},isOriginEqual:function(n,e){var t=this.getOrigin(n)===this.getOrigin(e);return Uh("same",n,e,t),t},isSchemeEqual:function(n,e){return n.split(":")[0]===e.split(":")[0]},addPath:function(n,e){var t=n.split("?");return t[0]+e+(t[1]?"?"+t[1]:"")},addQuery:function(n,e){return n+(n.indexOf("?")===-1?"?"+e:"&"+e)},isLoopbackAddr:function(n){return/^127\.([0-9]{1,3})\.([0-9]{1,3})\.([0-9]{1,3})$/i.test(n)||/^\[::1\]$/.test(n)}}});var ie=P(($g,is)=>{"use strict";typeof Object.create=="function"?is.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:is.exports=function(e,t){if(t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}}});var rs=P((Gg,rl)=>{"use strict";function Ni(){this._listeners={}}Ni.prototype.addEventListener=function(n,e){n in this._listeners||(this._listeners[n]=[]);var t=this._listeners[n];t.indexOf(e)===-1&&(t=t.concat([e])),this._listeners[n]=t};Ni.prototype.removeEventListener=function(n,e){var t=this._listeners[n];if(t){var i=t.indexOf(e);if(i!==-1){t.length>1?this._listeners[n]=t.slice(0,i).concat(t.slice(i+1)):delete this._listeners[n];return}}};Ni.prototype.dispatchEvent=function(){var n=arguments[0],e=n.type,t=arguments.length===1?[n]:Array.apply(null,arguments);if(this["on"+e]&&this["on"+e].apply(this,t),e in this._listeners)for(var i=this._listeners[e],r=0;r<i.length;r++)i[r].apply(this,t)};rl.exports=Ni});var Ee=P((Kg,sl)=>{"use strict";var Vh=ie(),xi=rs();function Rt(){xi.call(this)}Vh(Rt,xi);Rt.prototype.removeAllListeners=function(n){n?delete this._listeners[n]:this._listeners={}};Rt.prototype.once=function(n,e){var t=this,i=!1;function r(){t.removeListener(n,r),i||(i=!0,e.apply(this,arguments))}this.on(n,r)};Rt.prototype.emit=function(){var n=arguments[0],e=this._listeners[n];if(e){for(var t=arguments.length,i=new Array(t-1),r=1;r<t;r++)i[r-1]=arguments[r];for(var s=0;s<e.length;s++)e[s].apply(this,i)}};Rt.prototype.on=Rt.prototype.addListener=xi.prototype.addEventListener;Rt.prototype.removeListener=xi.prototype.removeEventListener;sl.exports.EventEmitter=Rt});var al=P((Zg,ss)=>{"use strict";var ol=global.WebSocket||global.MozWebSocket;ol?ss.exports=function(e){return new ol(e)}:ss.exports=void 0});var hl=P((Qg,dl)=>{"use strict";var ll=pt(),Hh=xe(),zh=ie(),cl=Ee().EventEmitter,ul=al(),mt=function(){};function gt(n,e,t){if(!gt.enabled())throw new Error("Transport created when disabled");cl.call(this),mt("constructor",n);var i=this,r=Hh.addPath(n,"/websocket");r.slice(0,5)==="https"?r="wss"+r.slice(5):r="ws"+r.slice(4),this.url=r,this.ws=new ul(this.url,[],t),this.ws.onmessage=function(s){mt("message event",s.data),i.emit("message",s.data)},this.unloadRef=ll.unloadAdd(function(){mt("unload"),i.ws.close()}),this.ws.onclose=function(s){mt("close event",s.code,s.reason),i.emit("close",s.code,s.reason),i._cleanup()},this.ws.onerror=function(s){mt("error event",s),i.emit("close",1006,"WebSocket connection broken"),i._cleanup()}}zh(gt,cl);gt.prototype.send=function(n){var e="["+n+"]";mt("send",e),this.ws.send(e)};gt.prototype.close=function(){mt("close");var n=this.ws;this._cleanup(),n&&n.close()};gt.prototype._cleanup=function(){mt("_cleanup");var n=this.ws;n&&(n.onmessage=n.onclose=n.onerror=null),ll.unloadDel(this.unloadRef),this.unloadRef=this.ws=null,this.removeAllListeners()};gt.enabled=function(){return mt("enabled"),!!ul};gt.transportName="websocket";gt.roundTrips=2;dl.exports=gt});var ml=P((Xg,pl)=>{"use strict";var Wh=ie(),fl=Ee().EventEmitter,_t=function(){};function Bt(n,e){_t(n),fl.call(this),this.sendBuffer=[],this.sender=e,this.url=n}Wh(Bt,fl);Bt.prototype.send=function(n){_t("send",n),this.sendBuffer.push(n),this.sendStop||this.sendSchedule()};Bt.prototype.sendScheduleWait=function(){_t("sendScheduleWait");var n=this,e;this.sendStop=function(){_t("sendStop"),n.sendStop=null,clearTimeout(e)},e=setTimeout(function(){_t("timeout"),n.sendStop=null,n.sendSchedule()},25)};Bt.prototype.sendSchedule=function(){_t("sendSchedule",this.sendBuffer.length);var n=this;if(this.sendBuffer.length>0){var e="["+this.sendBuffer.join(",")+"]";this.sendStop=this.sender(this.url,e,function(t){n.sendStop=null,t?(_t("error",t),n.emit("close",t.code||1006,"Sending error: "+t),n.close()):n.sendScheduleWait()}),this.sendBuffer=[]}};Bt.prototype._cleanup=function(){_t("_cleanup"),this.removeAllListeners()};Bt.prototype.close=function(){_t("close"),this._cleanup(),this.sendStop&&(this.sendStop(),this.sendStop=null)};pl.exports=Bt});var yl=P((Jg,_l)=>{"use strict";var $h=ie(),gl=Ee().EventEmitter,Dn=function(){};function Ri(n,e,t){Dn(e),gl.call(this),this.Receiver=n,this.receiveUrl=e,this.AjaxObject=t,this._scheduleReceiver()}$h(Ri,gl);Ri.prototype._scheduleReceiver=function(){Dn("_scheduleReceiver");var n=this,e=this.poll=new this.Receiver(this.receiveUrl,this.AjaxObject);e.on("message",function(t){Dn("message",t),n.emit("message",t)}),e.once("close",function(t,i){Dn("close",t,i,n.pollIsClosing),n.poll=e=null,n.pollIsClosing||(i==="network"?n._scheduleReceiver():(n.emit("close",t||1006,i),n.removeAllListeners()))})};Ri.prototype.abort=function(){Dn("abort"),this.removeAllListeners(),this.pollIsClosing=!0,this.poll&&this.poll.abort()};_l.exports=Ri});var ls=P((Yg,bl)=>{"use strict";var Gh=ie(),Kh=xe(),os=ml(),Zh=yl(),Ii=function(){};function as(n,e,t,i,r){var s=Kh.addPath(n,e);Ii(s);var o=this;os.call(this,n,t),this.poll=new Zh(i,s,r),this.poll.on("message",function(a){Ii("poll message",a),o.emit("message",a)}),this.poll.once("close",function(a,l){Ii("poll close",a,l),o.poll=null,o.emit("close",a,l),o.close()})}Gh(as,os);as.prototype.close=function(){os.prototype.close.call(this),Ii("close"),this.removeAllListeners(),this.poll&&(this.poll.abort(),this.poll=null)};bl.exports=as});var Ut=P((e_,Sl)=>{"use strict";var Qh=ie(),Xh=xe(),vl=ls(),cs=function(){};function Jh(n){return function(e,t,i){cs("create ajax sender",e,t);var r={};typeof t=="string"&&(r.headers={"Content-type":"text/plain"});var s=Xh.addPath(e,"/xhr_send"),o=new n("POST",s,t,r);return o.once("finish",function(a){if(cs("finish",a),o=null,a!==200&&a!==204)return i(new Error("http status "+a));i()}),function(){cs("abort"),o.close(),o=null;var a=new Error("Aborted");a.code=1e3,i(a)}}}function El(n,e,t,i){vl.call(this,n,e,Jh(i),t,i)}Qh(El,vl);Sl.exports=El});var Ln=P((t_,wl)=>{"use strict";var Yh=ie(),Tl=Ee().EventEmitter,It=function(){};function Mn(n,e){It(n),Tl.call(this);var t=this;this.bufferPosition=0,this.xo=new e("POST",n,null),this.xo.on("chunk",this._chunkHandler.bind(this)),this.xo.once("finish",function(i,r){It("finish",i,r),t._chunkHandler(i,r),t.xo=null;var s=i===200?"network":"permanent";It("close",s),t.emit("close",null,s),t._cleanup()})}Yh(Mn,Tl);Mn.prototype._chunkHandler=function(n,e){if(It("_chunkHandler",n),!(n!==200||!e))for(var t=-1;;this.bufferPosition+=t+1){var i=e.slice(this.bufferPosition);if(t=i.indexOf(`
`),t===-1)break;var r=i.slice(0,t);r&&(It("message",r),this.emit("message",r))}};Mn.prototype._cleanup=function(){It("_cleanup"),this.removeAllListeners()};Mn.prototype.abort=function(){It("abort"),this.xo&&(this.xo.close(),It("close"),this.emit("close",null,"user"),this.xo=null),this._cleanup()};wl.exports=Mn});var us=P((n_,Rl)=>{"use strict";var kl=Ee().EventEmitter,ef=ie(),Nl=pt(),tf=xe(),qn=global.XMLHttpRequest,Ce=function(){};function st(n,e,t,i){Ce(n,e);var r=this;kl.call(this),setTimeout(function(){r._start(n,e,t,i)},0)}ef(st,kl);st.prototype._start=function(n,e,t,i){var r=this;try{this.xhr=new qn}catch{}if(!this.xhr){Ce("no xhr"),this.emit("finish",0,"no xhr support"),this._cleanup();return}e=tf.addQuery(e,"t="+ +new Date),this.unloadRef=Nl.unloadAdd(function(){Ce("unload cleanup"),r._cleanup(!0)});try{this.xhr.open(n,e,!0),this.timeout&&"timeout"in this.xhr&&(this.xhr.timeout=this.timeout,this.xhr.ontimeout=function(){Ce("xhr timeout"),r.emit("finish",0,""),r._cleanup(!1)})}catch(o){Ce("exception",o),this.emit("finish",0,""),this._cleanup(!1);return}if((!i||!i.noCredentials)&&st.supportsCORS&&(Ce("withCredentials"),this.xhr.withCredentials=!0),i&&i.headers)for(var s in i.headers)this.xhr.setRequestHeader(s,i.headers[s]);this.xhr.onreadystatechange=function(){if(r.xhr){var o=r.xhr,a,l;switch(Ce("readyState",o.readyState),o.readyState){case 3:try{l=o.status,a=o.responseText}catch{}Ce("status",l),l===1223&&(l=204),l===200&&a&&a.length>0&&(Ce("chunk"),r.emit("chunk",l,a));break;case 4:l=o.status,Ce("status",l),l===1223&&(l=204),(l===12005||l===12029)&&(l=0),Ce("finish",l,o.responseText),r.emit("finish",l,o.responseText),r._cleanup(!1);break}}};try{r.xhr.send(t)}catch{r.emit("finish",0,""),r._cleanup(!1)}};st.prototype._cleanup=function(n){if(Ce("cleanup"),!!this.xhr){if(this.removeAllListeners(),Nl.unloadDel(this.unloadRef),this.xhr.onreadystatechange=function(){},this.xhr.ontimeout&&(this.xhr.ontimeout=null),n)try{this.xhr.abort()}catch{}this.unloadRef=this.xhr=null}};st.prototype.close=function(){Ce("close"),this._cleanup(!0)};st.enabled=!!qn;var Cl=["Active"].concat("Object").join("X");!st.enabled&&Cl in global&&(Ce("overriding xmlhttprequest"),qn=function(){try{return new global[Cl]("Microsoft.XMLHTTP")}catch{return null}},st.enabled=!!new qn);var xl=!1;try{xl="withCredentials"in new qn}catch{}st.supportsCORS=xl;Rl.exports=st});var Fn=P((i_,Il)=>{"use strict";var nf=ie(),Oi=us();function ds(n,e,t,i){Oi.call(this,n,e,t,i)}nf(ds,Oi);ds.enabled=Oi.enabled&&Oi.supportsCORS;Il.exports=ds});var dn=P((r_,Ol)=>{"use strict";var rf=ie(),hs=us();function fs(n,e,t){hs.call(this,n,e,t,{noCredentials:!0})}rf(fs,hs);fs.enabled=hs.enabled;Ol.exports=fs});var hn=P((s_,Al)=>{"use strict";Al.exports={isOpera:function(){return global.navigator&&/opera/i.test(global.navigator.userAgent)},isKonqueror:function(){return global.navigator&&/konqueror/i.test(global.navigator.userAgent)},hasDomain:function(){if(!global.document)return!0;try{return!!global.document.domain}catch{return!1}}}});var Ml=P((o_,Dl)=>{"use strict";var sf=ie(),Pl=Ut(),of=Ln(),ps=Fn(),af=dn(),lf=hn();function fn(n){if(!af.enabled&&!ps.enabled)throw new Error("Transport created when disabled");Pl.call(this,n,"/xhr_streaming",of,ps)}sf(fn,Pl);fn.enabled=function(n){return n.nullOrigin||lf.isOpera()?!1:ps.enabled};fn.transportName="xhr-streaming";fn.roundTrips=2;fn.needBody=!!global.document;Dl.exports=fn});var Ai=P((a_,Fl)=>{"use strict";var Ll=Ee().EventEmitter,cf=ie(),ql=pt(),uf=hn(),df=xe(),Ot=function(){};function Vt(n,e,t){Ot(n,e);var i=this;Ll.call(this),setTimeout(function(){i._start(n,e,t)},0)}cf(Vt,Ll);Vt.prototype._start=function(n,e,t){Ot("_start");var i=this,r=new global.XDomainRequest;e=df.addQuery(e,"t="+ +new Date),r.onerror=function(){Ot("onerror"),i._error()},r.ontimeout=function(){Ot("ontimeout"),i._error()},r.onprogress=function(){Ot("progress",r.responseText),i.emit("chunk",200,r.responseText)},r.onload=function(){Ot("load"),i.emit("finish",200,r.responseText),i._cleanup(!1)},this.xdr=r,this.unloadRef=ql.unloadAdd(function(){i._cleanup(!0)});try{this.xdr.open(n,e),this.timeout&&(this.xdr.timeout=this.timeout),this.xdr.send(t)}catch{this._error()}};Vt.prototype._error=function(){this.emit("finish",0,""),this._cleanup(!1)};Vt.prototype._cleanup=function(n){if(Ot("cleanup",n),!!this.xdr){if(this.removeAllListeners(),ql.unloadDel(this.unloadRef),this.xdr.ontimeout=this.xdr.onerror=this.xdr.onprogress=this.xdr.onload=null,n)try{this.xdr.abort()}catch{}this.unloadRef=this.xdr=null}};Vt.prototype.close=function(){Ot("close"),this._cleanup(!0)};Vt.enabled=!!(global.XDomainRequest&&uf.hasDomain());Fl.exports=Vt});var gs=P((l_,Bl)=>{"use strict";var hf=ie(),jl=Ut(),ff=Ln(),ms=Ai();function jn(n){if(!ms.enabled)throw new Error("Transport created when disabled");jl.call(this,n,"/xhr_streaming",ff,ms)}hf(jn,jl);jn.enabled=function(n){return n.cookie_needed||n.nullOrigin?!1:ms.enabled&&n.sameScheme};jn.transportName="xdr-streaming";jn.roundTrips=2;Bl.exports=jn});var _s=P((c_,Ul)=>{"use strict";Ul.exports=global.EventSource});var zl=P((u_,Hl)=>{"use strict";var pf=ie(),Vl=Ee().EventEmitter,mf=_s(),pn=function(){};function Bn(n){pn(n),Vl.call(this);var e=this,t=this.es=new mf(n);t.onmessage=function(i){pn("message",i.data),e.emit("message",decodeURI(i.data))},t.onerror=function(i){pn("error",t.readyState,i);var r=t.readyState!==2?"network":"permanent";e._cleanup(),e._close(r)}}pf(Bn,Vl);Bn.prototype.abort=function(){pn("abort"),this._cleanup(),this._close("user")};Bn.prototype._cleanup=function(){pn("cleanup");var n=this.es;n&&(n.onmessage=n.onerror=null,n.close(),this.es=null)};Bn.prototype._close=function(n){pn("close",n);var e=this;setTimeout(function(){e.emit("close",null,n),e.removeAllListeners()},200)};Hl.exports=Bn});var ys=P((d_,$l)=>{"use strict";var gf=ie(),Wl=Ut(),_f=zl(),yf=Fn(),bf=_s();function mn(n){if(!mn.enabled())throw new Error("Transport created when disabled");Wl.call(this,n,"/eventsource",_f,yf)}gf(mn,Wl);mn.enabled=function(){return!!bf};mn.transportName="eventsource";mn.roundTrips=2;$l.exports=mn});var bs=P((h_,Gl)=>{"use strict";Gl.exports="1.6.1"});var gn=P((f_,yt)=>{"use strict";var Pi=pt(),vf=hn(),Ht=function(){};yt.exports={WPrefix:"_jp",currentWindowId:null,polluteGlobalNamespace:function(){yt.exports.WPrefix in global||(global[yt.exports.WPrefix]={})},postMessage:function(n,e){global.parent!==global?global.parent.postMessage(JSON.stringify({windowId:yt.exports.currentWindowId,type:n,data:e||""}),"*"):Ht("Cannot postMessage, no parent window.",n,e)},createIframe:function(n,e){var t=global.document.createElement("iframe"),i,r,s=function(){Ht("unattach"),clearTimeout(i);try{t.onload=null}catch{}t.onerror=null},o=function(){Ht("cleanup"),t&&(s(),setTimeout(function(){t&&t.parentNode.removeChild(t),t=null},0),Pi.unloadDel(r))},a=function(u){Ht("onerror",u),t&&(o(),e(u))},l=function(u,f){Ht("post",u,f),setTimeout(function(){try{t&&t.contentWindow&&t.contentWindow.postMessage(u,f)}catch{}},0)};return t.src=n,t.style.display="none",t.style.position="absolute",t.onerror=function(){a("onerror")},t.onload=function(){Ht("onload"),clearTimeout(i),i=setTimeout(function(){a("onload timeout")},2e3)},global.document.body.appendChild(t),i=setTimeout(function(){a("timeout")},15e3),r=Pi.unloadAdd(o),{post:l,cleanup:o,loaded:s}},createHtmlfile:function(n,e){var t=["Active"].concat("Object").join("X"),i=new global[t]("htmlfile"),r,s,o,a=function(){clearTimeout(r),o.onerror=null},l=function(){i&&(a(),Pi.unloadDel(s),o.parentNode.removeChild(o),o=i=null,CollectGarbage())},u=function(y){Ht("onerror",y),i&&(l(),e(y))},f=function(y,C){try{setTimeout(function(){o&&o.contentWindow&&o.contentWindow.postMessage(y,C)},0)}catch{}};i.open(),i.write('<html><script>document.domain="'+global.document.domain+'";<\/script></html>'),i.close(),i.parentWindow[yt.exports.WPrefix]=global[yt.exports.WPrefix];var h=i.createElement("div");return i.body.appendChild(h),o=i.createElement("iframe"),h.appendChild(o),o.src=n,o.onerror=function(){u("onerror")},r=setTimeout(function(){u("timeout")},15e3),s=Pi.unloadAdd(l),{post:f,cleanup:l,loaded:a}}};yt.exports.iframeEnabled=!1;global.document&&(yt.exports.iframeEnabled=(typeof global.postMessage=="function"||typeof global.postMessage=="object")&&!vf.isKonqueror())});var Es=P((p_,Xl)=>{"use strict";var Ef=ie(),Kl=Ee().EventEmitter,Sf=bs(),vs=xe(),Zl=gn(),Ql=pt(),Tf=jt(),ot=function(){};function at(n,e,t){if(!at.enabled())throw new Error("Transport created when disabled");Kl.call(this);var i=this;this.origin=vs.getOrigin(t),this.baseUrl=t,this.transUrl=e,this.transport=n,this.windowId=Tf.string(8);var r=vs.addPath(t,"/iframe.html")+"#"+this.windowId;ot(n,e,r),this.iframeObj=Zl.createIframe(r,function(s){ot("err callback"),i.emit("close",1006,"Unable to load an iframe ("+s+")"),i.close()}),this.onmessageCallback=this._message.bind(this),Ql.attachEvent("message",this.onmessageCallback)}Ef(at,Kl);at.prototype.close=function(){if(ot("close"),this.removeAllListeners(),this.iframeObj){Ql.detachEvent("message",this.onmessageCallback);try{this.postMessage("c")}catch{}this.iframeObj.cleanup(),this.iframeObj=null,this.onmessageCallback=this.iframeObj=null}};at.prototype._message=function(n){if(ot("message",n.data),!vs.isOriginEqual(n.origin,this.origin)){ot("not same origin",n.origin,this.origin);return}var e;try{e=JSON.parse(n.data)}catch{ot("bad json",n.data);return}if(e.windowId!==this.windowId){ot("mismatched window id",e.windowId,this.windowId);return}switch(e.type){case"s":this.iframeObj.loaded(),this.postMessage("s",JSON.stringify([Sf,this.transport,this.transUrl,this.baseUrl]));break;case"t":this.emit("message",e.data);break;case"c":var t;try{t=JSON.parse(e.data)}catch{ot("bad json",e.data);return}this.emit("close",t[0],t[1]),this.close();break}};at.prototype.postMessage=function(n,e){ot("postMessage",n,e),this.iframeObj.post(JSON.stringify({windowId:this.windowId,type:n,data:e||""}),this.origin)};at.prototype.send=function(n){ot("send",n),this.postMessage("m",n)};at.enabled=function(){return Zl.iframeEnabled};at.transportName="iframe";at.roundTrips=2;Xl.exports=at});var Di=P((m_,Jl)=>{"use strict";Jl.exports={isObject:function(n){var e=typeof n;return e==="function"||e==="object"&&!!n},extend:function(n){if(!this.isObject(n))return n;for(var e,t,i=1,r=arguments.length;i<r;i++){e=arguments[i];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&(n[t]=e[t])}return n}}});var Li=P((g_,Yl)=>{"use strict";var wf=ie(),Mi=Es(),Cf=Di();Yl.exports=function(n){function e(t,i){Mi.call(this,n.transportName,t,i)}return wf(e,Mi),e.enabled=function(t,i){if(!global.document)return!1;var r=Cf.extend({},i);return r.sameOrigin=!0,n.enabled(r)&&Mi.enabled()},e.transportName="iframe-"+n.transportName,e.needBody=!0,e.roundTrips=Mi.roundTrips+n.roundTrips-1,e.facadeTransport=n,e}});var ic=P((__,nc)=>{"use strict";var kf=ie(),zt=gn(),Nf=xe(),tc=Ee().EventEmitter,xf=jt(),bt=function(){};function We(n){bt(n),tc.call(this);var e=this;zt.polluteGlobalNamespace(),this.id="a"+xf.string(6),n=Nf.addQuery(n,"c="+decodeURIComponent(zt.WPrefix+"."+this.id)),bt("using htmlfile",We.htmlfileEnabled);var t=We.htmlfileEnabled?zt.createHtmlfile:zt.createIframe;global[zt.WPrefix][this.id]={start:function(){bt("start"),e.iframeObj.loaded()},message:function(i){bt("message",i),e.emit("message",i)},stop:function(){bt("stop"),e._cleanup(),e._close("network")}},this.iframeObj=t(n,function(){bt("callback"),e._cleanup(),e._close("permanent")})}kf(We,tc);We.prototype.abort=function(){bt("abort"),this._cleanup(),this._close("user")};We.prototype._cleanup=function(){bt("_cleanup"),this.iframeObj&&(this.iframeObj.cleanup(),this.iframeObj=null),delete global[zt.WPrefix][this.id]};We.prototype._close=function(n){bt("_close",n),this.emit("close",null,n),this.removeAllListeners()};We.htmlfileEnabled=!1;var ec=["Active"].concat("Object").join("X");if(ec in global)try{We.htmlfileEnabled=!!new global[ec]("htmlfile")}catch{}We.enabled=We.htmlfileEnabled||zt.iframeEnabled;nc.exports=We});var Ts=P((y_,sc)=>{"use strict";var Rf=ie(),Ss=ic(),If=dn(),rc=Ut();function Un(n){if(!Ss.enabled)throw new Error("Transport created when disabled");rc.call(this,n,"/htmlfile",Ss,If)}Rf(Un,rc);Un.enabled=function(n){return Ss.enabled&&n.sameOrigin};Un.transportName="htmlfile";Un.roundTrips=2;sc.exports=Un});var Cs=P((b_,lc)=>{"use strict";var Of=ie(),oc=Ut(),Af=Ln(),ws=Fn(),ac=dn();function Vn(n){if(!ac.enabled&&!ws.enabled)throw new Error("Transport created when disabled");oc.call(this,n,"/xhr",Af,ws)}Of(Vn,oc);Vn.enabled=function(n){return n.nullOrigin?!1:ac.enabled&&n.sameOrigin?!0:ws.enabled};Vn.transportName="xhr-polling";Vn.roundTrips=2;lc.exports=Vn});var hc=P((v_,dc)=>{"use strict";var Pf=ie(),uc=Ut(),Df=gs(),Mf=Ln(),cc=Ai();function Hn(n){if(!cc.enabled)throw new Error("Transport created when disabled");uc.call(this,n,"/xhr",Mf,cc)}Pf(Hn,uc);Hn.enabled=Df.enabled;Hn.transportName="xdr-polling";Hn.roundTrips=2;dc.exports=Hn});var gc=P((E_,mc)=>{"use strict";var zn=gn(),fc=jt(),Lf=hn(),qf=xe(),Ff=ie(),pc=Ee().EventEmitter,$e=function(){};function qe(n){$e(n);var e=this;pc.call(this),zn.polluteGlobalNamespace(),this.id="a"+fc.string(6);var t=qf.addQuery(n,"c="+encodeURIComponent(zn.WPrefix+"."+this.id));global[zn.WPrefix][this.id]=this._callback.bind(this),this._createScript(t),this.timeoutId=setTimeout(function(){$e("timeout"),e._abort(new Error("JSONP script loaded abnormally (timeout)"))},qe.timeout)}Ff(qe,pc);qe.prototype.abort=function(){if($e("abort"),global[zn.WPrefix][this.id]){var n=new Error("JSONP user aborted read");n.code=1e3,this._abort(n)}};qe.timeout=35e3;qe.scriptErrorTimeout=1e3;qe.prototype._callback=function(n){$e("_callback",n),this._cleanup(),!this.aborting&&(n&&($e("message",n),this.emit("message",n)),this.emit("close",null,"network"),this.removeAllListeners())};qe.prototype._abort=function(n){$e("_abort",n),this._cleanup(),this.aborting=!0,this.emit("close",n.code,n.message),this.removeAllListeners()};qe.prototype._cleanup=function(){if($e("_cleanup"),clearTimeout(this.timeoutId),this.script2&&(this.script2.parentNode.removeChild(this.script2),this.script2=null),this.script){var n=this.script;n.parentNode.removeChild(n),n.onreadystatechange=n.onerror=n.onload=n.onclick=null,this.script=null}delete global[zn.WPrefix][this.id]};qe.prototype._scriptError=function(){$e("_scriptError");var n=this;this.errorTimer||(this.errorTimer=setTimeout(function(){n.loadedOkay||n._abort(new Error("JSONP script loaded abnormally (onerror)"))},qe.scriptErrorTimeout))};qe.prototype._createScript=function(n){$e("_createScript",n);var e=this,t=this.script=global.document.createElement("script"),i;if(t.id="a"+fc.string(8),t.src=n,t.type="text/javascript",t.charset="UTF-8",t.onerror=this._scriptError.bind(this),t.onload=function(){$e("onload"),e._abort(new Error("JSONP script loaded abnormally (onload)"))},t.onreadystatechange=function(){if($e("onreadystatechange",t.readyState),/loaded|closed/.test(t.readyState)){if(t&&t.htmlFor&&t.onclick){e.loadedOkay=!0;try{t.onclick()}catch{}}t&&e._abort(new Error("JSONP script loaded abnormally (onreadystatechange)"))}},typeof t.async>"u"&&global.document.attachEvent)if(Lf.isOpera())i=this.script2=global.document.createElement("script"),i.text="try{var a = document.getElementById('"+t.id+"'); if(a)a.onerror();}catch(x){};",t.async=i.async=!1;else{try{t.htmlFor=t.id,t.event="onclick"}catch{}t.async=!0}typeof t.async<"u"&&(t.async=!0);var r=global.document.getElementsByTagName("head")[0];r.insertBefore(t,r.firstChild),i&&r.insertBefore(i,r.firstChild)};mc.exports=qe});var bc=P((S_,yc)=>{"use strict";var jf=jt(),_c=xe(),vt=function(){},Re,Wn;function Bf(n){vt("createIframe",n);try{return global.document.createElement('<iframe name="'+n+'">')}catch{var e=global.document.createElement("iframe");return e.name=n,e}}function Uf(){vt("createForm"),Re=global.document.createElement("form"),Re.style.display="none",Re.style.position="absolute",Re.method="POST",Re.enctype="application/x-www-form-urlencoded",Re.acceptCharset="UTF-8",Wn=global.document.createElement("textarea"),Wn.name="d",Re.appendChild(Wn),global.document.body.appendChild(Re)}yc.exports=function(n,e,t){vt(n,e),Re||Uf();var i="a"+jf.string(8);Re.target=i,Re.action=_c.addQuery(_c.addPath(n,"/jsonp_send"),"i="+i);var r=Bf(i);r.id=i,r.style.display="none",Re.appendChild(r);try{Wn.value=e}catch{}Re.submit();var s=function(o){vt("completed",i,o),r.onerror&&(r.onreadystatechange=r.onerror=r.onload=null,setTimeout(function(){vt("cleaning up",i),r.parentNode.removeChild(r),r=null},500),Wn.value="",t(o))};return r.onerror=function(){vt("onerror",i),s()},r.onload=function(){vt("onload",i),s()},r.onreadystatechange=function(o){vt("onreadystatechange",i,r.readyState,o),r.readyState==="complete"&&s()},function(){vt("aborted",i),s(new Error("Aborted"))}}});var Sc=P((T_,Ec)=>{"use strict";var Vf=ie(),vc=ls(),Hf=gc(),zf=bc();function Wt(n){if(!Wt.enabled())throw new Error("Transport created when disabled");vc.call(this,n,"/jsonp",zf,Hf)}Vf(Wt,vc);Wt.enabled=function(){return!!global.document};Wt.transportName="jsonp-polling";Wt.roundTrips=1;Wt.needBody=!0;Ec.exports=Wt});var wc=P((w_,Tc)=>{"use strict";Tc.exports=[hl(),Ml(),gs(),ys(),Li()(ys()),Ts(),Li()(Ts()),Cs(),hc(),Li()(Cs()),Sc()]});var Oc=P(()=>{"use strict";var $n=Array.prototype,Rs=Object.prototype,Wf=Function.prototype,Gn=String.prototype,ks=$n.slice,Is=Rs.toString,Nc=function(n){return Rs.toString.call(n)==="[object Function]"},$f=function(e){return Is.call(e)==="[object Array]"},xc=function(e){return Is.call(e)==="[object String]"},Gf=Object.defineProperty&&(function(){try{return Object.defineProperty({},"x",{}),!0}catch{return!1}})(),xs;Gf?xs=function(n,e,t,i){!i&&e in n||Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:!0,value:t})}:xs=function(n,e,t,i){!i&&e in n||(n[e]=t)};var Kn=function(n,e,t){for(var i in e)Rs.hasOwnProperty.call(e,i)&&xs(n,i,e[i],t)},Rc=function(n){if(n==null)throw new TypeError("can't convert "+n+" to object");return Object(n)};function Kf(n){var e=+n;return e!==e?e=0:e!==0&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}function Zf(n){return n>>>0}function Ns(){}Kn(Wf,{bind:function(e){var t=this;if(!Nc(t))throw new TypeError("Function.prototype.bind called on incompatible "+t);for(var i=ks.call(arguments,1),r=function(){if(this instanceof l){var u=t.apply(this,i.concat(ks.call(arguments)));return Object(u)===u?u:this}else return t.apply(e,i.concat(ks.call(arguments)))},s=Math.max(0,t.length-i.length),o=[],a=0;a<s;a++)o.push("$"+a);var l=Function("binder","return function ("+o.join(",")+"){ return binder.apply(this, arguments); }")(r);return t.prototype&&(Ns.prototype=t.prototype,l.prototype=new Ns,Ns.prototype=null),l}});Kn(Array,{isArray:$f});var Cc=Object("a"),Ic=Cc[0]!=="a"||!(0 in Cc),Qf=function(e){var t=!0,i=!0;return e&&(e.call("foo",function(r,s,o){typeof o!="object"&&(t=!1)}),e.call([1],function(){"use strict";i=typeof this=="string"},"x")),!!e&&t&&i};Kn($n,{forEach:function(e){var t=Rc(this),i=Ic&&xc(this)?this.split(""):t,r=arguments[1],s=-1,o=i.length>>>0;if(!Nc(e))throw new TypeError;for(;++s<o;)s in i&&e.call(r,i[s],s,t)}},!Qf($n.forEach));var Xf=Array.prototype.indexOf&&[0,1].indexOf(1,2)!==-1;Kn($n,{indexOf:function(e){var t=Ic&&xc(this)?this.split(""):Rc(this),i=t.length>>>0;if(!i)return-1;var r=0;for(arguments.length>1&&(r=Kf(arguments[1])),r=r>=0?r:Math.max(0,i+r);r<i;r++)if(r in t&&t[r]===e)return r;return-1}},Xf);var kc=Gn.split;"ab".split(/(?:ab)*/).length!==2||".".split(/(.?)(.?)/).length!==4||"tesst".split(/(s)*/)[1]==="t"||"test".split(/(?:)/,-1).length!==4||"".split(/.?/).length||".".split(/()()/).length>1?(function(){var n=/()??/.exec("")[1]===void 0;Gn.split=function(e,t){var i=this;if(e===void 0&&t===0)return[];if(Is.call(e)!=="[object RegExp]")return kc.call(this,e,t);var r=[],s=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":""),o=0,a,l,u,f;for(e=new RegExp(e.source,s+"g"),i+="",n||(a=new RegExp("^"+e.source+"$(?!\\s)",s)),t=t===void 0?-1>>>0:Zf(t);(l=e.exec(i))&&(u=l.index+l[0].length,!(u>o&&(r.push(i.slice(o,l.index)),!n&&l.length>1&&l[0].replace(a,function(){for(var h=1;h<arguments.length-2;h++)arguments[h]===void 0&&(l[h]=void 0)}),l.length>1&&l.index<i.length&&$n.push.apply(r,l.slice(1)),f=l[0].length,o=u,r.length>=t)));)e.lastIndex===l.index&&e.lastIndex++;return o===i.length?(f||!e.test(""))&&r.push(""):r.push(i.slice(o)),r.length>t?r.slice(0,t):r}})():"0".split(void 0,0).length&&(Gn.split=function(e,t){return e===void 0&&t===0?[]:kc.call(this,e,t)});var Jf=Gn.substr,Yf="".substr&&"0b".substr(-1)!=="b";Kn(Gn,{substr:function(e,t){return Jf.call(this,e<0&&(e=this.length+e)<0?0:e,t)}},Yf)});var Pc=P((N_,Ac)=>{"use strict";var qi=/[\x00-\x1f\ud800-\udfff\ufffe\uffff\u0300-\u0333\u033d-\u0346\u034a-\u034c\u0350-\u0352\u0357-\u0358\u035c-\u0362\u0374\u037e\u0387\u0591-\u05af\u05c4\u0610-\u0617\u0653-\u0654\u0657-\u065b\u065d-\u065e\u06df-\u06e2\u06eb-\u06ec\u0730\u0732-\u0733\u0735-\u0736\u073a\u073d\u073f-\u0741\u0743\u0745\u0747\u07eb-\u07f1\u0951\u0958-\u095f\u09dc-\u09dd\u09df\u0a33\u0a36\u0a59-\u0a5b\u0a5e\u0b5c-\u0b5d\u0e38-\u0e39\u0f43\u0f4d\u0f52\u0f57\u0f5c\u0f69\u0f72-\u0f76\u0f78\u0f80-\u0f83\u0f93\u0f9d\u0fa2\u0fa7\u0fac\u0fb9\u1939-\u193a\u1a17\u1b6b\u1cda-\u1cdb\u1dc0-\u1dcf\u1dfc\u1dfe\u1f71\u1f73\u1f75\u1f77\u1f79\u1f7b\u1f7d\u1fbb\u1fbe\u1fc9\u1fcb\u1fd3\u1fdb\u1fe3\u1feb\u1fee-\u1fef\u1ff9\u1ffb\u1ffd\u2000-\u2001\u20d0-\u20d1\u20d4-\u20d7\u20e7-\u20e9\u2126\u212a-\u212b\u2329-\u232a\u2adc\u302b-\u302c\uaab2-\uaab3\uf900-\ufa0d\ufa10\ufa12\ufa15-\ufa1e\ufa20\ufa22\ufa25-\ufa26\ufa2a-\ufa2d\ufa30-\ufa6d\ufa70-\ufad9\ufb1d\ufb1f\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufb4e\ufff0-\uffff]/g,Os,ep=function(n){var e,t={},i=[];for(e=0;e<65536;e++)i.push(String.fromCharCode(e));return n.lastIndex=0,i.join("").replace(n,function(r){return t[r]="\\u"+("0000"+r.charCodeAt(0).toString(16)).slice(-4),""}),n.lastIndex=0,t};Ac.exports={quote:function(n){var e=JSON.stringify(n);return qi.lastIndex=0,qi.test(e)?(Os||(Os=ep(qi)),e.replace(qi,function(t){return Os[t]})):e}}});var Mc=P((x_,Dc)=>{"use strict";var Fi=function(){};Dc.exports=function(n){return{filterToEnabled:function(e,t){var i={main:[],facade:[]};return e?typeof e=="string"&&(e=[e]):e=[],n.forEach(function(r){if(r){if(r.transportName==="websocket"&&t.websocket===!1){Fi("disabled from server","websocket");return}if(e.length&&e.indexOf(r.transportName)===-1){Fi("not in whitelist",r.transportName);return}r.enabled(t)?(Fi("enabled",r.transportName),i.main.push(r),r.facadeTransport&&i.facade.push(r.facadeTransport)):Fi("disabled",r.transportName)}}),i}}}});var qc=P((R_,Lc)=>{"use strict";var As={};["log","debug","warn"].forEach(function(n){var e;try{e=global.console&&global.console[n]&&global.console[n].apply}catch{}As[n]=e?function(){return global.console[n].apply(global.console,arguments)}:n==="log"?function(){}:As.log});Lc.exports=As});var ji=P((I_,Fc)=>{"use strict";function $t(n){this.type=n}$t.prototype.initEvent=function(n,e,t){return this.type=n,this.bubbles=e,this.cancelable=t,this.timeStamp=+new Date,this};$t.prototype.stopPropagation=function(){};$t.prototype.preventDefault=function(){};$t.CAPTURING_PHASE=1;$t.AT_TARGET=2;$t.BUBBLING_PHASE=3;Fc.exports=$t});var Ps=P((O_,jc)=>{"use strict";jc.exports=global.location||{origin:"http://localhost:80",protocol:"http:",host:"localhost",port:80,href:"http://localhost/",hash:""}});var Hc=P((A_,Vc)=>{"use strict";var tp=ie(),Bc=ji();function Uc(){Bc.call(this),this.initEvent("close",!1,!1),this.wasClean=!1,this.code=0,this.reason=""}tp(Uc,Bc);Vc.exports=Uc});var Gc=P((P_,$c)=>{"use strict";var np=ie(),zc=ji();function Wc(n){zc.call(this),this.initEvent("message",!1,!1),this.data=n}np(Wc,zc);$c.exports=Wc});var Qc=P((D_,Zc)=>{"use strict";var Kc=Ee().EventEmitter,ip=ie();function Zn(){var n=this;Kc.call(this),this.to=setTimeout(function(){n.emit("finish",200,"{}")},Zn.timeout)}ip(Zn,Kc);Zn.prototype.close=function(){clearTimeout(this.to)};Zn.timeout=2e3;Zc.exports=Zn});var Ms=P((M_,Jc)=>{"use strict";var Xc=Ee().EventEmitter,rp=ie(),sp=Di(),op=function(){};function Ds(n,e){Xc.call(this);var t=this,i=+new Date;this.xo=new e("GET",n),this.xo.once("finish",function(r,s){var o,a;if(r===200){if(a=+new Date-i,s)try{o=JSON.parse(s)}catch{op("bad json",s)}sp.isObject(o)||(o={})}t.emit("finish",o,a),t.removeAllListeners()})}rp(Ds,Xc);Ds.prototype.close=function(){this.removeAllListeners(),this.xo.close()};Jc.exports=Ds});var Ls=P((L_,eu)=>{"use strict";var ap=ie(),Yc=Ee().EventEmitter,lp=dn(),cp=Ms();function Bi(n){var e=this;Yc.call(this),this.ir=new cp(n,lp),this.ir.once("finish",function(t,i){e.ir=null,e.emit("message",JSON.stringify([t,i]))})}ap(Bi,Yc);Bi.transportName="iframe-info-receiver";Bi.prototype.close=function(){this.ir&&(this.ir.close(),this.ir=null),this.removeAllListeners()};eu.exports=Bi});var ru=P((q_,iu)=>{"use strict";var tu=Ee().EventEmitter,up=ie(),dp=pt(),nu=Es(),hp=Ls(),fp=function(){};function Ui(n,e){var t=this;tu.call(this);var i=function(){var r=t.ifr=new nu(hp.transportName,e,n);r.once("message",function(s){if(s){var o;try{o=JSON.parse(s)}catch{fp("bad json",s),t.emit("finish"),t.close();return}var a=o[0],l=o[1];t.emit("finish",a,l)}t.close()}),r.once("close",function(){t.emit("finish"),t.close()})};global.document.body?i():dp.attachEvent("load",i)}up(Ui,tu);Ui.enabled=function(){return nu.enabled()};Ui.prototype.close=function(){this.ifr&&this.ifr.close(),this.removeAllListeners(),this.ifr=null};iu.exports=Ui});var uu=P((F_,cu)=>{"use strict";var lu=Ee().EventEmitter,pp=ie(),mp=xe(),su=Ai(),ou=Fn(),gp=dn(),_p=Qc(),au=ru(),Vi=Ms(),_n=function(){};function Et(n,e){_n(n);var t=this;lu.call(this),setTimeout(function(){t.doXhr(n,e)},0)}pp(Et,lu);Et._getReceiver=function(n,e,t){return t.sameOrigin?new Vi(e,gp):ou.enabled?new Vi(e,ou):su.enabled&&t.sameScheme?new Vi(e,su):au.enabled()?new au(n,e):new Vi(e,_p)};Et.prototype.doXhr=function(n,e){var t=this,i=mp.addPath(n,"/info");_n("doXhr",i),this.xo=Et._getReceiver(n,i,e),this.timeoutRef=setTimeout(function(){_n("timeout"),t._cleanup(!1),t.emit("finish")},Et.timeout),this.xo.once("finish",function(r,s){_n("finish",r,s),t._cleanup(!0),t.emit("finish",r,s)})};Et.prototype._cleanup=function(n){_n("_cleanup"),clearTimeout(this.timeoutRef),this.timeoutRef=null,!n&&this.xo&&this.xo.close(),this.xo=null};Et.prototype.close=function(){_n("close"),this.removeAllListeners(),this._cleanup(!1)};Et.timeout=8e3;cu.exports=Et});var fu=P((j_,hu)=>{"use strict";var du=gn();function Qn(n){this._transport=n,n.on("message",this._transportMessage.bind(this)),n.on("close",this._transportClose.bind(this))}Qn.prototype._transportClose=function(n,e){du.postMessage("c",JSON.stringify([n,e]))};Qn.prototype._transportMessage=function(n){du.postMessage("t",n)};Qn.prototype._send=function(n){this._transport.send(n)};Qn.prototype._close=function(){this._transport.close(),this._transport.removeAllListeners()};hu.exports=Qn});var _u=P((B_,gu)=>{"use strict";var pu=xe(),yp=pt(),bp=fu(),mu=Ls(),qs=gn(),Hi=Ps(),Fs=function(){};gu.exports=function(n,e){var t={};e.forEach(function(r){r.facadeTransport&&(t[r.facadeTransport.transportName]=r.facadeTransport)}),t[mu.transportName]=mu;var i;n.bootstrap_iframe=function(){var r;qs.currentWindowId=Hi.hash.slice(1);var s=function(o){if(o.source===parent&&(typeof i>"u"&&(i=o.origin),o.origin===i)){var a;try{a=JSON.parse(o.data)}catch{Fs("bad json",o.data);return}if(a.windowId===qs.currentWindowId)switch(a.type){case"s":var l;try{l=JSON.parse(a.data)}catch{Fs("bad json",a.data);break}var u=l[0],f=l[1],h=l[2],y=l[3];if(Fs(u,f,h,y),u!==n.version)throw new Error('Incompatible SockJS! Main site uses: "'+u+'", the iframe: "'+n.version+'".');if(!pu.isOriginEqual(h,Hi.href)||!pu.isOriginEqual(y,Hi.href))throw new Error("Can't connect to different domain from within an iframe. ("+Hi.href+", "+h+", "+y+")");r=new bp(new t[f](h,y));break;case"m":r._send(a.data);break;case"c":r&&r._close(),r=null;break}}};yp.attachEvent("message",s),qs.postMessage("s")}}});var wu=P((U_,Tu)=>{"use strict";Oc();var vp=ns(),Ep=ie(),yu=jt(),Sp=Pc(),Xn=xe(),Tp=pt(),wp=Mc(),Cp=Di(),kp=hn(),Np=qc(),js=ji(),vu=rs(),zi=Ps(),xp=Hc(),bu=Gc(),Rp=uu(),he=function(){},Eu;function re(n,e,t){if(!(this instanceof re))return new re(n,e,t);if(arguments.length<1)throw new TypeError("Failed to construct 'SockJS: 1 argument required, but only 0 present");vu.call(this),this.readyState=re.CONNECTING,this.extensions="",this.protocol="",t=t||{},t.protocols_whitelist&&Np.warn("'protocols_whitelist' is DEPRECATED. Use 'transports' instead."),this._transportsWhitelist=t.transports,this._transportOptions=t.transportOptions||{},this._timeout=t.timeout||0;var i=t.sessionId||8;if(typeof i=="function")this._generateSessionId=i;else if(typeof i=="number")this._generateSessionId=function(){return yu.string(i)};else throw new TypeError("If sessionId is used in the options, it needs to be a number or a function.");this._server=t.server||yu.numberString(1e3);var r=new vp(n);if(!r.host||!r.protocol)throw new SyntaxError("The URL '"+n+"' is invalid");if(r.hash)throw new SyntaxError("The URL must not contain a fragment");if(r.protocol!=="http:"&&r.protocol!=="https:")throw new SyntaxError("The URL's scheme must be either 'http:' or 'https:'. '"+r.protocol+"' is not allowed.");var s=r.protocol==="https:";if(zi.protocol==="https:"&&!s&&!Xn.isLoopbackAddr(r.hostname))throw new Error("SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS");e?Array.isArray(e)||(e=[e]):e=[];var o=e.sort();o.forEach(function(l,u){if(!l)throw new SyntaxError("The protocols entry '"+l+"' is invalid.");if(u<o.length-1&&l===o[u+1])throw new SyntaxError("The protocols entry '"+l+"' is duplicated.")});var a=Xn.getOrigin(zi.href);this._origin=a?a.toLowerCase():null,r.set("pathname",r.pathname.replace(/\/+$/,"")),this.url=r.href,he("using url",this.url),this._urlInfo={nullOrigin:!kp.hasDomain(),sameOrigin:Xn.isOriginEqual(this.url,zi.href),sameScheme:Xn.isSchemeEqual(this.url,zi.href)},this._ir=new Rp(this.url,this._urlInfo),this._ir.once("finish",this._receiveInfo.bind(this))}Ep(re,vu);function Su(n){return n===1e3||n>=3e3&&n<=4999}re.prototype.close=function(n,e){if(n&&!Su(n))throw new Error("InvalidAccessError: Invalid code");if(e&&e.length>123)throw new SyntaxError("reason argument has an invalid length");if(!(this.readyState===re.CLOSING||this.readyState===re.CLOSED)){var t=!0;this._close(n||1e3,e||"Normal closure",t)}};re.prototype.send=function(n){if(typeof n!="string"&&(n=""+n),this.readyState===re.CONNECTING)throw new Error("InvalidStateError: The connection has not been established yet");this.readyState===re.OPEN&&this._transport.send(Sp.quote(n))};re.version=bs();re.CONNECTING=0;re.OPEN=1;re.CLOSING=2;re.CLOSED=3;re.prototype._receiveInfo=function(n,e){if(he("_receiveInfo",e),this._ir=null,!n){this._close(1002,"Cannot connect to server");return}this._rto=this.countRTO(e),this._transUrl=n.base_url?n.base_url:this.url,n=Cp.extend(n,this._urlInfo),he("info",n);var t=Eu.filterToEnabled(this._transportsWhitelist,n);this._transports=t.main,he(this._transports.length+" enabled transports"),this._connect()};re.prototype._connect=function(){for(var n=this._transports.shift();n;n=this._transports.shift()){if(he("attempt",n.transportName),n.needBody&&(!global.document.body||typeof global.document.readyState<"u"&&global.document.readyState!=="complete"&&global.document.readyState!=="interactive")){he("waiting for body"),this._transports.unshift(n),Tp.attachEvent("load",this._connect.bind(this));return}var e=Math.max(this._timeout,this._rto*n.roundTrips||5e3);this._transportTimeoutId=setTimeout(this._transportTimeout.bind(this),e),he("using timeout",e);var t=Xn.addPath(this._transUrl,"/"+this._server+"/"+this._generateSessionId()),i=this._transportOptions[n.transportName];he("transport url",t);var r=new n(t,this._transUrl,i);r.on("message",this._transportMessage.bind(this)),r.once("close",this._transportClose.bind(this)),r.transportName=n.transportName,this._transport=r;return}this._close(2e3,"All transports failed",!1)};re.prototype._transportTimeout=function(){he("_transportTimeout"),this.readyState===re.CONNECTING&&(this._transport&&this._transport.close(),this._transportClose(2007,"Transport timed out"))};re.prototype._transportMessage=function(n){he("_transportMessage",n);var e=this,t=n.slice(0,1),i=n.slice(1),r;switch(t){case"o":this._open();return;case"h":this.dispatchEvent(new js("heartbeat")),he("heartbeat",this.transport);return}if(i)try{r=JSON.parse(i)}catch{he("bad json",i)}if(typeof r>"u"){he("empty payload",i);return}switch(t){case"a":Array.isArray(r)&&r.forEach(function(s){he("message",e.transport,s),e.dispatchEvent(new bu(s))});break;case"m":he("message",this.transport,r),this.dispatchEvent(new bu(r));break;case"c":Array.isArray(r)&&r.length===2&&this._close(r[0],r[1],!0);break}};re.prototype._transportClose=function(n,e){if(he("_transportClose",this.transport,n,e),this._transport&&(this._transport.removeAllListeners(),this._transport=null,this.transport=null),!Su(n)&&n!==2e3&&this.readyState===re.CONNECTING){this._connect();return}this._close(n,e)};re.prototype._open=function(){he("_open",this._transport&&this._transport.transportName,this.readyState),this.readyState===re.CONNECTING?(this._transportTimeoutId&&(clearTimeout(this._transportTimeoutId),this._transportTimeoutId=null),this.readyState=re.OPEN,this.transport=this._transport.transportName,this.dispatchEvent(new js("open")),he("connected",this.transport)):this._close(1006,"Server lost session")};re.prototype._close=function(n,e,t){he("_close",this.transport,n,e,t,this.readyState);var i=!1;if(this._ir&&(i=!0,this._ir.close(),this._ir=null),this._transport&&(this._transport.close(),this._transport=null,this.transport=null),this.readyState===re.CLOSED)throw new Error("InvalidStateError: SockJS has already been closed");this.readyState=re.CLOSING,setTimeout((function(){this.readyState=re.CLOSED,i&&this.dispatchEvent(new js("error"));var r=new xp("close");r.wasClean=t||!1,r.code=n||1e3,r.reason=e,this.dispatchEvent(r),this.onmessage=this.onclose=this.onerror=null,he("disconnected")}).bind(this),0)};re.prototype.countRTO=function(n){return n>100?4*n:300+n};Tu.exports=function(n){return Eu=wp(n),_u()(re,n),re}});var ku=P((V_,Cu)=>{"use strict";var Ip=wc();Cu.exports=wu()(Ip);"_sockjs_onload"in global&&setTimeout(global._sockjs_onload,1)});var tt=globalThis;function De(n){return(tt.__Zone_symbol_prefix||"__zone_symbol__")+n}function qd(){let n=tt.performance;function e(g){n&&n.mark&&n.mark(g)}function t(g,m){n&&n.measure&&n.measure(g,m)}e("Zone");let i=(()=>{class g{static __symbol__=De;static assertZonePatched(){if(tt.Promise!==j.ZoneAwarePromise)throw new Error("Zone.js has detected that ZoneAwarePromise `(window|global).Promise` has been overwritten.\nMost likely cause is that a Promise polyfill has been loaded after Zone.js (Polyfilling Promise api is not necessary when zone.js is loaded. If you must load one, do so before loading zone.js.)")}static get root(){let c=g.current;for(;c.parent;)c=c.parent;return c}static get current(){return O.zone}static get currentTask(){return B}static __load_patch(c,d,k=!1){if(j.hasOwnProperty(c)){let A=tt[De("forceDuplicateZoneCheck")]===!0;if(!k&&A)throw Error("Already loaded patch: "+c)}else if(!tt["__Zone_disable_"+c]){let A="Zone:"+c;e(A),j[c]=d(tt,g,F),t(A,A)}}get parent(){return this._parent}get name(){return this._name}_parent;_name;_properties;_zoneDelegate;constructor(c,d){this._parent=c,this._name=d?d.name||"unnamed":"<root>",this._properties=d&&d.properties||{},this._zoneDelegate=new s(this,this._parent&&this._parent._zoneDelegate,d)}get(c){let d=this.getZoneWith(c);if(d)return d._properties[c]}getZoneWith(c){let d=this;for(;d;){if(d._properties.hasOwnProperty(c))return d;d=d._parent}return null}fork(c){if(!c)throw new Error("ZoneSpec required!");return this._zoneDelegate.fork(this,c)}wrap(c,d){if(typeof c!="function")throw new Error("Expecting function got: "+c);let k=this._zoneDelegate.intercept(this,c,d),A=this;return function(){return A.runGuarded(k,this,arguments,d)}}run(c,d,k,A){O={parent:O,zone:this};try{return this._zoneDelegate.invoke(this,c,d,k,A)}finally{O=O.parent}}runGuarded(c,d=null,k,A){O={parent:O,zone:this};try{try{return this._zoneDelegate.invoke(this,c,d,k,A)}catch(Z){if(this._zoneDelegate.handleError(this,Z))throw Z}}finally{O=O.parent}}runTask(c,d,k){if(c.zone!=this)throw new Error("A task can only be run in the zone of creation! (Creation: "+(c.zone||z).name+"; Execution: "+this.name+")");let A=c,{type:Z,data:{isPeriodic:V=!1,isRefreshable:ne=!1}={}}=c;if(c.state===W&&(Z===te||Z===x))return;let Ie=c.state!=q;Ie&&A._transitionTo(q,T);let je=B;B=A,O={parent:O,zone:this};try{Z==x&&c.data&&!V&&!ne&&(c.cancelFn=void 0);try{return this._zoneDelegate.invokeTask(this,A,d,k)}catch(le){if(this._zoneDelegate.handleError(this,le))throw le}}finally{let le=c.state;if(le!==W&&le!==ee)if(Z==te||V||ne&&le===N)Ie&&A._transitionTo(T,q,N);else{let b=A._zoneDelegates;this._updateTaskCount(A,-1),Ie&&A._transitionTo(W,q,W),ne&&(A._zoneDelegates=b)}O=O.parent,B=je}}scheduleTask(c){if(c.zone&&c.zone!==this){let k=this;for(;k;){if(k===c.zone)throw Error(`can not reschedule task to ${this.name} which is descendants of the original zone ${c.zone.name}`);k=k.parent}}c._transitionTo(N,W);let d=[];c._zoneDelegates=d,c._zone=this;try{c=this._zoneDelegate.scheduleTask(this,c)}catch(k){throw c._transitionTo(ee,N,W),this._zoneDelegate.handleError(this,k),k}return c._zoneDelegates===d&&this._updateTaskCount(c,1),c.state==N&&c._transitionTo(T,N),c}scheduleMicroTask(c,d,k,A){return this.scheduleTask(new o(H,c,d,k,A,void 0))}scheduleMacroTask(c,d,k,A,Z){return this.scheduleTask(new o(x,c,d,k,A,Z))}scheduleEventTask(c,d,k,A,Z){return this.scheduleTask(new o(te,c,d,k,A,Z))}cancelTask(c){if(c.zone!=this)throw new Error("A task can only be cancelled in the zone of creation! (Creation: "+(c.zone||z).name+"; Execution: "+this.name+")");if(!(c.state!==T&&c.state!==q)){c._transitionTo(J,T,q);try{this._zoneDelegate.cancelTask(this,c)}catch(d){throw c._transitionTo(ee,J),this._zoneDelegate.handleError(this,d),d}return this._updateTaskCount(c,-1),c._transitionTo(W,J),c.runCount=-1,c}}_updateTaskCount(c,d){let k=c._zoneDelegates;d==-1&&(c._zoneDelegates=null);for(let A=0;A<k.length;A++)k[A]._updateTaskCount(c.type,d)}}return g})(),r={name:"",onHasTask:(g,m,c,d)=>g.hasTask(c,d),onScheduleTask:(g,m,c,d)=>g.scheduleTask(c,d),onInvokeTask:(g,m,c,d,k,A)=>g.invokeTask(c,d,k,A),onCancelTask:(g,m,c,d)=>g.cancelTask(c,d)};class s{get zone(){return this._zone}_zone;_taskCounts={microTask:0,macroTask:0,eventTask:0};_parentDelegate;_forkDlgt;_forkZS;_forkCurrZone;_interceptDlgt;_interceptZS;_interceptCurrZone;_invokeDlgt;_invokeZS;_invokeCurrZone;_handleErrorDlgt;_handleErrorZS;_handleErrorCurrZone;_scheduleTaskDlgt;_scheduleTaskZS;_scheduleTaskCurrZone;_invokeTaskDlgt;_invokeTaskZS;_invokeTaskCurrZone;_cancelTaskDlgt;_cancelTaskZS;_cancelTaskCurrZone;_hasTaskDlgt;_hasTaskDlgtOwner;_hasTaskZS;_hasTaskCurrZone;constructor(m,c,d){this._zone=m,this._parentDelegate=c,this._forkZS=d&&(d&&d.onFork?d:c._forkZS),this._forkDlgt=d&&(d.onFork?c:c._forkDlgt),this._forkCurrZone=d&&(d.onFork?this._zone:c._forkCurrZone),this._interceptZS=d&&(d.onIntercept?d:c._interceptZS),this._interceptDlgt=d&&(d.onIntercept?c:c._interceptDlgt),this._interceptCurrZone=d&&(d.onIntercept?this._zone:c._interceptCurrZone),this._invokeZS=d&&(d.onInvoke?d:c._invokeZS),this._invokeDlgt=d&&(d.onInvoke?c:c._invokeDlgt),this._invokeCurrZone=d&&(d.onInvoke?this._zone:c._invokeCurrZone),this._handleErrorZS=d&&(d.onHandleError?d:c._handleErrorZS),this._handleErrorDlgt=d&&(d.onHandleError?c:c._handleErrorDlgt),this._handleErrorCurrZone=d&&(d.onHandleError?this._zone:c._handleErrorCurrZone),this._scheduleTaskZS=d&&(d.onScheduleTask?d:c._scheduleTaskZS),this._scheduleTaskDlgt=d&&(d.onScheduleTask?c:c._scheduleTaskDlgt),this._scheduleTaskCurrZone=d&&(d.onScheduleTask?this._zone:c._scheduleTaskCurrZone),this._invokeTaskZS=d&&(d.onInvokeTask?d:c._invokeTaskZS),this._invokeTaskDlgt=d&&(d.onInvokeTask?c:c._invokeTaskDlgt),this._invokeTaskCurrZone=d&&(d.onInvokeTask?this._zone:c._invokeTaskCurrZone),this._cancelTaskZS=d&&(d.onCancelTask?d:c._cancelTaskZS),this._cancelTaskDlgt=d&&(d.onCancelTask?c:c._cancelTaskDlgt),this._cancelTaskCurrZone=d&&(d.onCancelTask?this._zone:c._cancelTaskCurrZone),this._hasTaskZS=null,this._hasTaskDlgt=null,this._hasTaskDlgtOwner=null,this._hasTaskCurrZone=null;let k=d&&d.onHasTask,A=c&&c._hasTaskZS;(k||A)&&(this._hasTaskZS=k?d:r,this._hasTaskDlgt=c,this._hasTaskDlgtOwner=this,this._hasTaskCurrZone=this._zone,d.onScheduleTask||(this._scheduleTaskZS=r,this._scheduleTaskDlgt=c,this._scheduleTaskCurrZone=this._zone),d.onInvokeTask||(this._invokeTaskZS=r,this._invokeTaskDlgt=c,this._invokeTaskCurrZone=this._zone),d.onCancelTask||(this._cancelTaskZS=r,this._cancelTaskDlgt=c,this._cancelTaskCurrZone=this._zone))}fork(m,c){return this._forkZS?this._forkZS.onFork(this._forkDlgt,this.zone,m,c):new i(m,c)}intercept(m,c,d){return this._interceptZS?this._interceptZS.onIntercept(this._interceptDlgt,this._interceptCurrZone,m,c,d):c}invoke(m,c,d,k,A){return this._invokeZS?this._invokeZS.onInvoke(this._invokeDlgt,this._invokeCurrZone,m,c,d,k,A):c.apply(d,k)}handleError(m,c){return this._handleErrorZS?this._handleErrorZS.onHandleError(this._handleErrorDlgt,this._handleErrorCurrZone,m,c):!0}scheduleTask(m,c){let d=c;if(this._scheduleTaskZS)this._hasTaskZS&&d._zoneDelegates.push(this._hasTaskDlgtOwner),d=this._scheduleTaskZS.onScheduleTask(this._scheduleTaskDlgt,this._scheduleTaskCurrZone,m,c),d||(d=c);else if(c.scheduleFn)c.scheduleFn(c);else if(c.type==H)w(c);else throw new Error("Task is missing scheduleFn.");return d}invokeTask(m,c,d,k){return this._invokeTaskZS?this._invokeTaskZS.onInvokeTask(this._invokeTaskDlgt,this._invokeTaskCurrZone,m,c,d,k):c.callback.apply(d,k)}cancelTask(m,c){let d;if(this._cancelTaskZS)d=this._cancelTaskZS.onCancelTask(this._cancelTaskDlgt,this._cancelTaskCurrZone,m,c);else{if(!c.cancelFn)throw Error("Task is not cancelable");d=c.cancelFn(c)}return d}hasTask(m,c){try{this._hasTaskZS&&this._hasTaskZS.onHasTask(this._hasTaskDlgt,this._hasTaskCurrZone,m,c)}catch(d){this.handleError(m,d)}}_updateTaskCount(m,c){let d=this._taskCounts,k=d[m],A=d[m]=k+c;if(A<0)throw new Error("More tasks executed then were scheduled.");if(k==0||A==0){let Z={microTask:d.microTask>0,macroTask:d.macroTask>0,eventTask:d.eventTask>0,change:m};this.hasTask(this._zone,Z)}}}class o{type;source;invoke;callback;data;scheduleFn;cancelFn;_zone=null;runCount=0;_zoneDelegates=null;_state="notScheduled";constructor(m,c,d,k,A,Z){if(this.type=m,this.source=c,this.data=k,this.scheduleFn=A,this.cancelFn=Z,!d)throw new Error("callback is not defined");this.callback=d;let V=this;m===te&&k&&k.useG?this.invoke=o.invokeTask:this.invoke=function(){return o.invokeTask.call(tt,V,this,arguments)}}static invokeTask(m,c,d){m||(m=this),me++;try{return m.runCount++,m.zone.runTask(m,c,d)}finally{me==1&&R(),me--}}get zone(){return this._zone}get state(){return this._state}cancelScheduleRequest(){this._transitionTo(W,N)}_transitionTo(m,c,d){if(this._state===c||this._state===d)this._state=m,m==W&&(this._zoneDelegates=null);else throw new Error(`${this.type} '${this.source}': can not transition to '${m}', expecting state '${c}'${d?" or '"+d+"'":""}, was '${this._state}'.`)}toString(){return this.data&&typeof this.data.handleId<"u"?this.data.handleId.toString():Object.prototype.toString.call(this)}toJSON(){return{type:this.type,state:this.state,source:this.source,zone:this.zone.name,runCount:this.runCount}}}let a=De("setTimeout"),l=De("Promise"),u=De("then"),f=[],h=!1,y;function C(g){if(y||tt[l]&&(y=tt[l].resolve(0)),y){let m=y[u];m||(m=y.then),m.call(y,g)}else tt[a](g,0)}function w(g){me===0&&f.length===0&&C(R),g&&f.push(g)}function R(){if(!h){for(h=!0;f.length;){let g=f;f=[];for(let m=0;m<g.length;m++){let c=g[m];try{c.zone.runTask(c,null,null)}catch(d){F.onUnhandledError(d)}}}F.microtaskDrainDone(),h=!1}}let z={name:"NO ZONE"},W="notScheduled",N="scheduling",T="scheduled",q="running",J="canceling",ee="unknown",H="microTask",x="macroTask",te="eventTask",j={},F={symbol:De,currentZoneFrame:()=>O,onUnhandledError:de,microtaskDrainDone:de,scheduleMicroTask:w,showUncaughtError:()=>!i[De("ignoreConsoleErrorUncaughtError")],patchEventTarget:()=>[],patchOnProperties:de,patchMethod:()=>de,bindArguments:()=>[],patchThen:()=>de,patchMacroTask:()=>de,patchEventPrototype:()=>de,isIEOrEdge:()=>!1,getGlobalObjects:()=>{},ObjectDefineProperty:()=>de,ObjectGetOwnPropertyDescriptor:()=>{},ObjectCreate:()=>{},ArraySlice:()=>[],patchClass:()=>de,wrapWithCurrentZone:()=>de,filterProperties:()=>[],attachOriginToPatched:()=>de,_redefineProperty:()=>de,patchCallbacks:()=>de,nativeScheduleMicroTask:C},O={parent:null,zone:new i(null,null)},B=null,me=0;function de(){}return t("Zone","Zone"),i}function Fd(){let n=globalThis,e=n[De("forceDuplicateZoneCheck")]===!0;if(n.Zone&&(e||typeof n.Zone.__symbol__!="function"))throw new Error("Zone already loaded.");return n.Zone??=qd(),n.Zone}var On=Object.getOwnPropertyDescriptor,Vr=Object.defineProperty,Hr=Object.getPrototypeOf,jd=Object.create,Bd=Array.prototype.slice,zr="addEventListener",Wr="removeEventListener",Fr=De(zr),jr=De(Wr),ut="true",dt="false",An=De("");function $r(n,e){return Zone.current.wrap(n,e)}function Gr(n,e,t,i,r){return Zone.current.scheduleMacroTask(n,e,t,i,r)}var oe=De,vi=typeof window<"u",Pn=vi?window:void 0,fe=vi&&Pn||globalThis,Ud="removeAttribute";function Kr(n,e){for(let t=n.length-1;t>=0;t--)typeof n[t]=="function"&&(n[t]=$r(n[t],e+"_"+t));return n}function Vd(n,e){let t=n.constructor.name;for(let i=0;i<e.length;i++){let r=e[i],s=n[r];if(s){let o=On(n,r);if(!xa(o))continue;n[r]=(a=>{let l=function(){return a.apply(this,Kr(arguments,t+"."+r))};return ft(l,a),l})(s)}}}function xa(n){return n?n.writable===!1?!1:!(typeof n.get=="function"&&typeof n.set>"u"):!0}var Ra=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,Ei=!("nw"in fe)&&typeof fe.process<"u"&&fe.process.toString()==="[object process]",Zr=!Ei&&!Ra&&!!(vi&&Pn.HTMLElement),Ia=typeof fe.process<"u"&&fe.process.toString()==="[object process]"&&!Ra&&!!(vi&&Pn.HTMLElement),bi={},Hd=oe("enable_beforeunload"),Sa=function(n){if(n=n||fe.event,!n)return;let e=bi[n.type];e||(e=bi[n.type]=oe("ON_PROPERTY"+n.type));let t=this||n.target||fe,i=t[e],r;if(Zr&&t===Pn&&n.type==="error"){let s=n;r=i&&i.call(this,s.message,s.filename,s.lineno,s.colno,s.error),r===!0&&n.preventDefault()}else r=i&&i.apply(this,arguments),n.type==="beforeunload"&&fe[Hd]&&typeof r=="string"?n.returnValue=r:r!=null&&!r&&n.preventDefault();return r};function Ta(n,e,t){let i=On(n,e);if(!i&&t&&On(t,e)&&(i={enumerable:!0,configurable:!0}),!i||!i.configurable)return;let r=oe("on"+e+"patched");if(n.hasOwnProperty(r)&&n[r])return;delete i.writable,delete i.value;let s=i.get,o=i.set,a=e.slice(2),l=bi[a];l||(l=bi[a]=oe("ON_PROPERTY"+a)),i.set=function(u){let f=this;if(!f&&n===fe&&(f=fe),!f)return;typeof f[l]=="function"&&f.removeEventListener(a,Sa),o?.call(f,null),f[l]=u,typeof u=="function"&&f.addEventListener(a,Sa,!1)},i.get=function(){let u=this;if(!u&&n===fe&&(u=fe),!u)return null;let f=u[l];if(f)return f;if(s){let h=s.call(this);if(h)return i.set.call(this,h),typeof u[Ud]=="function"&&u.removeAttribute(e),h}return null},Vr(n,e,i),n[r]=!0}function Oa(n,e,t){if(e)for(let i=0;i<e.length;i++)Ta(n,"on"+e[i],t);else{let i=[];for(let r in n)r.slice(0,2)=="on"&&i.push(r);for(let r=0;r<i.length;r++)Ta(n,i[r],t)}}var ze=oe("originalInstance");function In(n){let e=fe[n];if(!e)return;fe[oe(n)]=e,fe[n]=function(){let r=Kr(arguments,n);switch(r.length){case 0:this[ze]=new e;break;case 1:this[ze]=new e(r[0]);break;case 2:this[ze]=new e(r[0],r[1]);break;case 3:this[ze]=new e(r[0],r[1],r[2]);break;case 4:this[ze]=new e(r[0],r[1],r[2],r[3]);break;default:throw new Error("Arg list too long.")}},ft(fe[n],e);let t=new e(function(){}),i;for(i in t)n==="XMLHttpRequest"&&i==="responseBlob"||(function(r){typeof t[r]=="function"?fe[n].prototype[r]=function(){return this[ze][r].apply(this[ze],arguments)}:Vr(fe[n].prototype,r,{set:function(s){typeof s=="function"?(this[ze][r]=$r(s,n+"."+r),ft(this[ze][r],s)):this[ze][r]=s},get:function(){return this[ze][r]}})})(i);for(i in e)i!=="prototype"&&e.hasOwnProperty(i)&&(fe[n][i]=e[i])}function ht(n,e,t){let i=n;for(;i&&!i.hasOwnProperty(e);)i=Hr(i);!i&&n[e]&&(i=n);let r=oe(e),s=null;if(i&&(!(s=i[r])||!i.hasOwnProperty(r))){s=i[r]=i[e];let o=i&&On(i,e);if(xa(o)){let a=t(s,r,e);i[e]=function(){return a(this,arguments)},ft(i[e],s)}}return s}function zd(n,e,t){let i=null;function r(s){let o=s.data;return o.args[o.cbIdx]=function(){s.invoke.apply(this,arguments)},i.apply(o.target,o.args),s}i=ht(n,e,s=>function(o,a){let l=t(o,a);return l.cbIdx>=0&&typeof a[l.cbIdx]=="function"?Gr(l.name,a[l.cbIdx],l,r):s.apply(o,a)})}function ft(n,e){n[oe("OriginalDelegate")]=e}var wa=!1,Br=!1;function Wd(){if(wa)return Br;wa=!0;try{let n=Pn.navigator.userAgent;(n.indexOf("MSIE ")!==-1||n.indexOf("Trident/")!==-1||n.indexOf("Edge/")!==-1)&&(Br=!0)}catch{}return Br}function Ca(n){return typeof n=="function"}function ka(n){return typeof n=="number"}var $d={useG:!0},Me={},Aa={},Pa=new RegExp("^"+An+"(\\w+)(true|false)$"),Da=oe("propagationStopped");function Ma(n,e){let t=(e?e(n):n)+dt,i=(e?e(n):n)+ut,r=An+t,s=An+i;Me[n]={},Me[n][dt]=r,Me[n][ut]=s}function Gd(n,e,t,i){let r=i&&i.add||zr,s=i&&i.rm||Wr,o=i&&i.listeners||"eventListeners",a=i&&i.rmAll||"removeAllListeners",l=oe(r),u="."+r+":",f="prependListener",h="."+f+":",y=function(N,T,q){if(N.isRemoved)return;let J=N.callback;typeof J=="object"&&J.handleEvent&&(N.callback=x=>J.handleEvent(x),N.originalDelegate=J);let ee;try{N.invoke(N,T,[q])}catch(x){ee=x}let H=N.options;if(H&&typeof H=="object"&&H.once){let x=N.originalDelegate?N.originalDelegate:N.callback;T[s].call(T,q.type,x,H)}return ee};function C(N,T,q){if(T=T||n.event,!T)return;let J=N||T.target||n,ee=J[Me[T.type][q?ut:dt]];if(ee){let H=[];if(ee.length===1){let x=y(ee[0],J,T);x&&H.push(x)}else{let x=ee.slice();for(let te=0;te<x.length&&!(T&&T[Da]===!0);te++){let j=y(x[te],J,T);j&&H.push(j)}}if(H.length===1)throw H[0];for(let x=0;x<H.length;x++){let te=H[x];e.nativeScheduleMicroTask(()=>{throw te})}}}let w=function(N){return C(this,N,!1)},R=function(N){return C(this,N,!0)};function z(N,T){if(!N)return!1;let q=!0;T&&T.useG!==void 0&&(q=T.useG);let J=T&&T.vh,ee=!0;T&&T.chkDup!==void 0&&(ee=T.chkDup);let H=!1;T&&T.rt!==void 0&&(H=T.rt);let x=N;for(;x&&!x.hasOwnProperty(r);)x=Hr(x);if(!x&&N[r]&&(x=N),!x||x[l])return!1;let te=T&&T.eventNameToString,j={},F=x[l]=x[r],O=x[oe(s)]=x[s],B=x[oe(o)]=x[o],me=x[oe(a)]=x[a],de;T&&T.prepend&&(de=x[oe(T.prepend)]=x[T.prepend]);function g(p,v){return v?typeof p=="boolean"?{capture:p,passive:!0}:p?typeof p=="object"&&p.passive!==!1?Dt(Oe({},p),{passive:!0}):p:{passive:!0}:p}let m=function(p){if(!j.isExisting)return F.call(j.target,j.eventName,j.capture?R:w,j.options)},c=function(p){if(!p.isRemoved){let v=Me[p.eventName],L;v&&(L=v[p.capture?ut:dt]);let U=L&&p.target[L];if(U){for(let M=0;M<U.length;M++)if(U[M]===p){U.splice(M,1),p.isRemoved=!0,p.removeAbortListener&&(p.removeAbortListener(),p.removeAbortListener=null),U.length===0&&(p.allRemoved=!0,p.target[L]=null);break}}}if(p.allRemoved)return O.call(p.target,p.eventName,p.capture?R:w,p.options)},d=function(p){return F.call(j.target,j.eventName,p.invoke,j.options)},k=function(p){return de.call(j.target,j.eventName,p.invoke,j.options)},A=function(p){return O.call(p.target,p.eventName,p.invoke,p.options)},Z=q?m:d,V=q?c:A,ne=function(p,v){let L=typeof v;return L==="function"&&p.callback===v||L==="object"&&p.originalDelegate===v},Ie=T?.diff||ne,je=Zone[oe("UNPATCHED_EVENTS")],le=n[oe("PASSIVE_EVENTS")];function b(p){if(typeof p=="object"&&p!==null){let v=Oe({},p);return p.signal&&(v.signal=p.signal),v}return p}let _=function(p,v,L,U,M=!1,$=!1){return function(){let G=this||n,K=arguments[0];T&&T.transferEventName&&(K=T.transferEventName(K));let ce=arguments[1];if(!ce)return p.apply(this,arguments);if(Ei&&K==="uncaughtException")return p.apply(this,arguments);let ue=!1;if(typeof ce!="function"){if(!ce.handleEvent)return p.apply(this,arguments);ue=!0}if(J&&!J(p,ce,G,arguments))return;let wt=!!le&&le.indexOf(K)!==-1,Qe=b(g(arguments[2],wt)),Jt=Qe?.signal;if(Jt?.aborted)return;if(je){for(let Xe=0;Xe<je.length;Xe++)if(K===je[Xe])return wt?p.call(G,K,ce,Qe):p.apply(this,arguments)}let Cr=Qe?typeof Qe=="boolean"?!0:Qe.capture:!1,go=Qe&&typeof Qe=="object"?Qe.once:!1,Md=Zone.current,kr=Me[K];kr||(Ma(K,te),kr=Me[K]);let _o=kr[Cr?ut:dt],Yt=G[_o],yo=!1;if(Yt){if(yo=!0,ee){for(let Xe=0;Xe<Yt.length;Xe++)if(Ie(Yt[Xe],ce))return}}else Yt=G[_o]=[];let oi,bo=G.constructor.name,vo=Aa[bo];vo&&(oi=vo[K]),oi||(oi=bo+v+(te?te(K):K)),j.options=Qe,go&&(j.options.once=!1),j.target=G,j.capture=Cr,j.eventName=K,j.isExisting=yo;let Tn=q?$d:void 0;Tn&&(Tn.taskData=j),Jt&&(j.options.signal=void 0);let Be=Md.scheduleEventTask(oi,ce,Tn,L,U);if(Jt){j.options.signal=Jt;let Xe=()=>Be.zone.cancelTask(Be);p.call(Jt,"abort",Xe,{once:!0}),Be.removeAbortListener=()=>Jt.removeEventListener("abort",Xe)}if(j.target=null,Tn&&(Tn.taskData=null),go&&(j.options.once=!0),typeof Be.options!="boolean"&&(Be.options=Qe),Be.target=G,Be.capture=Cr,Be.eventName=K,ue&&(Be.originalDelegate=ce),$?Yt.unshift(Be):Yt.push(Be),M)return G}};return x[r]=_(F,u,Z,V,H),de&&(x[f]=_(de,h,k,V,H,!0)),x[s]=function(){let p=this||n,v=arguments[0];T&&T.transferEventName&&(v=T.transferEventName(v));let L=arguments[2],U=L?typeof L=="boolean"?!0:L.capture:!1,M=arguments[1];if(!M)return O.apply(this,arguments);if(J&&!J(O,M,p,arguments))return;let $=Me[v],G;$&&(G=$[U?ut:dt]);let K=G&&p[G];if(K)for(let ce=0;ce<K.length;ce++){let ue=K[ce];if(Ie(ue,M)){if(K.splice(ce,1),ue.isRemoved=!0,K.length===0&&(ue.allRemoved=!0,p[G]=null,!U&&typeof v=="string")){let wt=An+"ON_PROPERTY"+v;p[wt]=null}return ue.zone.cancelTask(ue),H?p:void 0}}return O.apply(this,arguments)},x[o]=function(){let p=this||n,v=arguments[0];T&&T.transferEventName&&(v=T.transferEventName(v));let L=[],U=La(p,te?te(v):v);for(let M=0;M<U.length;M++){let $=U[M],G=$.originalDelegate?$.originalDelegate:$.callback;L.push(G)}return L},x[a]=function(){let p=this||n,v=arguments[0];if(v){T&&T.transferEventName&&(v=T.transferEventName(v));let L=Me[v];if(L){let U=L[dt],M=L[ut],$=p[U],G=p[M];if($){let K=$.slice();for(let ce=0;ce<K.length;ce++){let ue=K[ce],wt=ue.originalDelegate?ue.originalDelegate:ue.callback;this[s].call(this,v,wt,ue.options)}}if(G){let K=G.slice();for(let ce=0;ce<K.length;ce++){let ue=K[ce],wt=ue.originalDelegate?ue.originalDelegate:ue.callback;this[s].call(this,v,wt,ue.options)}}}}else{let L=Object.keys(p);for(let U=0;U<L.length;U++){let M=L[U],$=Pa.exec(M),G=$&&$[1];G&&G!=="removeListener"&&this[a].call(this,G)}this[a].call(this,"removeListener")}if(H)return this},ft(x[r],F),ft(x[s],O),me&&ft(x[a],me),B&&ft(x[o],B),!0}let W=[];for(let N=0;N<t.length;N++)W[N]=z(t[N],i);return W}function La(n,e){if(!e){let s=[];for(let o in n){let a=Pa.exec(o),l=a&&a[1];if(l&&(!e||l===e)){let u=n[o];if(u)for(let f=0;f<u.length;f++)s.push(u[f])}}return s}let t=Me[e];t||(Ma(e),t=Me[e]);let i=n[t[dt]],r=n[t[ut]];return i?r?i.concat(r):i.slice():r?r.slice():[]}function Kd(n,e){let t=n.Event;t&&t.prototype&&e.patchMethod(t.prototype,"stopImmediatePropagation",i=>function(r,s){r[Da]=!0,i&&i.apply(r,s)})}function Zd(n,e){e.patchMethod(n,"queueMicrotask",t=>function(i,r){Zone.current.scheduleMicroTask("queueMicrotask",r[0])})}var yi=oe("zoneTask");function cn(n,e,t,i){let r=null,s=null;e+=i,t+=i;let o={};function a(u){let f=u.data;f.args[0]=function(){return u.invoke.apply(this,arguments)};let h=r.apply(n,f.args);return ka(h)?f.handleId=h:(f.handle=h,f.isRefreshable=Ca(h.refresh)),u}function l(u){let{handle:f,handleId:h}=u.data;return s.call(n,f??h)}r=ht(n,e,u=>function(f,h){if(Ca(h[0])){let y={isRefreshable:!1,isPeriodic:i==="Interval",delay:i==="Timeout"||i==="Interval"?h[1]||0:void 0,args:h},C=h[0];h[0]=function(){try{return C.apply(this,arguments)}finally{let{handle:q,handleId:J,isPeriodic:ee,isRefreshable:H}=y;!ee&&!H&&(J?delete o[J]:q&&(q[yi]=null))}};let w=Gr(e,h[0],y,a,l);if(!w)return w;let{handleId:R,handle:z,isRefreshable:W,isPeriodic:N}=w.data;if(R)o[R]=w;else if(z&&(z[yi]=w,W&&!N)){let T=z.refresh;z.refresh=function(){let{zone:q,state:J}=w;return J==="notScheduled"?(w._state="scheduled",q._updateTaskCount(w,1)):J==="running"&&(w._state="scheduling"),T.call(this)}}return z??R??w}else return u.apply(n,h)}),s=ht(n,t,u=>function(f,h){let y=h[0],C;ka(y)?(C=o[y],delete o[y]):(C=y?.[yi],C?y[yi]=null:C=y),C?.type?C.cancelFn&&C.zone.cancelTask(C):u.apply(n,h)})}function Qd(n,e){let{isBrowser:t,isMix:i}=e.getGlobalObjects();if(!t&&!i||!n.customElements||!("customElements"in n))return;let r=["connectedCallback","disconnectedCallback","adoptedCallback","attributeChangedCallback","formAssociatedCallback","formDisabledCallback","formResetCallback","formStateRestoreCallback"];e.patchCallbacks(e,n.customElements,"customElements","define",r)}function Xd(n,e){if(Zone[e.symbol("patchEventTarget")])return;let{eventNames:t,zoneSymbolEventNames:i,TRUE_STR:r,FALSE_STR:s,ZONE_SYMBOL_PREFIX:o}=e.getGlobalObjects();for(let l=0;l<t.length;l++){let u=t[l],f=u+s,h=u+r,y=o+f,C=o+h;i[u]={},i[u][s]=y,i[u][r]=C}let a=n.EventTarget;if(!(!a||!a.prototype))return e.patchEventTarget(n,e,[a&&a.prototype]),!0}function Jd(n,e){e.patchEventPrototype(n,e)}function qa(n,e,t){if(!t||t.length===0)return e;let i=t.filter(s=>s.target===n);if(i.length===0)return e;let r=i[0].ignoreProperties;return e.filter(s=>r.indexOf(s)===-1)}function Na(n,e,t,i){if(!n)return;let r=qa(n,e,t);Oa(n,r,i)}function Ur(n){return Object.getOwnPropertyNames(n).filter(e=>e.startsWith("on")&&e.length>2).map(e=>e.substring(2))}function Yd(n,e){if(Ei&&!Ia||Zone[n.symbol("patchEvents")])return;let t=e.__Zone_ignore_on_properties,i=[];if(Zr){let r=window;i=i.concat(["Document","SVGElement","Element","HTMLElement","HTMLBodyElement","HTMLMediaElement","HTMLFrameSetElement","HTMLFrameElement","HTMLIFrameElement","HTMLMarqueeElement","Worker"]);let s=[];Na(r,Ur(r),t&&t.concat(s),Hr(r))}i=i.concat(["XMLHttpRequest","XMLHttpRequestEventTarget","IDBIndex","IDBRequest","IDBOpenDBRequest","IDBDatabase","IDBTransaction","IDBCursor","WebSocket"]);for(let r=0;r<i.length;r++){let s=e[i[r]];s?.prototype&&Na(s.prototype,Ur(s.prototype),t)}}function eh(n){n.__load_patch("legacy",e=>{let t=e[n.__symbol__("legacyPatch")];t&&t()}),n.__load_patch("timers",e=>{let i="clear";cn(e,"set",i,"Timeout"),cn(e,"set",i,"Interval"),cn(e,"set",i,"Immediate")}),n.__load_patch("requestAnimationFrame",e=>{cn(e,"request","cancel","AnimationFrame"),cn(e,"mozRequest","mozCancel","AnimationFrame"),cn(e,"webkitRequest","webkitCancel","AnimationFrame")}),n.__load_patch("blocking",(e,t)=>{let i=["alert","prompt","confirm"];for(let r=0;r<i.length;r++){let s=i[r];ht(e,s,(o,a,l)=>function(u,f){return t.current.run(o,e,f,l)})}}),n.__load_patch("EventTarget",(e,t,i)=>{Jd(e,i),Xd(e,i);let r=e.XMLHttpRequestEventTarget;r&&r.prototype&&i.patchEventTarget(e,i,[r.prototype])}),n.__load_patch("MutationObserver",(e,t,i)=>{In("MutationObserver"),In("WebKitMutationObserver")}),n.__load_patch("IntersectionObserver",(e,t,i)=>{In("IntersectionObserver")}),n.__load_patch("FileReader",(e,t,i)=>{In("FileReader")}),n.__load_patch("on_property",(e,t,i)=>{Yd(i,e)}),n.__load_patch("customElements",(e,t,i)=>{Qd(e,i)}),n.__load_patch("XHR",(e,t)=>{u(e);let i=oe("xhrTask"),r=oe("xhrSync"),s=oe("xhrListener"),o=oe("xhrScheduled"),a=oe("xhrURL"),l=oe("xhrErrorBeforeScheduled");function u(f){let h=f.XMLHttpRequest;if(!h)return;let y=h.prototype;function C(F){return F[i]}let w=y[Fr],R=y[jr];if(!w){let F=f.XMLHttpRequestEventTarget;if(F){let O=F.prototype;w=O[Fr],R=O[jr]}}let z="readystatechange",W="scheduled";function N(F){let O=F.data,B=O.target;B[o]=!1,B[l]=!1;let me=B[s];w||(w=B[Fr],R=B[jr]),me&&R.call(B,z,me);let de=B[s]=()=>{if(B.readyState===B.DONE)if(!O.aborted&&B[o]&&F.state===W){let m=B[t.__symbol__("loadfalse")];if(B.status!==0&&m&&m.length>0){let c=F.invoke;F.invoke=function(){let d=B[t.__symbol__("loadfalse")];for(let k=0;k<d.length;k++)d[k]===F&&d.splice(k,1);!O.aborted&&F.state===W&&c.call(F)},m.push(F)}else F.invoke()}else!O.aborted&&B[o]===!1&&(B[l]=!0)};return w.call(B,z,de),B[i]||(B[i]=F),te.apply(B,O.args),B[o]=!0,F}function T(){}function q(F){let O=F.data;return O.aborted=!0,j.apply(O.target,O.args)}let J=ht(y,"open",()=>function(F,O){return F[r]=O[2]==!1,F[a]=O[1],J.apply(F,O)}),ee="XMLHttpRequest.send",H=oe("fetchTaskAborting"),x=oe("fetchTaskScheduling"),te=ht(y,"send",()=>function(F,O){if(t.current[x]===!0||F[r])return te.apply(F,O);{let B={target:F,url:F[a],isPeriodic:!1,args:O,aborted:!1},me=Gr(ee,T,B,N,q);F&&F[l]===!0&&!B.aborted&&me.state===W&&me.invoke()}}),j=ht(y,"abort",()=>function(F,O){let B=C(F);if(B&&typeof B.type=="string"){if(B.cancelFn==null||B.data&&B.data.aborted)return;B.zone.cancelTask(B)}else if(t.current[H]===!0)return j.apply(F,O)})}}),n.__load_patch("geolocation",e=>{e.navigator&&e.navigator.geolocation&&Vd(e.navigator.geolocation,["getCurrentPosition","watchPosition"])}),n.__load_patch("PromiseRejectionEvent",(e,t)=>{function i(r){return function(s){La(e,r).forEach(a=>{let l=e.PromiseRejectionEvent;if(l){let u=new l(r,{promise:s.promise,reason:s.rejection});a.invoke(u)}})}}e.PromiseRejectionEvent&&(t[oe("unhandledPromiseRejectionHandler")]=i("unhandledrejection"),t[oe("rejectionHandledHandler")]=i("rejectionhandled"))}),n.__load_patch("queueMicrotask",(e,t,i)=>{Zd(e,i)})}function th(n){n.__load_patch("ZoneAwarePromise",(e,t,i)=>{let r=Object.getOwnPropertyDescriptor,s=Object.defineProperty;function o(b){if(b&&b.toString===Object.prototype.toString){let _=b.constructor&&b.constructor.name;return(_||"")+": "+JSON.stringify(b)}return b?b.toString():Object.prototype.toString.call(b)}let a=i.symbol,l=[],u=e[a("DISABLE_WRAPPING_UNCAUGHT_PROMISE_REJECTION")]!==!1,f=a("Promise"),h=a("then"),y="__creationTrace__";i.onUnhandledError=b=>{if(i.showUncaughtError()){let _=b&&b.rejection;_?console.error("Unhandled Promise rejection:",_ instanceof Error?_.message:_,"; Zone:",b.zone.name,"; Task:",b.task&&b.task.source,"; Value:",_,_ instanceof Error?_.stack:void 0):console.error(b)}},i.microtaskDrainDone=()=>{for(;l.length;){let b=l.shift();try{b.zone.runGuarded(()=>{throw b.throwOriginal?b.rejection:b})}catch(_){w(_)}}};let C=a("unhandledPromiseRejectionHandler");function w(b){i.onUnhandledError(b);try{let _=t[C];typeof _=="function"&&_.call(this,b)}catch{}}function R(b){return b&&typeof b.then=="function"}function z(b){return b}function W(b){return V.reject(b)}let N=a("state"),T=a("value"),q=a("finally"),J=a("parentPromiseValue"),ee=a("parentPromiseState"),H="Promise.then",x=null,te=!0,j=!1,F=0;function O(b,_){return p=>{try{g(b,_,p)}catch(v){g(b,!1,v)}}}let B=function(){let b=!1;return function(p){return function(){b||(b=!0,p.apply(null,arguments))}}},me="Promise resolved with itself",de=a("currentTaskTrace");function g(b,_,p){let v=B();if(b===p)throw new TypeError(me);if(b[N]===x){let L=null;try{(typeof p=="object"||typeof p=="function")&&(L=p&&p.then)}catch(U){return v(()=>{g(b,!1,U)})(),b}if(_!==j&&p instanceof V&&p.hasOwnProperty(N)&&p.hasOwnProperty(T)&&p[N]!==x)c(p),g(b,p[N],p[T]);else if(_!==j&&typeof L=="function")try{L.call(p,v(O(b,_)),v(O(b,!1)))}catch(U){v(()=>{g(b,!1,U)})()}else{b[N]=_;let U=b[T];if(b[T]=p,b[q]===q&&_===te&&(b[N]=b[ee],b[T]=b[J]),_===j&&p instanceof Error){let M=t.currentTask&&t.currentTask.data&&t.currentTask.data[y];M&&s(p,de,{configurable:!0,enumerable:!1,writable:!0,value:M})}for(let M=0;M<U.length;)d(b,U[M++],U[M++],U[M++],U[M++]);if(U.length==0&&_==j){b[N]=F;let M=p;try{throw new Error("Uncaught (in promise): "+o(p)+(p&&p.stack?`
`+p.stack:""))}catch($){M=$}u&&(M.throwOriginal=!0),M.rejection=p,M.promise=b,M.zone=t.current,M.task=t.currentTask,l.push(M),i.scheduleMicroTask()}}}return b}let m=a("rejectionHandledHandler");function c(b){if(b[N]===F){try{let _=t[m];_&&typeof _=="function"&&_.call(this,{rejection:b[T],promise:b})}catch{}b[N]=j;for(let _=0;_<l.length;_++)b===l[_].promise&&l.splice(_,1)}}function d(b,_,p,v,L){c(b);let U=b[N],M=U?typeof v=="function"?v:z:typeof L=="function"?L:W;_.scheduleMicroTask(H,()=>{try{let $=b[T],G=!!p&&q===p[q];G&&(p[J]=$,p[ee]=U);let K=_.run(M,void 0,G&&M!==W&&M!==z?[]:[$]);g(p,!0,K)}catch($){g(p,!1,$)}},p)}let k="function ZoneAwarePromise() { [native code] }",A=function(){},Z=e.AggregateError;class V{static toString(){return k}static resolve(_){return _ instanceof V?_:g(new this(null),te,_)}static reject(_){return g(new this(null),j,_)}static withResolvers(){let _={};return _.promise=new V((p,v)=>{_.resolve=p,_.reject=v}),_}static any(_){if(!_||typeof _[Symbol.iterator]!="function")return Promise.reject(new Z([],"All promises were rejected"));let p=[],v=0;try{for(let M of _)v++,p.push(V.resolve(M))}catch{return Promise.reject(new Z([],"All promises were rejected"))}if(v===0)return Promise.reject(new Z([],"All promises were rejected"));let L=!1,U=[];return new V((M,$)=>{for(let G=0;G<p.length;G++)p[G].then(K=>{L||(L=!0,M(K))},K=>{U.push(K),v--,v===0&&(L=!0,$(new Z(U,"All promises were rejected")))})})}static race(_){let p,v,L=new this(($,G)=>{p=$,v=G});function U($){p($)}function M($){v($)}for(let $ of _)R($)||($=this.resolve($)),$.then(U,M);return L}static all(_){return V.allWithCallback(_)}static allSettled(_){return(this&&this.prototype instanceof V?this:V).allWithCallback(_,{thenCallback:v=>({status:"fulfilled",value:v}),errorCallback:v=>({status:"rejected",reason:v})})}static allWithCallback(_,p){let v,L,U=new this((K,ce)=>{v=K,L=ce}),M=2,$=0,G=[];for(let K of _){R(K)||(K=this.resolve(K));let ce=$;try{K.then(ue=>{G[ce]=p?p.thenCallback(ue):ue,M--,M===0&&v(G)},ue=>{p?(G[ce]=p.errorCallback(ue),M--,M===0&&v(G)):L(ue)})}catch(ue){L(ue)}M++,$++}return M-=2,M===0&&v(G),U}constructor(_){let p=this;if(!(p instanceof V))throw new Error("Must be an instanceof Promise.");p[N]=x,p[T]=[];try{let v=B();_&&_(v(O(p,te)),v(O(p,j)))}catch(v){g(p,!1,v)}}get[Symbol.toStringTag](){return"Promise"}get[Symbol.species](){return V}then(_,p){let v=this.constructor?.[Symbol.species];(!v||typeof v!="function")&&(v=this.constructor||V);let L=new v(A),U=t.current;return this[N]==x?this[T].push(U,L,_,p):d(this,U,L,_,p),L}catch(_){return this.then(null,_)}finally(_){let p=this.constructor?.[Symbol.species];(!p||typeof p!="function")&&(p=V);let v=new p(A);v[q]=q;let L=t.current;return this[N]==x?this[T].push(L,v,_,_):d(this,L,v,_,_),v}}V.resolve=V.resolve,V.reject=V.reject,V.race=V.race,V.all=V.all;let ne=e[f]=e.Promise;e.Promise=V;let Ie=a("thenPatched");function je(b){let _=b.prototype,p=r(_,"then");if(p&&(p.writable===!1||!p.configurable))return;let v=_.then;_[h]=v,b.prototype.then=function(L,U){return new V(($,G)=>{v.call(this,$,G)}).then(L,U)},b[Ie]=!0}i.patchThen=je;function le(b){return function(_,p){let v=b.apply(_,p);if(v instanceof V)return v;let L=v.constructor;return L[Ie]||je(L),v}}return ne&&(je(ne),ht(e,"fetch",b=>le(b))),Promise[t.__symbol__("uncaughtPromiseErrors")]=l,V})}function nh(n){n.__load_patch("toString",e=>{let t=Function.prototype.toString,i=oe("OriginalDelegate"),r=oe("Promise"),s=oe("Error"),o=function(){if(typeof this=="function"){let f=this[i];if(f)return typeof f=="function"?t.call(f):Object.prototype.toString.call(f);if(this===Promise){let h=e[r];if(h)return t.call(h)}if(this===Error){let h=e[s];if(h)return t.call(h)}}return t.call(this)};o[i]=t,Function.prototype.toString=o;let a=Object.prototype.toString,l="[object Promise]";Object.prototype.toString=function(){return typeof Promise=="function"&&this instanceof Promise?l:a.call(this)}})}function ih(n,e,t,i,r){let s=Zone.__symbol__(i);if(e[s])return;let o=e[s]=e[i];e[i]=function(a,l,u){return l&&l.prototype&&r.forEach(function(f){let h=`${t}.${i}::`+f,y=l.prototype;try{if(y.hasOwnProperty(f)){let C=n.ObjectGetOwnPropertyDescriptor(y,f);C&&C.value?(C.value=n.wrapWithCurrentZone(C.value,h),n._redefineProperty(l.prototype,f,C)):y[f]&&(y[f]=n.wrapWithCurrentZone(y[f],h))}else y[f]&&(y[f]=n.wrapWithCurrentZone(y[f],h))}catch{}}),o.call(e,a,l,u)},n.attachOriginToPatched(e[i],o)}function rh(n){n.__load_patch("util",(e,t,i)=>{let r=Ur(e);i.patchOnProperties=Oa,i.patchMethod=ht,i.bindArguments=Kr,i.patchMacroTask=zd;let s=t.__symbol__("BLACK_LISTED_EVENTS"),o=t.__symbol__("UNPATCHED_EVENTS");e[o]&&(e[s]=e[o]),e[s]&&(t[s]=t[o]=e[s]),i.patchEventPrototype=Kd,i.patchEventTarget=Gd,i.isIEOrEdge=Wd,i.ObjectDefineProperty=Vr,i.ObjectGetOwnPropertyDescriptor=On,i.ObjectCreate=jd,i.ArraySlice=Bd,i.patchClass=In,i.wrapWithCurrentZone=$r,i.filterProperties=qa,i.attachOriginToPatched=ft,i._redefineProperty=Object.defineProperty,i.patchCallbacks=ih,i.getGlobalObjects=()=>({globalSources:Aa,zoneSymbolEventNames:Me,eventNames:r,isBrowser:Zr,isMix:Ia,isNode:Ei,TRUE_STR:ut,FALSE_STR:dt,ZONE_SYMBOL_PREFIX:An,ADD_EVENT_LISTENER_STR:zr,REMOVE_EVENT_LISTENER_STR:Wr})})}function sh(n){th(n),nh(n),rh(n)}var Fa=Fd();sh(Fa);eh(Fa);function ah(n,e){if(n&1&&(S(0,"button",12)(1,"mat-icon"),D(2,"menu"),E()(),S(3,"mat-menu",null,0)(5,"button",13)(6,"mat-icon"),D(7,"home"),E(),S(8,"span"),D(9,"Inicio"),E()(),S(10,"button",14)(11,"mat-icon"),D(12,"login"),E(),S(13,"span"),D(14,"Iniciar Sesi\xF3n"),E()(),S(15,"button",15)(16,"mat-icon"),D(17,"person_add"),E(),S(18,"span"),D(19,"Registrarse"),E()()()),n&2){let t=Fo(4);se("matMenuTriggerFor",t)}}var Si=class n{_supabaseService=Q(an);sub;isReady=!1;isLoggedIn=!1;ngOnInit(){this.sub=this._supabaseService.user$.pipe(So((e,t)=>JSON.stringify(e)===JSON.stringify(t))).subscribe(e=>{this.isReady=!0,this.isLoggedIn=!!e})}ngOnDestroy(){this.sub?.unsubscribe()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-nav-bar"]],decls:19,vars:1,consts:[["mobileMenu","matMenu"],[1,"h-full"],[1,"flex","h-full","w-full","justify-between","px-6","py-2","items-center","text-white"],[1,"flex","items-center","gap-x-3","w-[90%]","md:w-[50%]","lg:w-[90%]","2xl:w-[70%]","3xl:w-[55%]"],[1,"icon-big"],["routerLink","/home",1,"text-xl","md:text-xl","lg:text-2xl","2xl:text-2xl","3xl:text-4xl","font-medium","md:font-bold","cursor-pointer","hover:text-[#9811fb]"],[1,"hidden","md:flex","content-between","gap-x-3"],["mat-fab","","extended","","routerLink","",1,"!min-w-auto","md:!min-w-auto","lg:!min-w-[100px]","2xl:!min-w-[155px]","3xl:!min-w-[155px]"],[1,"hidden","md:flex","items-center","justify-end","gap-x-3","font-bold","text-2xl","w-[10%]","md:w-[50%]","lg:w-[50%]","2xl:w-[30%]","3xl:w-[55%]"],["mat-stroked-button","","routerLink","/auth/login",1,"!min-w-[115px]"],["mat-fab","","extended","","routerLink","/auth/register",1,"!min-w-[115px]"],[1,"flex","md:hidden","items-center","justify-end","gap-x-3","font-bold","text-2xl","w-[10%]","md:w-[50%]","lg:w-[50%]","2xl:w-[30%]","3xl:w-[55%]"],["mat-icon-button","","aria-label","Men\xFA m\xF3vil",3,"matMenuTriggerFor"],["mat-menu-item","","routerLink",""],["mat-menu-item","","routerLink","/auth/login"],["mat-menu-item","","routerLink","/auth/register"]],template:function(t,i){t&1&&(S(0,"nav",1)(1,"article",2)(2,"section",3)(3,"mat-icon",4),D(4,"book"),E(),S(5,"mat-icon",4),D(6,"local_movies"),E(),S(7,"h1",5),D(8," CINE Y LIBROS "),E(),S(9,"div",6)(10,"button",7),D(11," Inicio "),E()()(),S(12,"section",8)(13,"button",9),D(14," Iniciar Sesi\xF3n "),E(),S(15,"button",10),D(16," Registrarse "),E()(),S(17,"section",11),_e(18,ah,20,1),E()()()),t&2&&(I(18),ye(i.isLoggedIn?-1:18))},dependencies:[rn,sa,ra,fi,xt,et,Ye,ua,la,aa,ca],encapsulation:2})};var nt={ADMIN:"ADMIN",USER:"USER"};var ja=[{icon:"home",title:"Inicio",route:"/",roles:[nt.ADMIN,nt.USER]},{icon:"person",title:"Perfil de usuario",route:"/profile",roles:[nt.ADMIN,nt.USER],children:[{icon:"visibility",title:"Ver perfil",route:"/profile/user-profile"},{icon:"lock",title:"Cambiar contrase\xF1a",route:"/profile/change-password"},{icon:"group",title:"Mis amigos",route:"/profile/my-friends"}]},{icon:"movie",title:"Pel\xEDculas",route:"/movies",roles:[nt.ADMIN,nt.USER],children:[{icon:"star_rate",title:"Top 10",route:"/movies/top"},{icon:"book_ribbon",title:"Biblioteca",route:"/movies/library"}]},{icon:"menu_book",title:"Libros",route:"/books",roles:[nt.ADMIN,nt.USER],children:[{icon:"fiber_new",title:"M\xE1s recientes",route:"/books/recent"},{icon:"star_rate",title:"Mejores rese\xF1as",route:"/books/top-rated"}]},{icon:"settings",title:"Configuraci\xF3n",route:"/admin/config",roles:[nt.ADMIN],children:[{icon:"people",title:"Ver usuarios",route:"/organizational/see-users"}]}];var ch=(n,e)=>({"w-16 items-center":n,"w-64 md:w-72 p-2":e}),uh=()=>({"mt-2 md:mt-4 justify-center":!0}),dh=(n,e)=>({"w-[40px] h-[40px] flex text-xl rounded-full items-center justify-center border-[0.5px] border-black group transition-all duration-0 md:duration-700 ease-in-out":!0,"bg-[#7d0fd1] text-white hover:bg-[#ae4efd]":n,"bg-white hover:bg-[#7d0fd1] hover:text-white":e}),hh=(n,e)=>({"justify-center w-[40px] h-[40px] bg-[#7d0fd1] hover:bg-[#ae4efd] text-white rounded-full border-[0.5px] border-black mx-auto":n,"justify-start gap-3 pl-3 w-full p-2 rounded-md hover:bg-[#7d0fd1]":e}),Ba=(n,e)=>({"text-[#e8d5ff] group-hover:text-white":n,"group-hover:text-[#e8d5ff]":e}),fh=(n,e)=>({"!items-center !justify-center w-[40px] h-[40px] bg-[#7d0fd1] hover:bg-[#ae4efd] text-white rounded-full border-[0.5px] border-black mx-auto":n,"items-center justify-between gap-3 p-2 rounded-md hover:bg-[#7d0fd1]":e}),Qr=(n,e)=>e.title;function ph(n,e){n&1&&(S(0,"mat-icon",3),D(1,"keyboard_arrow_right"),E())}function mh(n,e){n&1&&(S(0,"mat-icon",4),D(1,"close"),E())}function gh(n,e){n&1&&(S(0,"div",6),ve(1,"app-loader"),E())}function _h(n,e){if(n&1&&(S(0,"span",11),D(1),E()),n&2){let t=ae().$implicit;I(),ct(t.title)}}function yh(n,e){if(n&1&&(S(0,"mat-icon"),D(1),E()),n&2){let t=ae().$implicit,i=ae(2);I(),Ae(" ",i.openSubMenu[t.title]?"expand_less":"expand_more"," ")}}function bh(n,e){if(n&1&&(S(0,"a",14)(1,"mat-icon",15),D(2),E(),S(3,"span"),D(4),E()()),n&2){let t=e.$implicit;se("routerLink",t.route),I(2),ct(t.icon),I(2),ct(t.title)}}function vh(n,e){if(n&1&&(S(0,"div",12),Ue(1,bh,5,3,"a",14,Qr),E()),n&2){let t=ae().$implicit;se("@fadeIn",void 0),I(),Ve(t.children)}}function Eh(n,e){if(n&1&&(S(0,"div",16)(1,"mat-icon",15),D(2),E(),S(3,"span"),D(4),E()()),n&2){let t=e.$implicit;se("routerLink",t.route),I(2),ct(t.icon),I(2),ct(t.title)}}function Sh(n,e){if(n&1&&(S(0,"div",13),Ue(1,Eh,5,3,"div",16,Qr),E()),n&2){let t=ae().$implicit;se("@slideDown",void 0),I(),Ve(t.children)}}function Th(n,e){if(n&1){let t=we();S(0,"div",10),ge("click",function(){let r=Se(t).$implicit,s=ae(2);return Te(r.children?s.toggleSubMenu(r.title):null)}),S(1,"mat-icon",8),D(2),E(),_e(3,_h,2,1,"span",11),_e(4,yh,2,1,"mat-icon"),_e(5,vh,3,1,"div",12),E(),_e(6,Sh,3,1,"div",13)}if(n&2){let t=e.$implicit,i=ae(2);se("routerLink",t.children?null:t.route)("ngClass",Lt(8,fh,i.isCollapsed,!i.isCollapsed)),I(),se("ngClass",Lt(11,Ba,i.isCollapsed,!i.isCollapsed)),I(),ct(t.icon),I(),ye(i.isCollapsed?-1:3),I(),ye(t.children&&!i.isCollapsed?4:-1),I(),ye(t.children&&i.openSubMenu[t.title]&&i.isCollapsed?5:-1),I(),ye(t.children&&i.openSubMenu[t.title]&&!i.isCollapsed?6:-1)}}function wh(n,e){if(n&1&&Ue(0,Th,7,14,null,null,Qr),n&2){let t=ae();Ve(t.menuItems())}}function Ch(n,e){n&1&&(S(0,"span",9),D(1,"Cerrar sesi\xF3n"),E())}var wi=class n{closeSideBar=!1;collapsed=new Ir;sidebarStateChanged=new Ir;isLoggedIn=!1;isCollapsed=!0;openSubMenu={};_singInService=Q(ma);_tokenService=Q(ln);_elementRef=Q(No);_roleSubscription;userRole=xr(null);isLoading=xr(!0);menuItems=kn(()=>{let e=this.userRole();return!e||e===""?[]:ja.filter(t=>!t.roles||t.roles.length===0?!0:t.roles.includes(e))});ngOnInit(){let e=this._tokenService.getUserRole();e!==null&&(this.userRole.set(e),this.isLoading.set(!1)),this._roleSubscription=this._tokenService.userRole$.subscribe(t=>{this.userRole.set(t),this.isLoading.set(!1)})}ngOnDestroy(){this._roleSubscription?.unsubscribe()}toggleSidebar(){this.isCollapsed=!this.isCollapsed,this.isCollapsed&&this.closeAllSubMenus(),this.collapsed.emit(this.isCollapsed),this.sidebarStateChanged.emit(this.isCollapsed)}closeSidebar(){this.isCollapsed||(this.isCollapsed=!0,this.closeAllSubMenus(),this.collapsed.emit(this.isCollapsed),this.sidebarStateChanged.emit(this.isCollapsed))}toggleSubMenu(e){this.openSubMenu[e]?this.openSubMenu[e]=!1:(Object.keys(this.openSubMenu).forEach(t=>{this.openSubMenu[t]=!1}),this.openSubMenu[e]=!0)}closeAllSubMenus(){this.openSubMenu={}}onDocumentClick(e){this.isCollapsed&&Object.values(this.openSubMenu).some(t=>t)&&(this._elementRef.nativeElement.contains(e.target)||this.closeAllSubMenus())}signOut(){return Je(this,null,function*(){this.closeSidebar(),yield this._singInService.signOut(),this.isLoggedIn=!1})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-side-bar"]],hostBindings:function(t,i){t&1&&ge("click",function(s){return i.onDocumentClick(s)},Ro)},inputs:{closeSideBar:"closeSideBar"},outputs:{collapsed:"collapsed",sidebarStateChanged:"sidebarStateChanged"},decls:12,vars:21,consts:[[1,"flex","flex-col","bg-side-bar","text-white","font-bold","fixed","h-full","z-50","sidebar-transition",3,"ngClass"],[1,"flex","h-[6%]","transition-all","duration-0","md:duration-700","ease-in-out",3,"ngClass"],["mat-icon-button","",3,"click","ngClass"],[1,"text-[#e8d5ff]","group-hover:text-white","transition-colors","duration-0","md:duration-700"],[1,"text-[#7d0fd1]","group-hover:text-[#e8d5ff]","transition-colors","duration-0","md:duration-700"],[1,"flex","flex-col","mt-4","gap-2","w-full","relative","flex-1"],[1,"flex","justify-center","items-center"],["type","button",1,"mt-auto","mb-2","cursor-pointer","transition-colors","duration-0","md:duration-700","ease-in-out","flex","items-center","group",3,"click","ngClass"],[1,"transition-colors","duration-0","md:duration-700",3,"ngClass"],[1,"truncate"],[1,"flex","cursor-pointer","transition-colors","duration-0","md:duration-700","ease-in-out","relative","group",3,"click","routerLink","ngClass"],[1,"truncate","flex-1"],[1,"absolute","left-full","top-0","ml-2","bg-[#7d0fd1]","text-white","rounded-md","shadow-lg","flex","flex-col","w-64","py-2","z-[9999]"],[1,"pl-8","flex","flex-col","gap-1"],[1,"flex","items-center","gap-2","p-2","hover:bg-[#8a25e0]","rounded","transition",3,"routerLink"],[1,"text-sm"],[1,"flex","items-center","gap-2","cursor-pointer","px-3","py-1","rounded","hover:bg-[#7d0fd1]","transition-all","duration-0","md:duration-700",3,"routerLink"]],template:function(t,i){t&1&&(S(0,"aside",0)(1,"div",1)(2,"button",2),ge("click",function(){return i.toggleSidebar()}),_e(3,ph,2,0,"mat-icon",3)(4,mh,2,0,"mat-icon",4),E()(),S(5,"nav",5),_e(6,gh,2,0,"div",6)(7,wh,2,0),E(),S(8,"button",7),ge("click",function(){return i.signOut()}),S(9,"mat-icon",8),D(10,"logout"),E(),_e(11,Ch,2,0,"span",9),E()()),t&2&&(se("ngClass",Lt(8,ch,i.isCollapsed,!i.isCollapsed)),I(),se("ngClass",jo(11,uh)),I(),se("ngClass",Lt(12,dh,i.isCollapsed,!i.isCollapsed)),I(),ye(i.isCollapsed?3:4),I(3),ye(i.isLoading()?6:7),I(2),se("ngClass",Lt(15,hh,i.isCollapsed,!i.isCollapsed)),I(),se("ngClass",Lt(18,Ba,i.isCollapsed,!i.isCollapsed)),I(2),ye(i.isCollapsed?-1:11))},dependencies:[ui,zo,et,Ye,xt,mi],styles:[".sidebar-transition[_ngcontent-%COMP%]{transition:.1s ease-in-out}@media (min-width: 768px){.sidebar-transition[_ngcontent-%COMP%]{transition:width .7s ease-in-out}}"],data:{animation:[Lr("slideDown",[xn(":enter",[Pe({opacity:0,transform:"scaleY(0)",transformOrigin:"top"}),Nn("200ms ease-out",Pe({opacity:1,transform:"scaleY(1)"}))]),xn(":leave",[Pe({opacity:1,transform:"scaleY(1)",transformOrigin:"top"}),Nn("200ms ease-in",Pe({opacity:0,transform:"scaleY(0)"}))])]),Lr("fadeIn",[xn(":enter",[Pe({opacity:0,transform:"translateX(-10px)"}),Nn("200ms ease-out",Pe({opacity:1,transform:"translateX(0)"}))]),xn(":leave",[Pe({opacity:1,transform:"translateX(0)"}),Nn("150ms ease-in",Pe({opacity:0,transform:"translateX(-10px)"}))])])]}})};var xu=Ld(ku());function Nu(n,e){n.terminate=function(){let t=()=>{};this.onerror=t,this.onmessage=t,this.onopen=t;let i=new Date,r=Math.random().toString().substring(2,8),s=this.onclose;this.onclose=o=>{let a=new Date().getTime()-i.getTime();e(`Discarded socket (#${r})  closed after ${a}ms, with code/reason: ${o.code}/${o.reason}`)},this.close(),s?.call(n,{code:4001,reason:`Quick discarding socket (#${r}) without waiting for the shutdown sequence.`,wasClean:!1})}}var Gt={LF:`
`,NULL:"\0"};var Jn=class n{get body(){return!this._body&&this.isBinaryBody&&(this._body=new TextDecoder().decode(this._binaryBody)),this._body||""}get binaryBody(){return!this._binaryBody&&!this.isBinaryBody&&(this._binaryBody=new TextEncoder().encode(this._body)),this._binaryBody}constructor(e){let{command:t,headers:i,body:r,binaryBody:s,escapeHeaderValues:o,skipContentLengthHeader:a}=e;this.command=t,this.headers=Object.assign({},i||{}),s?(this._binaryBody=s,this.isBinaryBody=!0):(this._body=r||"",this.isBinaryBody=!1),this.escapeHeaderValues=o||!1,this.skipContentLengthHeader=a||!1}static fromRawFrame(e,t){let i={},r=s=>s.replace(/^\s+|\s+$/g,"");for(let s of e.headers.reverse()){let o=s.indexOf(":"),a=r(s[0]),l=r(s[1]);t&&e.command!=="CONNECT"&&e.command!=="CONNECTED"&&(l=n.hdrValueUnEscape(l)),i[a]=l}return new n({command:e.command,headers:i,binaryBody:e.binaryBody,escapeHeaderValues:t})}toString(){return this.serializeCmdAndHeaders()}serialize(){let e=this.serializeCmdAndHeaders();return this.isBinaryBody?n.toUnit8Array(e,this._binaryBody).buffer:e+this._body+Gt.NULL}serializeCmdAndHeaders(){let e=[this.command];this.skipContentLengthHeader&&delete this.headers["content-length"];for(let t of Object.keys(this.headers||{})){let i=this.headers[t];this.escapeHeaderValues&&this.command!=="CONNECT"&&this.command!=="CONNECTED"?e.push(`${t}:${n.hdrValueEscape(`${i}`)}`):e.push(`${t}:${i}`)}return(this.isBinaryBody||!this.isBodyEmpty()&&!this.skipContentLengthHeader)&&e.push(`content-length:${this.bodyLength()}`),e.join(Gt.LF)+Gt.LF+Gt.LF}isBodyEmpty(){return this.bodyLength()===0}bodyLength(){let e=this.binaryBody;return e?e.length:0}static sizeOfUTF8(e){return e?new TextEncoder().encode(e).length:0}static toUnit8Array(e,t){let i=new TextEncoder().encode(e),r=new Uint8Array([0]),s=new Uint8Array(i.length+t.length+r.length);return s.set(i),s.set(t,i.length),s.set(r,i.length+t.length),s}static marshall(e){return new n(e).serialize()}static hdrValueEscape(e){return e.replace(/\\/g,"\\\\").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/:/g,"\\c")}static hdrValueUnEscape(e){return e.replace(/\\r/g,"\r").replace(/\\n/g,`
`).replace(/\\c/g,":").replace(/\\\\/g,"\\")}};var Wi=class{constructor(e,t){this.onFrame=e,this.onIncomingPing=t,this._encoder=new TextEncoder,this._decoder=new TextDecoder,this._token=[],this._initState()}parseChunk(e,t=!1){let i;if(typeof e=="string"?i=this._encoder.encode(e):i=new Uint8Array(e),t&&i[i.length-1]!==0){let r=new Uint8Array(i.length+1);r.set(i,0),r[i.length]=0,i=r}for(let r=0;r<i.length;r++){let s=i[r];this._onByte(s)}}_collectFrame(e){if(e!==0&&e!==13){if(e===10){this.onIncomingPing();return}this._onByte=this._collectCommand,this._reinjectByte(e)}}_collectCommand(e){if(e!==13){if(e===10){this._results.command=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_collectHeaders(e){if(e!==13){if(e===10){this._setupCollectBody();return}this._onByte=this._collectHeaderKey,this._reinjectByte(e)}}_reinjectByte(e){this._onByte(e)}_collectHeaderKey(e){if(e===58){this._headerKey=this._consumeTokenAsUTF8(),this._onByte=this._collectHeaderValue;return}this._consumeByte(e)}_collectHeaderValue(e){if(e!==13){if(e===10){this._results.headers.push([this._headerKey,this._consumeTokenAsUTF8()]),this._headerKey=void 0,this._onByte=this._collectHeaders;return}this._consumeByte(e)}}_setupCollectBody(){let e=this._results.headers.filter(t=>t[0]==="content-length")[0];e?(this._bodyBytesRemaining=parseInt(e[1],10),this._onByte=this._collectBodyFixedSize):this._onByte=this._collectBodyNullTerminated}_collectBodyNullTerminated(e){if(e===0){this._retrievedBody();return}this._consumeByte(e)}_collectBodyFixedSize(e){if(this._bodyBytesRemaining--===0){this._retrievedBody();return}this._consumeByte(e)}_retrievedBody(){this._results.binaryBody=this._consumeTokenAsRaw();try{this.onFrame(this._results)}catch(e){console.log("Ignoring an exception thrown by a frame handler. Original exception: ",e)}this._initState()}_consumeByte(e){this._token.push(e)}_consumeTokenAsUTF8(){return this._decoder.decode(this._consumeTokenAsRaw())}_consumeTokenAsRaw(){let e=new Uint8Array(this._token);return this._token=[],e}_initState(){this._results={command:void 0,headers:[],binaryBody:void 0},this._token=[],this._headerKey=void 0,this._onByte=this._collectFrame}};var St=(function(n){return n[n.CONNECTING=0]="CONNECTING",n[n.OPEN=1]="OPEN",n[n.CLOSING=2]="CLOSING",n[n.CLOSED=3]="CLOSED",n})(St||{}),Ge=(function(n){return n[n.ACTIVE=0]="ACTIVE",n[n.DEACTIVATING=1]="DEACTIVATING",n[n.INACTIVE=2]="INACTIVE",n})(Ge||{}),$i=(function(n){return n[n.LINEAR=0]="LINEAR",n[n.EXPONENTIAL=1]="EXPONENTIAL",n})($i||{}),yn=(function(n){return n.Interval="interval",n.Worker="worker",n})(yn||{});var Gi=class{constructor(e,t=yn.Interval,i){this._interval=e,this._strategy=t,this._debug=i,this._workerScript=`
    var startTime = Date.now();
    setInterval(function() {
        self.postMessage(Date.now() - startTime);
    }, ${this._interval});
  `}start(e){this.stop(),this.shouldUseWorker()?this.runWorker(e):this.runInterval(e)}stop(){this.disposeWorker(),this.disposeInterval()}shouldUseWorker(){return typeof Worker<"u"&&this._strategy===yn.Worker}runWorker(e){this._debug("Using runWorker for outgoing pings"),this._worker||(this._worker=new Worker(URL.createObjectURL(new Blob([this._workerScript],{type:"text/javascript"}))),this._worker.onmessage=t=>e(t.data))}runInterval(e){if(this._debug("Using runInterval for outgoing pings"),!this._timer){let t=Date.now();this._timer=setInterval(()=>{e(Date.now()-t)},this._interval)}}disposeWorker(){this._worker&&(this._worker.terminate(),delete this._worker,this._debug("Outgoing ping disposeWorker"))}disposeInterval(){this._timer&&(clearInterval(this._timer),delete this._timer,this._debug("Outgoing ping disposeInterval"))}};var pe=class{constructor(e){this.versions=e}supportedVersions(){return this.versions.join(",")}protocolVersions(){return this.versions.map(e=>`v${e.replace(".","")}.stomp`)}};pe.V1_0="1.0";pe.V1_1="1.1";pe.V1_2="1.2";pe.default=new pe([pe.V1_2,pe.V1_1,pe.V1_0]);var Ki=class{get connectedVersion(){return this._connectedVersion}get connected(){return this._connected}constructor(e,t,i){this._client=e,this._webSocket=t,this._connected=!1,this._serverFrameHandlers={CONNECTED:r=>{this.debug(`connected to server ${r.headers.server}`),this._connected=!0,this._connectedVersion=r.headers.version,this._connectedVersion===pe.V1_2&&(this._escapeHeaderValues=!0),this._setupHeartbeat(r.headers),this.onConnect(r)},MESSAGE:r=>{let s=r.headers.subscription,o=this._subscriptions[s]||this.onUnhandledMessage,a=r,l=this,u=this._connectedVersion===pe.V1_2?a.headers.ack:a.headers["message-id"];a.ack=(f={})=>l.ack(u,s,f),a.nack=(f={})=>l.nack(u,s,f),o(a)},RECEIPT:r=>{let s=this._receiptWatchers[r.headers["receipt-id"]];s?(s(r),delete this._receiptWatchers[r.headers["receipt-id"]]):this.onUnhandledReceipt(r)},ERROR:r=>{this.onStompError(r)}},this._counter=0,this._subscriptions={},this._receiptWatchers={},this._partialData="",this._escapeHeaderValues=!1,this._lastServerActivityTS=Date.now(),this.debug=i.debug,this.stompVersions=i.stompVersions,this.connectHeaders=i.connectHeaders,this.disconnectHeaders=i.disconnectHeaders,this.heartbeatIncoming=i.heartbeatIncoming,this.heartbeatToleranceMultiplier=i.heartbeatGracePeriods,this.heartbeatOutgoing=i.heartbeatOutgoing,this.splitLargeFrames=i.splitLargeFrames,this.maxWebSocketChunkSize=i.maxWebSocketChunkSize,this.forceBinaryWSFrames=i.forceBinaryWSFrames,this.logRawCommunication=i.logRawCommunication,this.appendMissingNULLonIncoming=i.appendMissingNULLonIncoming,this.discardWebsocketOnCommFailure=i.discardWebsocketOnCommFailure,this.onConnect=i.onConnect,this.onDisconnect=i.onDisconnect,this.onStompError=i.onStompError,this.onWebSocketClose=i.onWebSocketClose,this.onWebSocketError=i.onWebSocketError,this.onUnhandledMessage=i.onUnhandledMessage,this.onUnhandledReceipt=i.onUnhandledReceipt,this.onUnhandledFrame=i.onUnhandledFrame,this.onHeartbeatReceived=i.onHeartbeatReceived,this.onHeartbeatLost=i.onHeartbeatLost}start(){let e=new Wi(t=>{let i=Jn.fromRawFrame(t,this._escapeHeaderValues);this.logRawCommunication||this.debug(`<<< ${i}`),(this._serverFrameHandlers[i.command]||this.onUnhandledFrame)(i)},()=>{this.debug("<<< PONG"),this.onHeartbeatReceived()});this._webSocket.onmessage=t=>{if(this.debug("Received data"),this._lastServerActivityTS=Date.now(),this.logRawCommunication){let i=t.data instanceof ArrayBuffer?new TextDecoder().decode(t.data):t.data;this.debug(`<<< ${i}`)}e.parseChunk(t.data,this.appendMissingNULLonIncoming)},this._webSocket.onclose=t=>{this.debug(`Connection closed to ${this._webSocket.url}`),this._cleanUp(),this.onWebSocketClose(t)},this._webSocket.onerror=t=>{this.onWebSocketError(t)},this._webSocket.onopen=()=>{let t=Object.assign({},this.connectHeaders);this.debug("Web Socket Opened..."),t["accept-version"]=this.stompVersions.supportedVersions(),t["heart-beat"]=[this.heartbeatOutgoing,this.heartbeatIncoming].join(","),this._transmit({command:"CONNECT",headers:t})}}_setupHeartbeat(e){if(e.version!==pe.V1_1&&e.version!==pe.V1_2||!e["heart-beat"])return;let[t,i]=e["heart-beat"].split(",").map(r=>parseInt(r,10));if(this.heartbeatOutgoing!==0&&i!==0){let r=Math.max(this.heartbeatOutgoing,i);this.debug(`send PING every ${r}ms`),this._pinger=new Gi(r,this._client.heartbeatStrategy,this.debug),this._pinger.start(()=>{this._webSocket.readyState===St.OPEN&&(this._webSocket.send(Gt.LF),this.debug(">>> PING"))})}if(this.heartbeatIncoming!==0&&t!==0){let r=Math.max(this.heartbeatIncoming,t);this.debug(`check PONG every ${r}ms`),this._ponger=setInterval(()=>{let s=Date.now()-this._lastServerActivityTS;s>r*this.heartbeatToleranceMultiplier&&(this.debug(`did not receive server activity for the last ${s}ms`),this.onHeartbeatLost(),this._closeOrDiscardWebsocket())},r)}}_closeOrDiscardWebsocket(){this.discardWebsocketOnCommFailure?(this.debug("Discarding websocket, the underlying socket may linger for a while"),this.discardWebsocket()):(this.debug("Issuing close on the websocket"),this._closeWebsocket())}forceDisconnect(){this._webSocket&&(this._webSocket.readyState===St.CONNECTING||this._webSocket.readyState===St.OPEN)&&this._closeOrDiscardWebsocket()}_closeWebsocket(){this._webSocket.onmessage=()=>{},this._webSocket.close()}discardWebsocket(){typeof this._webSocket.terminate!="function"&&Nu(this._webSocket,e=>this.debug(e)),this._webSocket.terminate()}_transmit(e){let{command:t,headers:i,body:r,binaryBody:s,skipContentLengthHeader:o}=e,a=new Jn({command:t,headers:i,body:r,binaryBody:s,escapeHeaderValues:this._escapeHeaderValues,skipContentLengthHeader:o}),l=a.serialize();if(this.logRawCommunication?this.debug(`>>> ${l}`):this.debug(`>>> ${a}`),this.forceBinaryWSFrames&&typeof l=="string"&&(l=new TextEncoder().encode(l)),typeof l!="string"||!this.splitLargeFrames)this._webSocket.send(l);else{let u=l;for(;u.length>0;){let f=u.substring(0,this.maxWebSocketChunkSize);u=u.substring(this.maxWebSocketChunkSize),this._webSocket.send(f),this.debug(`chunk sent = ${f.length}, remaining = ${u.length}`)}}}dispose(){if(this.connected)try{let e=Object.assign({},this.disconnectHeaders);e.receipt||(e.receipt=`close-${this._counter++}`),this.watchForReceipt(e.receipt,t=>{this._closeWebsocket(),this._cleanUp(),this.onDisconnect(t)}),this._transmit({command:"DISCONNECT",headers:e})}catch(e){this.debug(`Ignoring error during disconnect ${e}`)}else(this._webSocket.readyState===St.CONNECTING||this._webSocket.readyState===St.OPEN)&&this._closeWebsocket()}_cleanUp(){this._connected=!1,this._pinger&&(this._pinger.stop(),this._pinger=void 0),this._ponger&&(clearInterval(this._ponger),this._ponger=void 0)}publish(e){let{destination:t,headers:i,body:r,binaryBody:s,skipContentLengthHeader:o}=e,a=Object.assign({destination:t},i);this._transmit({command:"SEND",headers:a,body:r,binaryBody:s,skipContentLengthHeader:o})}watchForReceipt(e,t){this._receiptWatchers[e]=t}subscribe(e,t,i={}){i=Object.assign({},i),i.id||(i.id=`sub-${this._counter++}`),i.destination=e,this._subscriptions[i.id]=t,this._transmit({command:"SUBSCRIBE",headers:i});let r=this;return{id:i.id,unsubscribe(s){return r.unsubscribe(i.id,s)}}}unsubscribe(e,t={}){t=Object.assign({},t),delete this._subscriptions[e],t.id=e,this._transmit({command:"UNSUBSCRIBE",headers:t})}begin(e){let t=e||`tx-${this._counter++}`;this._transmit({command:"BEGIN",headers:{transaction:t}});let i=this;return{id:t,commit(){i.commit(t)},abort(){i.abort(t)}}}commit(e){this._transmit({command:"COMMIT",headers:{transaction:e}})}abort(e){this._transmit({command:"ABORT",headers:{transaction:e}})}ack(e,t,i={}){i=Object.assign({},i),this._connectedVersion===pe.V1_2?i.id=e:i["message-id"]=e,i.subscription=t,this._transmit({command:"ACK",headers:i})}nack(e,t,i={}){return i=Object.assign({},i),this._connectedVersion===pe.V1_2?i.id=e:i["message-id"]=e,i.subscription=t,this._transmit({command:"NACK",headers:i})}};var Zi=class{get webSocket(){return this._stompHandler?._webSocket}get disconnectHeaders(){return this._disconnectHeaders}set disconnectHeaders(e){this._disconnectHeaders=e,this._stompHandler&&(this._stompHandler.disconnectHeaders=this._disconnectHeaders)}get connected(){return!!this._stompHandler&&this._stompHandler.connected}get connectedVersion(){return this._stompHandler?this._stompHandler.connectedVersion:void 0}get active(){return this.state===Ge.ACTIVE}_changeState(e){this.state=e,this.onChangeState(e)}constructor(e={}){this.stompVersions=pe.default,this.connectionTimeout=0,this.reconnectDelay=5e3,this._nextReconnectDelay=0,this.maxReconnectDelay=900*1e3,this.reconnectTimeMode=$i.LINEAR,this.heartbeatIncoming=1e4,this.heartbeatToleranceMultiplier=2,this.heartbeatOutgoing=1e4,this.heartbeatStrategy=yn.Interval,this.splitLargeFrames=!1,this.maxWebSocketChunkSize=8*1024,this.forceBinaryWSFrames=!1,this.appendMissingNULLonIncoming=!1,this.discardWebsocketOnCommFailure=!1,this.state=Ge.INACTIVE;let t=()=>{};this.debug=t,this.beforeConnect=t,this.onConnect=t,this.onDisconnect=t,this.onUnhandledMessage=t,this.onUnhandledReceipt=t,this.onUnhandledFrame=t,this.onHeartbeatReceived=t,this.onHeartbeatLost=t,this.onStompError=t,this.onWebSocketClose=t,this.onWebSocketError=t,this.logRawCommunication=!1,this.onChangeState=t,this.connectHeaders={},this._disconnectHeaders={},this.configure(e)}configure(e){Object.assign(this,e),this.maxReconnectDelay>0&&this.maxReconnectDelay<this.reconnectDelay&&(this.debug(`Warning: maxReconnectDelay (${this.maxReconnectDelay}ms) is less than reconnectDelay (${this.reconnectDelay}ms). Using reconnectDelay as the maxReconnectDelay delay.`),this.maxReconnectDelay=this.reconnectDelay)}activate(){let e=()=>{if(this.active){this.debug("Already ACTIVE, ignoring request to activate");return}this._changeState(Ge.ACTIVE),this._nextReconnectDelay=this.reconnectDelay,this._connect()};this.state===Ge.DEACTIVATING?(this.debug("Waiting for deactivation to finish before activating"),this.deactivate().then(()=>{e()})):e()}_connect(){return Je(this,null,function*(){if(yield this.beforeConnect(this),this._stompHandler){this.debug("There is already a stompHandler, skipping the call to connect");return}if(!this.active){this.debug("Client has been marked inactive, will not attempt to connect");return}this.connectionTimeout>0&&(this._connectionWatcher&&clearTimeout(this._connectionWatcher),this._connectionWatcher=setTimeout(()=>{this.connected||(this.debug(`Connection not established in ${this.connectionTimeout}ms, closing socket`),this.forceDisconnect())},this.connectionTimeout)),this.debug("Opening Web Socket...");let e=this._createWebSocket();this._stompHandler=new Ki(this,e,{debug:this.debug,stompVersions:this.stompVersions,connectHeaders:this.connectHeaders,disconnectHeaders:this._disconnectHeaders,heartbeatIncoming:this.heartbeatIncoming,heartbeatGracePeriods:this.heartbeatToleranceMultiplier,heartbeatOutgoing:this.heartbeatOutgoing,heartbeatStrategy:this.heartbeatStrategy,splitLargeFrames:this.splitLargeFrames,maxWebSocketChunkSize:this.maxWebSocketChunkSize,forceBinaryWSFrames:this.forceBinaryWSFrames,logRawCommunication:this.logRawCommunication,appendMissingNULLonIncoming:this.appendMissingNULLonIncoming,discardWebsocketOnCommFailure:this.discardWebsocketOnCommFailure,onConnect:t=>{if(this._connectionWatcher&&(clearTimeout(this._connectionWatcher),this._connectionWatcher=void 0),this._nextReconnectDelay=this.reconnectDelay,!this.active){this.debug("STOMP got connected while deactivate was issued, will disconnect now"),this._disposeStompHandler();return}this.onConnect(t)},onDisconnect:t=>{this.onDisconnect(t)},onStompError:t=>{this.onStompError(t)},onWebSocketClose:t=>{this._stompHandler=void 0,this.state===Ge.DEACTIVATING&&this._changeState(Ge.INACTIVE),this.onWebSocketClose(t),this.active&&this._schedule_reconnect()},onWebSocketError:t=>{this.onWebSocketError(t)},onUnhandledMessage:t=>{this.onUnhandledMessage(t)},onUnhandledReceipt:t=>{this.onUnhandledReceipt(t)},onUnhandledFrame:t=>{this.onUnhandledFrame(t)},onHeartbeatReceived:()=>{this.onHeartbeatReceived()},onHeartbeatLost:()=>{this.onHeartbeatLost()}}),this._stompHandler.start()})}_createWebSocket(){let e;if(this.webSocketFactory)e=this.webSocketFactory();else if(this.brokerURL)e=new WebSocket(this.brokerURL,this.stompVersions.protocolVersions());else throw new Error("Either brokerURL or webSocketFactory must be provided");return e.binaryType="arraybuffer",e}_schedule_reconnect(){this._nextReconnectDelay>0&&(this.debug(`STOMP: scheduling reconnection in ${this._nextReconnectDelay}ms`),this._reconnector=setTimeout(()=>{this.reconnectTimeMode===$i.EXPONENTIAL&&(this._nextReconnectDelay=this._nextReconnectDelay*2,this.maxReconnectDelay!==0&&(this._nextReconnectDelay=Math.min(this._nextReconnectDelay,this.maxReconnectDelay))),this._connect()},this._nextReconnectDelay))}deactivate(){return Je(this,arguments,function*(e={}){let t=e.force||!1,i=this.active,r;if(this.state===Ge.INACTIVE)return this.debug("Already INACTIVE, nothing more to do"),Promise.resolve();if(this._changeState(Ge.DEACTIVATING),this._nextReconnectDelay=0,this._reconnector&&(clearTimeout(this._reconnector),this._reconnector=void 0),this._stompHandler&&this.webSocket.readyState!==St.CLOSED){let s=this._stompHandler.onWebSocketClose;r=new Promise((o,a)=>{this._stompHandler.onWebSocketClose=l=>{s(l),o()}})}else return this._changeState(Ge.INACTIVE),Promise.resolve();return t?this._stompHandler?.discardWebsocket():i&&this._disposeStompHandler(),r})}forceDisconnect(){this._stompHandler&&this._stompHandler.forceDisconnect()}_disposeStompHandler(){this._stompHandler&&this._stompHandler.dispose()}publish(e){this._checkConnection(),this._stompHandler.publish(e)}_checkConnection(){if(!this.connected)throw new TypeError("There is no underlying STOMP connection")}watchForReceipt(e,t){this._checkConnection(),this._stompHandler.watchForReceipt(e,t)}subscribe(e,t,i={}){return this._checkConnection(),this._stompHandler.subscribe(e,t,i)}unsubscribe(e,t={}){this._checkConnection(),this._stompHandler.unsubscribe(e,t)}begin(e){return this._checkConnection(),this._stompHandler.begin(e)}commit(e){this._checkConnection(),this._stompHandler.commit(e)}abort(e){this._checkConnection(),this._stompHandler.abort(e)}ack(e,t,i={}){this._checkConnection(),this._stompHandler.ack(e,t,i)}nack(e,t,i={}){this._checkConnection(),this._stompHandler.nack(e,t,i)}};var At=class n{stompClient=null;subscriptions=new Map;connectionStatus=new wn(!1);connectionStatus$=this.connectionStatus.asObservable();friendRequestsSubject=new wn([]);friendRequests$=this.friendRequestsSubject.asObservable();collectionRequestsSubject=new wn(null);collectionRequests$=this.collectionRequestsSubject.asObservable();notificationsSubject=new wn(null);notifications$=this.notificationsSubject.asObservable();connect(e,t){if(this.stompClient&&this.connectionStatus.value)return;if(!t){console.warn("\u26A0\uFE0F No hay token JWT disponible, no se puede conectar al WS");return}let i=new xu.default(`${on.backendUrl}ws`);this.stompClient=new Zi({webSocketFactory:()=>i,connectHeaders:{Authorization:`Bearer ${t}`,userId:e},onConnect:()=>{this.connectionStatus.next(!0),this.subscribeToChannels(e)},onStompError:r=>{console.error("\u274C Error STOMP:",r.headers.message),this.connectionStatus.next(!1)},onWebSocketClose:()=>{this.connectionStatus.next(!1)},reconnectDelay:5e3,heartbeatIncoming:4e3,heartbeatOutgoing:4e3}),this.stompClient.activate()}subscribeToChannels(e){if(!this.stompClient)return;let t=this.stompClient.subscribe(`/user/${e}/queue/friend-requests`,s=>{let o=JSON.parse(s.body),a=this.friendRequestsSubject.value;this.friendRequestsSubject.next([o,...a])});this.subscriptions.set("friend-requests",t);let i=this.stompClient.subscribe(`/user/${e}/queue/collection-requests`,s=>{let o=JSON.parse(s.body);this.collectionRequestsSubject.next(o)});this.subscriptions.set("collection-requests",i);let r=this.stompClient.subscribe(`/user/${e}/notifications`,s=>{let o=JSON.parse(s.body);this.notificationsSubject.next(o)});this.subscriptions.set("notifications",r)}disconnect(){this.stompClient&&(this.stompClient.deactivate(),this.subscriptions.clear(),this.connectionStatus.next(!1),this.stompClient=null)}clearFriendRequests(){this.friendRequestsSubject.next([])}isConnected(){return this.connectionStatus.value}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})};var Ru=n=>["/profile","public-profile",n];function Op(n,e){if(n&1){let t=we();S(0,"button",13),ge("click",function(){let r=Se(t).$implicit;return Te(r.action())}),D(1),E()}if(n&2){let t=e.$implicit;I(),Ae(" ",t.label," ")}}function Ap(n,e){if(n&1&&(S(0,"div",10),Ue(1,Op,2,1,"button",12,Do),E()),n&2){let t=ae(2);I(),Ve(t.actions())}}function Pp(n,e){n&1&&ve(0,"div",11)}function Dp(n,e){if(n&1&&(S(0,"div",1)(1,"a",2),D(2),E(),S(3,"div",3)(4,"div",4)(5,"a",5),D(6),E(),S(7,"span",6),D(8),E()(),S(9,"div",7),Co(),S(10,"svg",8),ve(11,"path",9),E(),D(12),E(),_e(13,Ap,3,0,"div",10),E(),_e(14,Pp,1,0,"div",11),E()),n&2){let t,i=e,r=ae();Mt("bg-[#1f1b2e]",!i.isRead),I(),se("routerLink",nn(10,Ru,i==null?null:i.senderId)),I(),Ae(" ",i==null||i.sender==null||i.sender.fullName==null||(t=i.sender.fullName.charAt(0))==null?null:t.toUpperCase()," "),I(3),se("routerLink",nn(12,Ru,i==null?null:i.senderId)),I(),Ae(" ",i==null||i.sender==null?null:i.sender.fullName," "),I(2),ct(r.message()),I(4),Ae(" ",i.createdAt," "),I(),ye(r.actions().length>0?13:-1),I(),ye(i.isRead?-1:14)}}var Qi=class n{notification=Ho();_friendRequestService=Q(gi);actionPerformed=Vo();message=kn(()=>{let e=this.notification();if(!e)return"";switch(e.type){case"FRIEND_REQUEST":return"te envi\xF3 una solicitud de amistad";case"FRIEND_ACCEPTED":return"acept\xF3 tu solicitud de amistad";case"COLLECTION_REQUEST":return"te envi\xF3 su biblioteca privada";case"COLLECTION_ACCEPTED":return"acept\xF3 tu biblioteca";default:return"envi\xF3 una notificaci\xF3n"}});actions=kn(()=>{let e=this.notification();if(!e)return[];switch(e.type){case"FRIEND_REQUEST":return[{label:"Aceptar",action:()=>{this._friendRequestService.acceptFriendRequest(e.senderId).subscribe({next:()=>{this.actionPerformed.emit(e.entityId)},error:t=>console.error("Error al aceptar solicitud",t)})}},{label:"Rechazar",action:()=>{this._friendRequestService.rejectFriendRequest(e.senderId).subscribe({next:()=>{this.actionPerformed.emit(e.entityId)},error:t=>console.error("Error al rechazar solicitud",t)})}}];case"FRIEND_ACCEPTED":return[];case"COLLECTION_REQUEST":return[];case"COLLECTION_ACCEPTED":return[];default:return[]}});static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-notification-item"]],inputs:{notification:[1,"notification"]},outputs:{actionPerformed:"actionPerformed"},decls:1,vars:1,consts:[[1,"flex","items-start","gap-5","p-5","rounded-2xl","bg-[#1a1625]","text-slate-200","transition-all","duration-300","border","border-[#2d2747]","hover:bg-[#252039]","hover:shadow-lg","hover:shadow-purple-900/20","hover:-translate-y-0.5",3,"bg-[#1f1b2e]"],[1,"flex","items-start","gap-5","p-5","rounded-2xl","bg-[#1a1625]","text-slate-200","transition-all","duration-300","border","border-[#2d2747]","hover:bg-[#252039]","hover:shadow-lg","hover:shadow-purple-900/20","hover:-translate-y-0.5"],[1,"w-12","h-12","rounded-full","bg-gradient-to-br","from-purple-500","to-purple-700","flex","items-center","justify-center","font-bold","text-white","shrink-0","shadow-md","shadow-purple-500/30",3,"routerLink"],[1,"flex-1","flex","flex-col","gap-2"],[1,"text-sm","leading-relaxed"],[1,"font-semibold","text-white","hover:text-purple-300","cursor-pointer","transition-colors",3,"routerLink"],[1,"text-slate-400","ml-1"],[1,"text-xs","text-slate-500","flex","items-center","gap-1"],["fill","currentColor","viewBox","0 0 20 20",1,"w-3","h-3"],["d","M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z"],[1,"flex","items-center","gap-2"],[1,"w-3","h-3","rounded-full","bg-purple-500","my-auto","animate-pulse","shadow-lg","shadow-purple-500/50"],["mat-fab","","extended","true"],["mat-fab","","extended","true",3,"click"]],template:function(t,i){if(t&1&&_e(0,Dp,15,14,"div",0),t&2){let r;ye((r=i.notification())?0:-1,r)}},dependencies:[xt,rn,fi],encapsulation:2})};var Xi=class n{_httpClient=Q(Qo);getNotifications(){return this._httpClient.get(`${on.backendUrl}notifications`)}static \u0275fac=function(t){return new(t||n)};static \u0275prov=Ct({token:n,factory:n.\u0275fac,providedIn:"root"})};var Mp=(n,e)=>e.entityId;function Lp(n,e){if(n&1){let t=we();S(0,"app-notification-item",2),ge("actionPerformed",function(r){Se(t);let s=ae();return Te(s.handleEvent(r))}),E()}if(n&2){let t=e.$implicit;se("notification",t)}}var Ji=class n{_notificationsService=Q(Xi);webSocketService=Q(At);destroy$=new en;notifications=[];ngOnInit(){this.getNotifications(),this.webSocketService.notifications$.pipe(tn(this.destroy$),ai(e=>e!==null)).subscribe(e=>this.addNotification(e))}addNotification(e){this.notifications.push(Dt(Oe({},e),{createdAt:new Date(e.createdAt).toLocaleString(),isRead:!1}))}getNotifications(){this._notificationsService.getNotifications().subscribe({next:e=>{this.notifications=e.data},error:e=>{console.error(e)}})}handleEvent(e){this.notifications=this.notifications.filter(t=>t.entityId!==e)}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-notification-requests"]],decls:3,vars:0,consts:[[1,"flex","flex-col","gap-3","p-5"],[3,"notification"],[3,"actionPerformed","notification"]],template:function(t,i){t&1&&(S(0,"div",0),Ue(1,Lp,1,1,"app-notification-item",1,Mp),E()),t&2&&(I(),Ve(i.notifications))},dependencies:[Qi],encapsulation:2})};var Yi=class n{transform(e){switch(e){case"PENDING":return"Pendiente";case"ACCEPTED":return"Aceptada";case"REJECTED":return"Rechazada";default:return e}}static \u0275fac=function(t){return new(t||n)};static \u0275pipe=Ao({name:"friendStatus",type:n,pure:!0})};var Iu=n=>["/profile/public-profile",n],Ou=(n,e)=>e.id;function qp(n,e){n&1&&(S(0,"div",4),D(1,"Cargando..."),E())}function Fp(n,e){n&1&&(S(0,"p",5),D(1,"No has enviado solicitudes todav\xEDa."),E())}function jp(n,e){if(n&1){let t=we();S(0,"div",7)(1,"div")(2,"p",8),D(3),E(),S(4,"p",9),D(5),Pr(6,"friendStatus"),E()(),S(7,"div",10)(8,"button",11)(9,"mat-icon",12),D(10,"visibility"),E()(),S(11,"button",13),ge("click",function(){let r=Se(t).$implicit,s=ae(2);return Te(s.cancelRequest(r.receiverId))}),D(12," Cancelar "),E()()()}if(n&2){let t=e.$implicit;I(3),Ae(" ",(t.user==null?null:t.user.fullName)||"Usuario desconocido"," "),I(2),Ae("Estado: ",Dr(6,3,t.status)),I(3),se("routerLink",nn(5,Iu,t.receiverId))}}function Bp(n,e){if(n&1&&(S(0,"div",6),Ue(1,jp,13,7,"div",7,Ou),E()),n&2){let t=ae();I(),Ve(t.sentRequests)}}function Up(n,e){n&1&&(S(0,"div",4),D(1,"Cargando..."),E())}function Vp(n,e){n&1&&(S(0,"p",5),D(1,"No tienes solicitudes nuevas."),E())}function Hp(n,e){if(n&1){let t=we();S(0,"div",14)(1,"div")(2,"p",8),D(3),E(),S(4,"p",9),D(5),Pr(6,"friendStatus"),E()(),S(7,"div",10)(8,"a",15)(9,"mat-icon",12),D(10,"visibility"),E()(),S(11,"button",16),ge("click",function(){let r=Se(t).$implicit,s=ae(2);return Te(s.acceptRequest(r.senderId))}),D(12," Aceptar "),E(),S(13,"button",17),ge("click",function(){let r=Se(t).$implicit,s=ae(2);return Te(s.rejectRequest(r.senderId))}),D(14," Rechazar "),E()()()}if(n&2){let t=e.$implicit;I(3),Ae(" ",(t.user==null?null:t.user.fullName)||"Usuario desconocido"," "),I(2),Ae("Estado: ",Dr(6,3,t.status)),I(3),se("routerLink",nn(5,Iu,t.senderId))}}function zp(n,e){if(n&1&&(S(0,"div",6),Ue(1,Hp,15,7,"div",14,Ou),E()),n&2){let t=ae();I(),Ve(t.receivedRequests)}}var er=class n{_friendRequestService=Q(gi);_userService=Q(va);_notificationsService=Q(sn);webSocketService=Q(At);destroy$=new en;sentRequests=[];receivedRequests=[];loadingSent=!1;loadingReceived=!1;ngOnInit(){this.loadSentRequests(),this.loadReceivedRequests(),this.webSocketService.friendRequests$.pipe(tn(this.destroy$)).subscribe(e=>{if(e.length>0){let t=e[0],i={id:t.id,senderId:t.senderId,receiverId:t.receiverId,status:"PENDING",createdAt:new Date().toString()};this.receivedRequests.push(i)}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadSentRequests(){this.loadingSent=!0,this._friendRequestService.getSendFriendRequests().subscribe({next:e=>{let t=e.data||[];if(t.length===0){this.sentRequests=[],this.loadingSent=!1;return}let i=t.map(r=>this._userService.getUserById(r.receiverId));Nr(i).subscribe({next:r=>{this.sentRequests=t.map((s,o)=>Dt(Oe({},s),{user:r[o]})),this.loadingSent=!1},error:r=>{console.error("\u274C Error al obtener usuarios enviados:",r),this.loadingSent=!1}})},error:e=>{console.error("\u274C Error al obtener solicitudes enviadas:",e),this.loadingSent=!1}})}loadReceivedRequests(){this.loadingReceived=!0,this._friendRequestService.getReceivedFriendRequests().subscribe({next:e=>{let t=e.data||[];if(t.length===0){this.receivedRequests=[],this.loadingReceived=!1;return}let i=t.map(r=>this._userService.getUserById(r.senderId));Nr(i).subscribe({next:r=>{this.receivedRequests=t.map((s,o)=>Dt(Oe({},s),{user:r[o]})),this.loadingReceived=!1},error:r=>{console.error("\u274C Error al obtener usuarios recibidos:",r),this.loadingReceived=!1}})},error:e=>{console.error("\u274C Error al obtener solicitudes recibidas:",e),this.loadingReceived=!1}})}acceptRequest(e){this._friendRequestService.acceptFriendRequest(e).subscribe({next:()=>{this.loadReceivedRequests()},error:t=>{console.error("\u274C Error al aceptar solicitud:",t)}})}rejectRequest(e){this._friendRequestService.rejectFriendRequest(e).subscribe({next:()=>{this.loadReceivedRequests()},error:t=>{console.error("\u274C Error al rechazar solicitud:",t)}})}cancelRequest(e){this._friendRequestService.cancelFriendRequest(e).subscribe({next:t=>{this._notificationsService.success(t.message||"Solicitud cancelada correctamente"),this.loadSentRequests()},error:t=>{console.error("\u274C Error al cancelar solicitud:",t);let i=t?.error?.message||"No se pudo cancelar la solicitud";this._notificationsService.error(i)}})}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-friend-requests"]],decls:19,vars:2,consts:[[1,"bg-[#F0F4F9]/70","backdrop-blur-sm","rounded-lg","shadow-lg","border","border-[#757575]/60","w-full","mx-auto","p-5","flex","flex-col","gap-6"],[1,"flex","items-center","gap-2","mb-3"],[1,"text-[#9811fb]"],[1,"font-semibold","text-lg","md:text-xl","text-gray-800"],[1,"flex","justify-center","items-cente","text-black"],[1,"text-gray-500","text-sm"],[1,"flex","flex-col","gap-2","max-h-[200px]","md:max-h-[300px]","overflow-y-auto","pr-2"],[1,"flex","justify-between","items-center","bg-white","rounded-lg","shadow-lg","border-[0.5px]","border-[#757575]","p-3","hover:shadow-md","transition-all"],[1,"text-sm","text-gray-800","font-medium"],[1,"text-xs","text-gray-500"],[1,"flex","gap-2"],["title","Ver perfil",1,"text-[#9811fb]","hover:text-[#7d0fd0]","transition-colors","px-[7px]","pb-[7px]","pt-[5px]","rounded-full","hover:bg-[#9811fb]/10","flex","justify-center","items-center",3,"routerLink"],[1,"text-lg"],[1,"bg-red-500","text-white","text-xs","px-3","py-1","rounded-md","hover:bg-red-600","transition-all",3,"click"],[1,"flex","justify-between","items-center","bg-white","rounded-lg","border","border-gray-300","p-3","shadow-sm","hover:shadow-md","transition-all"],["title","Ver perfil",1,"text-[#9811fb]","hover:text-[#7d0fd0]","transition-colors","p-2","rounded-full","hover:bg-[#9811fb]/10",3,"routerLink"],[1,"bg-[#9811fb]","text-white","text-xs","px-3","py-1","rounded-md","hover:bg-[#7d0fd0]",3,"click"],[1,"bg-gray-200","text-gray-700","text-xs","px-3","py-1","rounded-md","hover:bg-gray-300",3,"click"]],template:function(t,i){t&1&&(S(0,"article",0)(1,"section")(2,"div",1)(3,"mat-icon",2),D(4,"send"),E(),S(5,"span",3),D(6,"Solicitudes enviadas"),E()(),_e(7,qp,2,0,"div",4)(8,Fp,2,0,"p",5)(9,Bp,3,0,"div",6),E(),S(10,"section")(11,"div",1)(12,"mat-icon",2),D(13,"mail"),E(),S(14,"h2",3),D(15,"Solicitudes recibidas"),E()(),_e(16,Up,2,0,"div",4)(17,Vp,2,0,"p",5)(18,zp,3,0,"div",6),E()()),t&2&&(I(7),ye(i.loadingSent?7:i.sentRequests.length===0?8:9),I(9),ye(i.loadingReceived?16:i.receivedRequests.length===0?17:18))},dependencies:[et,Ye,xt,Yi],encapsulation:2})};function Wp(n,e){n&1&&(S(0,"mat-icon",2),D(1,"people"),E(),S(2,"span",3),D(3,"Amigos"),E())}function $p(n,e){n&1&&(S(0,"mat-icon",2),D(1,"notifications"),E(),D(2," Notificaciones "))}var tr=class n{static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-notification"]],decls:8,vars:0,consts:[[1,"bg-[#F0F4F9]/70","backdrop-blur-sm","rounded-lg","shadow-lg","border-[0.5px]","border-[#757575]"],["mat-tab-label",""],[1,"mr-1"],[1,"ml-1"]],template:function(t,i){t&1&&(S(0,"article",0)(1,"mat-tab-group")(2,"mat-tab"),kt(3,Wp,4,0,"ng-template",1),ve(4,"app-friend-requests"),E(),S(5,"mat-tab"),kt(6,$p,3,0,"ng-template",1),ve(7,"app-notification-requests"),E()()())},dependencies:[ba,ga,_a,ya,et,Ye,Ji,er],encapsulation:2})};var Gp=["sidebar"];function Kp(n,e){n&1&&(S(0,"div",4)(1,"div",5),ve(2,"app-loader"),E()())}function Zp(n,e){n&1&&(S(0,"div",7),ve(1,"app-nav-bar",8),S(2,"main",9),ve(3,"router-outlet"),E()())}function Qp(n,e){if(n&1){let t=we();S(0,"app-side-bar",16,0),ge("sidebarStateChanged",function(r){Se(t);let s=ae(3);return Te(s.onSidebarStateChanged(r))}),E()}}function Xp(n,e){if(n&1){let t=we();S(0,"div",17),ge("click",function(){Se(t);let r=ae(3);return Te(r.closeSidebarFromOverlay())}),E()}}function Jp(n,e){if(n&1){let t=we();S(0,"div",18),ge("click",function(){Se(t);let r=ae(3);return Te(r.closeNotifications())}),E()}if(n&2){let t=ae(3);Mt("closing",t.isClosingNotifications)}}function Yp(n,e){if(n&1&&(S(0,"div",19),ve(1,"app-notification"),E()),n&2){let t=ae(3);Mt("closing",t.isClosingNotifications)}}function em(n,e){if(n&1){let t=we();Or(0),kt(1,Qp,2,0,"app-side-bar",10)(2,Xp,1,0,"div",11),S(3,"div",7)(4,"button",12),ge("click",function(){Se(t);let r=ae(2);return Te(r.toggleNotifications())}),S(5,"mat-icon"),D(6,"notifications"),E()(),kt(7,Jp,1,2,"div",13)(8,Yp,2,2,"div",14),S(9,"main",15),ve(10,"router-outlet"),E()(),Ar()}if(n&2){let t=ae(2);I(),se("ngIf",t.showSidebar&&t.hasValidRole),I(),se("ngIf",t.showSidebar&&t.hasValidRole&&!t.isSidebarCollapsed),I(),Mt("sidebar-open-mobile",!t.isSidebarCollapsed)("sidebar-expanded-desktop",!t.isSidebarCollapsed),I(),Mt("active",t.showNotifications),I(3),se("ngIf",t.showNotifications),I(),se("ngIf",t.showNotifications)}}function tm(n,e){if(n&1&&(Or(0),kt(1,Zp,4,0,"div",6)(2,em,11,10,"ng-container",3),Ar()),n&2){let t=ae();I(),se("ngIf",!t.isLoggedIn),I(),se("ngIf",t.isLoggedIn)}}var nr=class n{sidebar;_supabaseService=Q(an);_tokenService=Q(ln);_router=Q(Nt);sub;initSub;roleSub;showSidebar=!0;isReady=!1;isLoggedIn=!1;isInitializing=!0;isTransitioning=!1;showNotifications=!1;isClosingNotifications=!1;hasValidRole=!1;isSidebarCollapsed=!0;constructor(){this.roleSub=this._tokenService.userRole$.subscribe(e=>{this.hasValidRole=!!e&&e!==""}),this._router.events.pipe(ai(e=>e instanceof di)).subscribe(e=>{let t=["/profile/register-profile"];this.showSidebar=!t.some(i=>e.urlAfterRedirects.includes(i))})}ngOnInit(){return Je(this,null,function*(){this.initSub=this._supabaseService.isInitialized$.subscribe(e=>Je(this,null,function*(){if(e)try{let t=yield this._supabaseService.getSession();this.isLoggedIn=!!t.data.session,this.sub=this._supabaseService.user$.subscribe(i=>{let r=this.isLoggedIn,s=!!i;r!==s&&this.isReady?(this.isTransitioning=!0,setTimeout(()=>{this.isLoggedIn=s,this.isTransitioning=!1},400)):this.isLoggedIn=s}),setTimeout(()=>{this.isReady=!0,this.isInitializing=!1},800)}catch(t){console.error("Error al obtener sesi\xF3n:",t),this.isReady=!0,this.isInitializing=!1}})),setTimeout(()=>{this.isInitializing&&(this.isReady=!0,this.isInitializing=!1)},1500)})}ngOnDestroy(){this.sub?.unsubscribe(),this.initSub?.unsubscribe(),this.roleSub?.unsubscribe()}toggleNotifications(){this.showNotifications?this.closeNotifications():(this.showNotifications=!0,this.isClosingNotifications=!1)}closeNotifications(){this.isClosingNotifications=!0,setTimeout(()=>{this.showNotifications=!1,this.isClosingNotifications=!1},300)}onSidebarStateChanged(e){this.isSidebarCollapsed=e}closeSidebarFromOverlay(){this.sidebar&&this.sidebar.closeSidebar()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-default-layout"]],viewQuery:function(t,i){if(t&1&&Mo(Gp,5),t&2){let r;Lo(r=qo())&&(i.sidebar=r.first)}},decls:3,vars:2,consts:[["sidebar",""],[1,"flex","relative","min-h-screen","bg-white","text-white"],["class","flex flex-col items-center justify-center w-full h-screen gap-3",4,"ngIf"],[4,"ngIf"],[1,"flex","flex-col","items-center","justify-center","w-full","h-screen","gap-3"],[1,"flex","justify-center","items-center"],["class","app-container w-full animate-fade-in",4,"ngIf"],[1,"app-container","w-full","animate-fade-in"],[1,"brand-nav-bar"],[1,"main","w-full"],[3,"sidebarStateChanged",4,"ngIf"],["class","sidebar-overlay md:hidden",3,"click",4,"ngIf"],[1,"notification-button","rounded-full","px-4","py-3",3,"click"],["class","notification-overlay",3,"closing","click",4,"ngIf"],["class","notification-panel w-[95%] md:w-[65%] lg:w-[45%] 2xl:w-[30%] 3xl:w-[30%] min-h-9",3,"closing",4,"ngIf"],[1,"main","pl-[64px]"],[3,"sidebarStateChanged"],[1,"sidebar-overlay","md:hidden",3,"click"],[1,"notification-overlay",3,"click"],[1,"notification-panel","w-[95%]","md:w-[65%]","lg:w-[45%]","2xl:w-[30%]","3xl:w-[30%]","min-h-9"]],template:function(t,i){t&1&&(S(0,"article",1),kt(1,Kp,3,0,"div",2)(2,tm,3,2,"ng-container",3),E()),t&2&&(I(),se("ngIf",i.isInitializing||!i.isReady||i.isTransitioning),I(),se("ngIf",i.isReady&&!i.isTransitioning))},dependencies:[hi,Si,wi,tr,et,Ye,rn,ui,Wo,mi],styles:[".notification-button[_ngcontent-%COMP%]{position:fixed;top:30px;right:30px;z-index:1000;background-color:#9811fb;color:#fff;box-shadow:0 4px 8px #0000004d;transition:all .3s ease}.notification-button[_ngcontent-%COMP%]:hover{background-color:#fff;color:#000;transform:scale(1.1)}.notification-button.active[_ngcontent-%COMP%]{background-color:#9811fb}.notification-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:24px}.notification-overlay[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:999;animation:_ngcontent-%COMP%_fadeIn .2s ease-in-out}.notification-overlay.closing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeOut .3s ease-in-out}.notification-panel[_ngcontent-%COMP%]{position:fixed;top:100px;right:20px;z-index:1001;animation:_ngcontent-%COMP%_slideInRight .3s ease-in-out;overflow:hidden}.notification-panel.closing[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideOutRight .3s ease-in-out}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}@keyframes _ngcontent-%COMP%_fadeOut{0%{opacity:1}to{opacity:0}}@keyframes _ngcontent-%COMP%_slideInRight{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}@keyframes _ngcontent-%COMP%_slideOutRight{0%{transform:translate(0);opacity:1}to{transform:translate(100%);opacity:0}}.sidebar-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#00000080;z-index:40;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}@media (min-width: 768px){.sidebar-overlay[_ngcontent-%COMP%]{display:none}}@media (max-width: 768px){.notification-panel[_ngcontent-%COMP%]{top:90px;right:10px}.notification-button[_ngcontent-%COMP%]{top:20px;right:20px}}"]})};var ir=()=>Je(null,null,function*(){let n=Q(an),e=Q(Nt);yield n.waitForAuthReady();let{data:t}=yield n.getSession();return t.session?!0:e.createUrlTree(["/auth/login"])});var Au=[{path:"",redirectTo:"/home",pathMatch:"full"},{path:"",component:nr,children:[{path:"",loadChildren:()=>import("./chunk-XSMJIUHY.js").then(n=>n.publicRoutes)},{path:"auth",loadChildren:()=>import("./chunk-2LBQEIND.js").then(n=>n.authRoutes)},{path:"profile",loadChildren:()=>import("./chunk-YVSL5RF2.js").then(n=>n.profileRoutes),canActivate:[ir]},{path:"organizational",loadChildren:()=>import("./chunk-X6WTEVYI.js").then(n=>n.organizationalRoutes),canActivate:[ir,qr]},{path:"movies",loadChildren:()=>import("./chunk-L4OINLDS.js").then(n=>n.moviesRoutes),canActivate:[ir,qr]}]},{path:"**",redirectTo:"/home"}];function nm(n){let e=n,t=Math.floor(Math.abs(n)),i=n.toString().replace(/^[^.]*\.?/,"").length,r=parseInt(n.toString().replace(/^[^e]*(e([-+]?\d+))?/,"$2"))||0;return e===1?1:r===0&&t!==0&&t%1e6===0&&i===0||!(r>=0&&r<=5)?4:5}var Pu=["es",[["a.\xA0m.","p.\xA0m."]],void 0,[["D","L","M","X","J","V","S"],["dom","lun","mar","mi\xE9","jue","vie","s\xE1b"],["domingo","lunes","martes","mi\xE9rcoles","jueves","viernes","s\xE1bado"],["DO","LU","MA","MI","JU","VI","SA"]],void 0,[["E","F","M","A","M","J","J","A","S","O","N","D"],["ene","feb","mar","abr","may","jun","jul","ago","sept","oct","nov","dic"],["enero","febrero","marzo","abril","mayo","junio","julio","agosto","septiembre","octubre","noviembre","diciembre"]],void 0,[["a. C.","d. C."],void 0,["antes de Cristo","despu\xE9s de Cristo"]],1,[6,0],["d/M/yy","d MMM y","d 'de' MMMM 'de' y","EEEE, d 'de' MMMM 'de' y"],["H:mm","H:mm:ss","H:mm:ss z","H:mm:ss (zzzz)"],["{1}, {0}",void 0,void 0,void 0],[",",".",";","%","+","-","E","\xD7","\u2030","\u221E","NaN",":"],["#,##0.###","#,##0\xA0%","#,##0.00\xA0\xA4","#E0"],"EUR","\u20AC","euro",{AUD:[void 0,"$"],BRL:[void 0,"R$"],BYN:[void 0,"\u0440."],CAD:[void 0,"$"],CNY:[void 0,"\xA5"],EGP:[],ESP:["\u20A7"],GBP:[void 0,"\xA3"],HKD:[void 0,"$"],ILS:[void 0,"\u20AA"],INR:[void 0,"\u20B9"],JPY:[void 0,"\xA5"],KRW:[void 0,"\u20A9"],MXN:[void 0,"$"],NZD:[void 0,"$"],PHP:[void 0,"\u20B1"],RON:[void 0,"L"],THB:["\u0E3F"],TWD:[void 0,"NT$"],USD:["US$","$"],XAF:[],XCD:[void 0,"$"],XOF:[]},"ltr",nm];function Du(n){return new Y(3e3,!1)}function im(){return new Y(3100,!1)}function rm(){return new Y(3101,!1)}function sm(n){return new Y(3001,!1)}function om(n){return new Y(3003,!1)}function am(n){return new Y(3004,!1)}function Lu(n,e){return new Y(3005,!1)}function qu(){return new Y(3006,!1)}function Fu(){return new Y(3007,!1)}function ju(n,e){return new Y(3008,!1)}function Bu(n){return new Y(3002,!1)}function Uu(n,e,t,i,r){return new Y(3010,!1)}function Vu(){return new Y(3011,!1)}function Hu(){return new Y(3012,!1)}function zu(){return new Y(3200,!1)}function Wu(){return new Y(3202,!1)}function $u(){return new Y(3013,!1)}function Gu(n){return new Y(3014,!1)}function Ku(n){return new Y(3015,!1)}function Zu(n){return new Y(3016,!1)}function Qu(n,e){return new Y(3404,!1)}function lm(n){return new Y(3502,!1)}function Xu(n){return new Y(3503,!1)}function Ju(){return new Y(3300,!1)}function Yu(n){return new Y(3504,!1)}function ed(n){return new Y(3301,!1)}function td(n,e){return new Y(3302,!1)}function nd(n){return new Y(3303,!1)}function id(n,e){return new Y(3400,!1)}function rd(n){return new Y(3401,!1)}function sd(n){return new Y(3402,!1)}function od(n,e){return new Y(3505,!1)}function Tt(n){switch(n.length){case 0:return new qt;case 1:return n[0];default:return new pi(n)}}function Hs(n,e,t=new Map,i=new Map){let r=[],s=[],o=-1,a=null;if(e.forEach(l=>{let u=l.get("offset"),f=u==o,h=f&&a||new Map;l.forEach((y,C)=>{let w=C,R=y;if(C!=="offset")switch(w=n.normalizePropertyName(w,r),R){case Rn:R=t.get(C);break;case He:R=i.get(C);break;default:R=n.normalizeStyleValue(C,w,R,r);break}h.set(w,R)}),f||s.push(h),a=h,o=u}),r.length)throw lm(r);return s}function rr(n,e,t,i){switch(e){case"start":n.onStart(()=>i(t&&Bs(t,"start",n)));break;case"done":n.onDone(()=>i(t&&Bs(t,"done",n)));break;case"destroy":n.onDestroy(()=>i(t&&Bs(t,"destroy",n)));break}}function Bs(n,e,t){let i=t.totalTime,r=!!t.disabled,s=sr(n.element,n.triggerName,n.fromState,n.toState,e||n.phaseName,i??n.totalTime,r),o=n._data;return o!=null&&(s._data=o),s}function sr(n,e,t,i,r="",s=0,o){return{element:n,triggerName:e,fromState:t,toState:i,phaseName:r,totalTime:s,disabled:!!o}}function ke(n,e,t){let i=n.get(e);return i||n.set(e,i=t),i}function zs(n){let e=n.indexOf(":"),t=n.substring(1,e),i=n.slice(e+1);return[t,i]}var cm=typeof document>"u"?null:document.documentElement;function or(n){let e=n.parentNode||n.host||null;return e===cm?null:e}function um(n){return n.substring(1,6)=="ebkit"}var Kt=null,Mu=!1;function ad(n){Kt||(Kt=dm()||{},Mu=Kt.style?"WebkitAppearance"in Kt.style:!1);let e=!0;return Kt.style&&!um(n)&&(e=n in Kt.style,!e&&Mu&&(e="Webkit"+n.charAt(0).toUpperCase()+n.slice(1)in Kt.style)),e}function dm(){return typeof document<"u"?document.body:null}function Ws(n,e){for(;e;){if(e===n)return!0;e=or(e)}return!1}function $s(n,e,t){if(t)return Array.from(n.querySelectorAll(e));let i=n.querySelector(e);return i?[i]:[]}var hm=1e3,Gs="{{",fm="}}",Ks="ng-enter",ar="ng-leave",Yn="ng-trigger",ei=".ng-trigger",Zs="ng-animating",lr=".ng-animating";function lt(n){if(typeof n=="number")return n;let e=n.match(/^(-?[\.\d]+)(m?s)/);return!e||e.length<2?0:Us(parseFloat(e[1]),e[2])}function Us(n,e){switch(e){case"s":return n*hm;default:return n}}function ti(n,e,t){return n.hasOwnProperty("duration")?n:mm(n,e,t)}var pm=/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i;function mm(n,e,t){let i,r=0,s="";if(typeof n=="string"){let o=n.match(pm);if(o===null)return e.push(Du(n)),{duration:0,delay:0,easing:""};i=Us(parseFloat(o[1]),o[2]);let a=o[3];a!=null&&(r=Us(parseFloat(a),o[4]));let l=o[5];l&&(s=l)}else i=n;if(!t){let o=!1,a=e.length;i<0&&(e.push(im()),o=!0),r<0&&(e.push(rm()),o=!0),o&&e.splice(a,0,Du(n))}return{duration:i,delay:r,easing:s}}function ld(n){return n.length?n[0]instanceof Map?n:n.map(e=>new Map(Object.entries(e))):[]}function Ke(n,e,t){e.forEach((i,r)=>{let s=cr(r);t&&!t.has(r)&&t.set(r,n.style[s]),n.style[s]=i})}function Pt(n,e){e.forEach((t,i)=>{let r=cr(i);n.style[r]=""})}function bn(n){return Array.isArray(n)?n.length==1?n[0]:da(n):n}function cd(n,e,t){let i=e.params||{},r=Qs(n);r.length&&r.forEach(s=>{i.hasOwnProperty(s)||t.push(sm(s))})}var Vs=new RegExp(`${Gs}\\s*(.+?)\\s*${fm}`,"g");function Qs(n){let e=[];if(typeof n=="string"){let t;for(;t=Vs.exec(n);)e.push(t[1]);Vs.lastIndex=0}return e}function vn(n,e,t){let i=`${n}`,r=i.replace(Vs,(s,o)=>{let a=e[o];return a==null&&(t.push(om(o)),a=""),a.toString()});return r==i?n:r}var gm=/-+([a-z0-9])/g;function cr(n){return n.replace(gm,(...e)=>e[1].toUpperCase())}function ud(n,e){return n===0||e===0}function dd(n,e,t){if(t.size&&e.length){let i=e[0],r=[];if(t.forEach((s,o)=>{i.has(o)||r.push(o),i.set(o,s)}),r.length)for(let s=1;s<e.length;s++){let o=e[s];r.forEach(a=>o.set(a,ur(n,a)))}}return e}function Ne(n,e,t){switch(e.type){case X.Trigger:return n.visitTrigger(e,t);case X.State:return n.visitState(e,t);case X.Transition:return n.visitTransition(e,t);case X.Sequence:return n.visitSequence(e,t);case X.Group:return n.visitGroup(e,t);case X.Animate:return n.visitAnimate(e,t);case X.Keyframes:return n.visitKeyframes(e,t);case X.Style:return n.visitStyle(e,t);case X.Reference:return n.visitReference(e,t);case X.AnimateChild:return n.visitAnimateChild(e,t);case X.AnimateRef:return n.visitAnimateRef(e,t);case X.Query:return n.visitQuery(e,t);case X.Stagger:return n.visitStagger(e,t);default:throw am(e.type)}}function ur(n,e){return window.getComputedStyle(n)[e]}var po=(()=>{class n{validateStyleProperty(t){return ad(t)}containsElement(t,i){return Ws(t,i)}getParentElement(t){return or(t)}query(t,i,r){return $s(t,i,r)}computeStyle(t,i,r){return r||""}animate(t,i,r,s,o,a=[],l){return new qt(r,s)}static \u0275fac=function(i){return new(i||n)};static \u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})(),Qt=class{static NOOP=new po},Xt=class{};var _m=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]),mr=class extends Xt{normalizePropertyName(e,t){return cr(e)}normalizeStyleValue(e,t,i,r){let s="",o=i.toString().trim();if(_m.has(t)&&i!==0&&i!=="0")if(typeof i=="number")s="px";else{let a=i.match(/^[+-]?[\d\.]+([a-z]*)$/);a&&a[1].length==0&&r.push(Lu(e,i))}return o+s}};var gr="*";function ym(n,e){let t=[];return typeof n=="string"?n.split(/\s*,\s*/).forEach(i=>bm(i,t,e)):t.push(n),t}function bm(n,e,t){if(n[0]==":"){let l=vm(n,t);if(typeof l=="function"){e.push(l);return}n=l}let i=n.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(i==null||i.length<4)return t.push(Ku(n)),e;let r=i[1],s=i[2],o=i[3];e.push(hd(r,o));let a=r==gr&&o==gr;s[0]=="<"&&!a&&e.push(hd(o,r))}function vm(n,e){switch(n){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(t,i)=>parseFloat(i)>parseFloat(t);case":decrement":return(t,i)=>parseFloat(i)<parseFloat(t);default:return e.push(Zu(n)),"* => *"}}var dr=new Set(["true","1"]),hr=new Set(["false","0"]);function hd(n,e){let t=dr.has(n)||hr.has(n),i=dr.has(e)||hr.has(e);return(r,s)=>{let o=n==gr||n==r,a=e==gr||e==s;return!o&&t&&typeof r=="boolean"&&(o=r?dr.has(n):hr.has(n)),!a&&i&&typeof s=="boolean"&&(a=s?dr.has(e):hr.has(e)),o&&a}}var Sd=":self",Em=new RegExp(`s*${Sd}s*,?`,"g");function Td(n,e,t,i){return new no(n).build(e,t,i)}var fd="",no=class{_driver;constructor(e){this._driver=e}build(e,t,i){let r=new io(t);return this._resetContextStyleTimingState(r),Ne(this,bn(e),r)}_resetContextStyleTimingState(e){e.currentQuerySelector=fd,e.collectedStyles=new Map,e.collectedStyles.set(fd,new Map),e.currentTime=0}visitTrigger(e,t){let i=t.queryCount=0,r=t.depCount=0,s=[],o=[];return e.name.charAt(0)=="@"&&t.errors.push(qu()),e.definitions.forEach(a=>{if(this._resetContextStyleTimingState(t),a.type==X.State){let l=a,u=l.name;u.toString().split(/\s*,\s*/).forEach(f=>{l.name=f,s.push(this.visitState(l,t))}),l.name=u}else if(a.type==X.Transition){let l=this.visitTransition(a,t);i+=l.queryCount,r+=l.depCount,o.push(l)}else t.errors.push(Fu())}),{type:X.Trigger,name:e.name,states:s,transitions:o,queryCount:i,depCount:r,options:null}}visitState(e,t){let i=this.visitStyle(e.styles,t),r=e.options&&e.options.params||null;if(i.containsDynamicStyles){let s=new Set,o=r||{};i.styles.forEach(a=>{a instanceof Map&&a.forEach(l=>{Qs(l).forEach(u=>{o.hasOwnProperty(u)||s.add(u)})})}),s.size&&t.errors.push(ju(e.name,[...s.values()]))}return{type:X.State,name:e.name,style:i,options:r?{params:r}:null}}visitTransition(e,t){t.queryCount=0,t.depCount=0;let i=Ne(this,bn(e.animation),t),r=ym(e.expr,t.errors);return{type:X.Transition,matchers:r,animation:i,queryCount:t.queryCount,depCount:t.depCount,options:Zt(e.options)}}visitSequence(e,t){return{type:X.Sequence,steps:e.steps.map(i=>Ne(this,i,t)),options:Zt(e.options)}}visitGroup(e,t){let i=t.currentTime,r=0,s=e.steps.map(o=>{t.currentTime=i;let a=Ne(this,o,t);return r=Math.max(r,t.currentTime),a});return t.currentTime=r,{type:X.Group,steps:s,options:Zt(e.options)}}visitAnimate(e,t){let i=Cm(e.timings,t.errors);t.currentAnimateTimings=i;let r,s=e.styles?e.styles:Pe({});if(s.type==X.Keyframes)r=this.visitKeyframes(s,t);else{let o=e.styles,a=!1;if(!o){a=!0;let u={};i.easing&&(u.easing=i.easing),o=Pe(u)}t.currentTime+=i.duration+i.delay;let l=this.visitStyle(o,t);l.isEmptyStep=a,r=l}return t.currentAnimateTimings=null,{type:X.Animate,timings:i,style:r,options:null}}visitStyle(e,t){let i=this._makeStyleAst(e,t);return this._validateStyleAst(i,t),i}_makeStyleAst(e,t){let i=[],r=Array.isArray(e.styles)?e.styles:[e.styles];for(let a of r)typeof a=="string"?a===He?i.push(a):t.errors.push(Bu(a)):i.push(new Map(Object.entries(a)));let s=!1,o=null;return i.forEach(a=>{if(a instanceof Map&&(a.has("easing")&&(o=a.get("easing"),a.delete("easing")),!s)){for(let l of a.values())if(l.toString().indexOf(Gs)>=0){s=!0;break}}}),{type:X.Style,styles:i,easing:o,offset:e.offset,containsDynamicStyles:s,options:null}}_validateStyleAst(e,t){let i=t.currentAnimateTimings,r=t.currentTime,s=t.currentTime;i&&s>0&&(s-=i.duration+i.delay),e.styles.forEach(o=>{typeof o!="string"&&o.forEach((a,l)=>{let u=t.collectedStyles.get(t.currentQuerySelector),f=u.get(l),h=!0;f&&(s!=r&&s>=f.startTime&&r<=f.endTime&&(t.errors.push(Uu(l,f.startTime,f.endTime,s,r)),h=!1),s=f.startTime),h&&u.set(l,{startTime:s,endTime:r}),t.options&&cd(a,t.options,t.errors)})})}visitKeyframes(e,t){let i={type:X.Keyframes,styles:[],options:null};if(!t.currentAnimateTimings)return t.errors.push(Vu()),i;let r=1,s=0,o=[],a=!1,l=!1,u=0,f=e.steps.map(W=>{let N=this._makeStyleAst(W,t),T=N.offset!=null?N.offset:wm(N.styles),q=0;return T!=null&&(s++,q=N.offset=T),l=l||q<0||q>1,a=a||q<u,u=q,o.push(q),N});l&&t.errors.push(Hu()),a&&t.errors.push(zu());let h=e.steps.length,y=0;s>0&&s<h?t.errors.push(Wu()):s==0&&(y=r/(h-1));let C=h-1,w=t.currentTime,R=t.currentAnimateTimings,z=R.duration;return f.forEach((W,N)=>{let T=y>0?N==C?1:y*N:o[N],q=T*z;t.currentTime=w+R.delay+q,R.duration=q,this._validateStyleAst(W,t),W.offset=T,i.styles.push(W)}),i}visitReference(e,t){return{type:X.Reference,animation:Ne(this,bn(e.animation),t),options:Zt(e.options)}}visitAnimateChild(e,t){return t.depCount++,{type:X.AnimateChild,options:Zt(e.options)}}visitAnimateRef(e,t){return{type:X.AnimateRef,animation:this.visitReference(e.animation,t),options:Zt(e.options)}}visitQuery(e,t){let i=t.currentQuerySelector,r=e.options||{};t.queryCount++,t.currentQuery=e;let[s,o]=Sm(e.selector);t.currentQuerySelector=i.length?i+" "+s:s,ke(t.collectedStyles,t.currentQuerySelector,new Map);let a=Ne(this,bn(e.animation),t);return t.currentQuery=null,t.currentQuerySelector=i,{type:X.Query,selector:s,limit:r.limit||0,optional:!!r.optional,includeSelf:o,animation:a,originalSelector:e.selector,options:Zt(e.options)}}visitStagger(e,t){t.currentQuery||t.errors.push($u());let i=e.timings==="full"?{duration:0,delay:0,easing:"full"}:ti(e.timings,t.errors,!0);return{type:X.Stagger,animation:Ne(this,bn(e.animation),t),timings:i,options:null}}};function Sm(n){let e=!!n.split(/\s*,\s*/).find(t=>t==Sd);return e&&(n=n.replace(Em,"")),n=n.replace(/@\*/g,ei).replace(/@\w+/g,t=>ei+"-"+t.slice(1)).replace(/:animating/g,lr),[n,e]}function Tm(n){return n?Oe({},n):null}var io=class{errors;queryCount=0;depCount=0;currentTransition=null;currentQuery=null;currentQuerySelector=null;currentAnimateTimings=null;currentTime=0;collectedStyles=new Map;options=null;unsupportedCSSPropertiesFound=new Set;constructor(e){this.errors=e}};function wm(n){if(typeof n=="string")return null;let e=null;if(Array.isArray(n))n.forEach(t=>{if(t instanceof Map&&t.has("offset")){let i=t;e=parseFloat(i.get("offset")),i.delete("offset")}});else if(n instanceof Map&&n.has("offset")){let t=n;e=parseFloat(t.get("offset")),t.delete("offset")}return e}function Cm(n,e){if(n.hasOwnProperty("duration"))return n;if(typeof n=="number"){let s=ti(n,e).duration;return Xs(s,0,"")}let t=n;if(t.split(/\s+/).some(s=>s.charAt(0)=="{"&&s.charAt(1)=="{")){let s=Xs(0,0,"");return s.dynamic=!0,s.strValue=t,s}let r=ti(t,e);return Xs(r.duration,r.delay,r.easing)}function Zt(n){return n?(n=Oe({},n),n.params&&(n.params=Tm(n.params))):n={},n}function Xs(n,e,t){return{duration:n,delay:e,easing:t}}function mo(n,e,t,i,r,s,o=null,a=!1){return{type:1,element:n,keyframes:e,preStyleProps:t,postStyleProps:i,duration:r,delay:s,totalTime:r+s,easing:o,subTimeline:a}}var ii=class{_map=new Map;get(e){return this._map.get(e)||[]}append(e,t){let i=this._map.get(e);i||this._map.set(e,i=[]),i.push(...t)}has(e){return this._map.has(e)}clear(){this._map.clear()}},km=1,Nm=":enter",xm=new RegExp(Nm,"g"),Rm=":leave",Im=new RegExp(Rm,"g");function wd(n,e,t,i,r,s=new Map,o=new Map,a,l,u=[]){return new ro().buildKeyframes(n,e,t,i,r,s,o,a,l,u)}var ro=class{buildKeyframes(e,t,i,r,s,o,a,l,u,f=[]){u=u||new ii;let h=new so(e,t,u,r,s,f,[]);h.options=l;let y=l.delay?lt(l.delay):0;h.currentTimeline.delayNextStep(y),h.currentTimeline.setStyles([o],null,h.errors,l),Ne(this,i,h);let C=h.timelines.filter(w=>w.containsAnimation());if(C.length&&a.size){let w;for(let R=C.length-1;R>=0;R--){let z=C[R];if(z.element===t){w=z;break}}w&&!w.allowOnlyTimelineStyles()&&w.setStyles([a],null,h.errors,l)}return C.length?C.map(w=>w.buildKeyframes()):[mo(t,[],[],[],0,y,"",!1)]}visitTrigger(e,t){}visitState(e,t){}visitTransition(e,t){}visitAnimateChild(e,t){let i=t.subInstructions.get(t.element);if(i){let r=t.createSubContext(e.options),s=t.currentTimeline.currentTime,o=this._visitSubInstructions(i,r,r.options);s!=o&&t.transformIntoNewTimeline(o)}t.previousNode=e}visitAnimateRef(e,t){let i=t.createSubContext(e.options);i.transformIntoNewTimeline(),this._applyAnimationRefDelays([e.options,e.animation.options],t,i),this.visitReference(e.animation,i),t.transformIntoNewTimeline(i.currentTimeline.currentTime),t.previousNode=e}_applyAnimationRefDelays(e,t,i){for(let r of e){let s=r?.delay;if(s){let o=typeof s=="number"?s:lt(vn(s,r?.params??{},t.errors));i.delayNextStep(o)}}}_visitSubInstructions(e,t,i){let s=t.currentTimeline.currentTime,o=i.duration!=null?lt(i.duration):null,a=i.delay!=null?lt(i.delay):null;return o!==0&&e.forEach(l=>{let u=t.appendInstructionToTimeline(l,o,a);s=Math.max(s,u.duration+u.delay)}),s}visitReference(e,t){t.updateOptions(e.options,!0),Ne(this,e.animation,t),t.previousNode=e}visitSequence(e,t){let i=t.subContextCount,r=t,s=e.options;if(s&&(s.params||s.delay)&&(r=t.createSubContext(s),r.transformIntoNewTimeline(),s.delay!=null)){r.previousNode.type==X.Style&&(r.currentTimeline.snapshotCurrentStyles(),r.previousNode=_r);let o=lt(s.delay);r.delayNextStep(o)}e.steps.length&&(e.steps.forEach(o=>Ne(this,o,r)),r.currentTimeline.applyStylesToKeyframe(),r.subContextCount>i&&r.transformIntoNewTimeline()),t.previousNode=e}visitGroup(e,t){let i=[],r=t.currentTimeline.currentTime,s=e.options&&e.options.delay?lt(e.options.delay):0;e.steps.forEach(o=>{let a=t.createSubContext(e.options);s&&a.delayNextStep(s),Ne(this,o,a),r=Math.max(r,a.currentTimeline.currentTime),i.push(a.currentTimeline)}),i.forEach(o=>t.currentTimeline.mergeTimelineCollectedStyles(o)),t.transformIntoNewTimeline(r),t.previousNode=e}_visitTiming(e,t){if(e.dynamic){let i=e.strValue,r=t.params?vn(i,t.params,t.errors):i;return ti(r,t.errors)}else return{duration:e.duration,delay:e.delay,easing:e.easing}}visitAnimate(e,t){let i=t.currentAnimateTimings=this._visitTiming(e.timings,t),r=t.currentTimeline;i.delay&&(t.incrementTime(i.delay),r.snapshotCurrentStyles());let s=e.style;s.type==X.Keyframes?this.visitKeyframes(s,t):(t.incrementTime(i.duration),this.visitStyle(s,t),r.applyStylesToKeyframe()),t.currentAnimateTimings=null,t.previousNode=e}visitStyle(e,t){let i=t.currentTimeline,r=t.currentAnimateTimings;!r&&i.hasCurrentStyleProperties()&&i.forwardFrame();let s=r&&r.easing||e.easing;e.isEmptyStep?i.applyEmptyStep(s):i.setStyles(e.styles,s,t.errors,t.options),t.previousNode=e}visitKeyframes(e,t){let i=t.currentAnimateTimings,r=t.currentTimeline.duration,s=i.duration,a=t.createSubContext().currentTimeline;a.easing=i.easing,e.styles.forEach(l=>{let u=l.offset||0;a.forwardTime(u*s),a.setStyles(l.styles,l.easing,t.errors,t.options),a.applyStylesToKeyframe()}),t.currentTimeline.mergeTimelineCollectedStyles(a),t.transformIntoNewTimeline(r+s),t.previousNode=e}visitQuery(e,t){let i=t.currentTimeline.currentTime,r=e.options||{},s=r.delay?lt(r.delay):0;s&&(t.previousNode.type===X.Style||i==0&&t.currentTimeline.hasCurrentStyleProperties())&&(t.currentTimeline.snapshotCurrentStyles(),t.previousNode=_r);let o=i,a=t.invokeQuery(e.selector,e.originalSelector,e.limit,e.includeSelf,!!r.optional,t.errors);t.currentQueryTotal=a.length;let l=null;a.forEach((u,f)=>{t.currentQueryIndex=f;let h=t.createSubContext(e.options,u);s&&h.delayNextStep(s),u===t.element&&(l=h.currentTimeline),Ne(this,e.animation,h),h.currentTimeline.applyStylesToKeyframe();let y=h.currentTimeline.currentTime;o=Math.max(o,y)}),t.currentQueryIndex=0,t.currentQueryTotal=0,t.transformIntoNewTimeline(o),l&&(t.currentTimeline.mergeTimelineCollectedStyles(l),t.currentTimeline.snapshotCurrentStyles()),t.previousNode=e}visitStagger(e,t){let i=t.parentContext,r=t.currentTimeline,s=e.timings,o=Math.abs(s.duration),a=o*(t.currentQueryTotal-1),l=o*t.currentQueryIndex;switch(s.duration<0?"reverse":s.easing){case"reverse":l=a-l;break;case"full":l=i.currentStaggerTime;break}let f=t.currentTimeline;l&&f.delayNextStep(l);let h=f.currentTime;Ne(this,e.animation,t),t.previousNode=e,i.currentStaggerTime=r.currentTime-h+(r.startTime-i.currentTimeline.startTime)}},_r={},so=class n{_driver;element;subInstructions;_enterClassName;_leaveClassName;errors;timelines;parentContext=null;currentTimeline;currentAnimateTimings=null;previousNode=_r;subContextCount=0;options={};currentQueryIndex=0;currentQueryTotal=0;currentStaggerTime=0;constructor(e,t,i,r,s,o,a,l){this._driver=e,this.element=t,this.subInstructions=i,this._enterClassName=r,this._leaveClassName=s,this.errors=o,this.timelines=a,this.currentTimeline=l||new yr(this._driver,t,0),a.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(e,t){if(!e)return;let i=e,r=this.options;i.duration!=null&&(r.duration=lt(i.duration)),i.delay!=null&&(r.delay=lt(i.delay));let s=i.params;if(s){let o=r.params;o||(o=this.options.params={}),Object.keys(s).forEach(a=>{(!t||!o.hasOwnProperty(a))&&(o[a]=vn(s[a],o,this.errors))})}}_copyOptions(){let e={};if(this.options){let t=this.options.params;if(t){let i=e.params={};Object.keys(t).forEach(r=>{i[r]=t[r]})}}return e}createSubContext(e=null,t,i){let r=t||this.element,s=new n(this._driver,r,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(r,i||0));return s.previousNode=this.previousNode,s.currentAnimateTimings=this.currentAnimateTimings,s.options=this._copyOptions(),s.updateOptions(e),s.currentQueryIndex=this.currentQueryIndex,s.currentQueryTotal=this.currentQueryTotal,s.parentContext=this,this.subContextCount++,s}transformIntoNewTimeline(e){return this.previousNode=_r,this.currentTimeline=this.currentTimeline.fork(this.element,e),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(e,t,i){let r={duration:t??e.duration,delay:this.currentTimeline.currentTime+(i??0)+e.delay,easing:""},s=new oo(this._driver,e.element,e.keyframes,e.preStyleProps,e.postStyleProps,r,e.stretchStartingKeyframe);return this.timelines.push(s),r}incrementTime(e){this.currentTimeline.forwardTime(this.currentTimeline.duration+e)}delayNextStep(e){e>0&&this.currentTimeline.delayNextStep(e)}invokeQuery(e,t,i,r,s,o){let a=[];if(r&&a.push(this.element),e.length>0){e=e.replace(xm,"."+this._enterClassName),e=e.replace(Im,"."+this._leaveClassName);let l=i!=1,u=this._driver.query(this.element,e,l);i!==0&&(u=i<0?u.slice(u.length+i,u.length):u.slice(0,i)),a.push(...u)}return!s&&a.length==0&&o.push(Gu(t)),a}},yr=class n{_driver;element;startTime;_elementTimelineStylesLookup;duration=0;easing=null;_previousKeyframe=new Map;_currentKeyframe=new Map;_keyframes=new Map;_styleSummary=new Map;_localTimelineStyles=new Map;_globalTimelineStyles;_pendingStyles=new Map;_backFill=new Map;_currentEmptyStepKeyframe=null;constructor(e,t,i,r){this._driver=e,this.element=t,this.startTime=i,this._elementTimelineStylesLookup=r,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(t),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(t,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(e){let t=this._keyframes.size===1&&this._pendingStyles.size;this.duration||t?(this.forwardTime(this.currentTime+e),t&&this.snapshotCurrentStyles()):this.startTime+=e}fork(e,t){return this.applyStylesToKeyframe(),new n(this._driver,e,t||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=km,this._loadKeyframe()}forwardTime(e){this.applyStylesToKeyframe(),this.duration=e,this._loadKeyframe()}_updateStyle(e,t){this._localTimelineStyles.set(e,t),this._globalTimelineStyles.set(e,t),this._styleSummary.set(e,{time:this.currentTime,value:t})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(e){e&&this._previousKeyframe.set("easing",e);for(let[t,i]of this._globalTimelineStyles)this._backFill.set(t,i||He),this._currentKeyframe.set(t,He);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(e,t,i,r){t&&this._previousKeyframe.set("easing",t);let s=r&&r.params||{},o=Om(e,this._globalTimelineStyles);for(let[a,l]of o){let u=vn(l,s,i);this._pendingStyles.set(a,u),this._localTimelineStyles.has(a)||this._backFill.set(a,this._globalTimelineStyles.get(a)??He),this._updateStyle(a,u)}}applyStylesToKeyframe(){this._pendingStyles.size!=0&&(this._pendingStyles.forEach((e,t)=>{this._currentKeyframe.set(t,e)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((e,t)=>{this._currentKeyframe.has(t)||this._currentKeyframe.set(t,e)}))}snapshotCurrentStyles(){for(let[e,t]of this._localTimelineStyles)this._pendingStyles.set(e,t),this._updateStyle(e,t)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){let e=[];for(let t in this._currentKeyframe)e.push(t);return e}mergeTimelineCollectedStyles(e){e._styleSummary.forEach((t,i)=>{let r=this._styleSummary.get(i);(!r||t.time>r.time)&&this._updateStyle(i,t.value)})}buildKeyframes(){this.applyStylesToKeyframe();let e=new Set,t=new Set,i=this._keyframes.size===1&&this.duration===0,r=[];this._keyframes.forEach((a,l)=>{let u=new Map([...this._backFill,...a]);u.forEach((f,h)=>{f===Rn?e.add(h):f===He&&t.add(h)}),i||u.set("offset",l/this.duration),r.push(u)});let s=[...e.values()],o=[...t.values()];if(i){let a=r[0],l=new Map(a);a.set("offset",0),l.set("offset",1),r=[a,l]}return mo(this.element,r,s,o,this.duration,this.startTime,this.easing,!1)}},oo=class extends yr{keyframes;preStyleProps;postStyleProps;_stretchStartingKeyframe;timings;constructor(e,t,i,r,s,o,a=!1){super(e,t,o.delay),this.keyframes=i,this.preStyleProps=r,this.postStyleProps=s,this._stretchStartingKeyframe=a,this.timings={duration:o.duration,delay:o.delay,easing:o.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let e=this.keyframes,{delay:t,duration:i,easing:r}=this.timings;if(this._stretchStartingKeyframe&&t){let s=[],o=i+t,a=t/o,l=new Map(e[0]);l.set("offset",0),s.push(l);let u=new Map(e[0]);u.set("offset",pd(a)),s.push(u);let f=e.length-1;for(let h=1;h<=f;h++){let y=new Map(e[h]),C=y.get("offset"),w=t+C*i;y.set("offset",pd(w/o)),s.push(y)}i=o,t=0,r="",e=s}return mo(this.element,e,this.preStyleProps,this.postStyleProps,i,t,r,!0)}};function pd(n,e=3){let t=Math.pow(10,e-1);return Math.round(n*t)/t}function Om(n,e){let t=new Map,i;return n.forEach(r=>{if(r==="*"){i??=e.keys();for(let s of i)t.set(s,He)}else for(let[s,o]of r)t.set(s,o)}),t}function md(n,e,t,i,r,s,o,a,l,u,f,h,y){return{type:0,element:n,triggerName:e,isRemovalTransition:r,fromState:t,fromStyles:s,toState:i,toStyles:o,timelines:a,queriedElements:l,preStyleProps:u,postStyleProps:f,totalTime:h,errors:y}}var Js={},br=class{_triggerName;ast;_stateStyles;constructor(e,t,i){this._triggerName=e,this.ast=t,this._stateStyles=i}match(e,t,i,r){return Am(this.ast.matchers,e,t,i,r)}buildStyles(e,t,i){let r=this._stateStyles.get("*");return e!==void 0&&(r=this._stateStyles.get(e?.toString())||r),r?r.buildStyles(t,i):new Map}build(e,t,i,r,s,o,a,l,u,f){let h=[],y=this.ast.options&&this.ast.options.params||Js,C=a&&a.params||Js,w=this.buildStyles(i,C,h),R=l&&l.params||Js,z=this.buildStyles(r,R,h),W=new Set,N=new Map,T=new Map,q=r==="void",J={params:Cd(R,y),delay:this.ast.options?.delay},ee=f?[]:wd(e,t,this.ast.animation,s,o,w,z,J,u,h),H=0;return ee.forEach(x=>{H=Math.max(x.duration+x.delay,H)}),h.length?md(t,this._triggerName,i,r,q,w,z,[],[],N,T,H,h):(ee.forEach(x=>{let te=x.element,j=ke(N,te,new Set);x.preStyleProps.forEach(O=>j.add(O));let F=ke(T,te,new Set);x.postStyleProps.forEach(O=>F.add(O)),te!==t&&W.add(te)}),md(t,this._triggerName,i,r,q,w,z,ee,[...W.values()],N,T,H))}};function Am(n,e,t,i,r){return n.some(s=>s(e,t,i,r))}function Cd(n,e){let t=Oe({},e);return Object.entries(n).forEach(([i,r])=>{r!=null&&(t[i]=r)}),t}var ao=class{styles;defaultParams;normalizer;constructor(e,t,i){this.styles=e,this.defaultParams=t,this.normalizer=i}buildStyles(e,t){let i=new Map,r=Cd(e,this.defaultParams);return this.styles.styles.forEach(s=>{typeof s!="string"&&s.forEach((o,a)=>{o&&(o=vn(o,r,t));let l=this.normalizer.normalizePropertyName(a,t);o=this.normalizer.normalizeStyleValue(a,l,o,t),i.set(a,o)})}),i}};function Pm(n,e,t){return new lo(n,e,t)}var lo=class{name;ast;_normalizer;transitionFactories=[];fallbackTransition;states=new Map;constructor(e,t,i){this.name=e,this.ast=t,this._normalizer=i,t.states.forEach(r=>{let s=r.options&&r.options.params||{};this.states.set(r.name,new ao(r.style,s,i))}),gd(this.states,"true","1"),gd(this.states,"false","0"),t.transitions.forEach(r=>{this.transitionFactories.push(new br(e,r,this.states))}),this.fallbackTransition=Dm(e,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(e,t,i,r){return this.transitionFactories.find(o=>o.match(e,t,i,r))||null}matchStyles(e,t,i){return this.fallbackTransition.buildStyles(e,t,i)}};function Dm(n,e,t){let i=[(o,a)=>!0],r={type:X.Sequence,steps:[],options:null},s={type:X.Transition,animation:r,matchers:i,options:null,queryCount:0,depCount:0};return new br(n,s,e)}function gd(n,e,t){n.has(e)?n.has(t)||n.set(t,n.get(e)):n.has(t)&&n.set(e,n.get(t))}var Mm=new ii,co=class{bodyNode;_driver;_normalizer;_animations=new Map;_playersById=new Map;players=[];constructor(e,t,i){this.bodyNode=e,this._driver=t,this._normalizer=i}register(e,t){let i=[],r=[],s=Td(this._driver,t,i,r);if(i.length)throw Xu(i);this._animations.set(e,s)}_buildPlayer(e,t,i){let r=e.element,s=Hs(this._normalizer,e.keyframes,t,i);return this._driver.animate(r,s,e.duration,e.delay,e.easing,[],!0)}create(e,t,i={}){let r=[],s=this._animations.get(e),o,a=new Map;if(s?(o=wd(this._driver,t,s,Ks,ar,new Map,new Map,i,Mm,r),o.forEach(f=>{let h=ke(a,f.element,new Map);f.postStyleProps.forEach(y=>h.set(y,null))})):(r.push(Ju()),o=[]),r.length)throw Yu(r);a.forEach((f,h)=>{f.forEach((y,C)=>{f.set(C,this._driver.computeStyle(h,C,He))})});let l=o.map(f=>{let h=a.get(f.element);return this._buildPlayer(f,new Map,h)}),u=Tt(l);return this._playersById.set(e,u),u.onDestroy(()=>this.destroy(e)),this.players.push(u),u}destroy(e){let t=this._getPlayer(e);t.destroy(),this._playersById.delete(e);let i=this.players.indexOf(t);i>=0&&this.players.splice(i,1)}_getPlayer(e){let t=this._playersById.get(e);if(!t)throw ed(e);return t}listen(e,t,i,r){let s=sr(t,"","","");return rr(this._getPlayer(e),i,s,r),()=>{}}command(e,t,i,r){if(i=="register"){this.register(e,r[0]);return}if(i=="create"){let o=r[0]||{};this.create(e,t,o);return}let s=this._getPlayer(e);switch(i){case"play":s.play();break;case"pause":s.pause();break;case"reset":s.reset();break;case"restart":s.restart();break;case"finish":s.finish();break;case"init":s.init();break;case"setPosition":s.setPosition(parseFloat(r[0]));break;case"destroy":this.destroy(e);break}}},_d="ng-animate-queued",Lm=".ng-animate-queued",Ys="ng-animate-disabled",qm=".ng-animate-disabled",Fm="ng-star-inserted",jm=".ng-star-inserted",Bm=[],kd={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Um={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},Ze="__ng_removed",ri=class{namespaceId;value;options;get params(){return this.options.params}constructor(e,t=""){this.namespaceId=t;let i=e&&e.hasOwnProperty("value"),r=i?e.value:e;if(this.value=Hm(r),i){let s=e,{value:o}=s,a=Eo(s,["value"]);this.options=a}else this.options={};this.options.params||(this.options.params={})}absorbOptions(e){let t=e.params;if(t){let i=this.options.params;Object.keys(t).forEach(r=>{i[r]==null&&(i[r]=t[r])})}}},ni="void",eo=new ri(ni),uo=class{id;hostElement;_engine;players=[];_triggers=new Map;_queue=[];_elementListeners=new Map;_hostClassName;constructor(e,t,i){this.id=e,this.hostElement=t,this._engine=i,this._hostClassName="ng-tns-"+e,Fe(t,this._hostClassName)}listen(e,t,i,r){if(!this._triggers.has(t))throw td(i,t);if(i==null||i.length==0)throw nd(t);if(!zm(i))throw id(i,t);let s=ke(this._elementListeners,e,[]),o={name:t,phase:i,callback:r};s.push(o);let a=ke(this._engine.statesByElement,e,new Map);return a.has(t)||(Fe(e,Yn),Fe(e,Yn+"-"+t),a.set(t,eo)),()=>{this._engine.afterFlush(()=>{let l=s.indexOf(o);l>=0&&s.splice(l,1),this._triggers.has(t)||a.delete(t)})}}register(e,t){return this._triggers.has(e)?!1:(this._triggers.set(e,t),!0)}_getTrigger(e){let t=this._triggers.get(e);if(!t)throw rd(e);return t}trigger(e,t,i,r=!0){let s=this._getTrigger(t),o=new si(this.id,t,e),a=this._engine.statesByElement.get(e);a||(Fe(e,Yn),Fe(e,Yn+"-"+t),this._engine.statesByElement.set(e,a=new Map));let l=a.get(t),u=new ri(i,this.id);if(!(i&&i.hasOwnProperty("value"))&&l&&u.absorbOptions(l.options),a.set(t,u),l||(l=eo),!(u.value===ni)&&l.value===u.value){if(!Gm(l.params,u.params)){let R=[],z=s.matchStyles(l.value,l.params,R),W=s.matchStyles(u.value,u.params,R);R.length?this._engine.reportError(R):this._engine.afterFlush(()=>{Pt(e,z),Ke(e,W)})}return}let y=ke(this._engine.playersByElement,e,[]);y.forEach(R=>{R.namespaceId==this.id&&R.triggerName==t&&R.queued&&R.destroy()});let C=s.matchTransition(l.value,u.value,e,u.params),w=!1;if(!C){if(!r)return;C=s.fallbackTransition,w=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:t,transition:C,fromState:l,toState:u,player:o,isFallbackTransition:w}),w||(Fe(e,_d),o.onStart(()=>{En(e,_d)})),o.onDone(()=>{let R=this.players.indexOf(o);R>=0&&this.players.splice(R,1);let z=this._engine.playersByElement.get(e);if(z){let W=z.indexOf(o);W>=0&&z.splice(W,1)}}),this.players.push(o),y.push(o),o}deregister(e){this._triggers.delete(e),this._engine.statesByElement.forEach(t=>t.delete(e)),this._elementListeners.forEach((t,i)=>{this._elementListeners.set(i,t.filter(r=>r.name!=e))})}clearElementCache(e){this._engine.statesByElement.delete(e),this._elementListeners.delete(e);let t=this._engine.playersByElement.get(e);t&&(t.forEach(i=>i.destroy()),this._engine.playersByElement.delete(e))}_signalRemovalForInnerTriggers(e,t){let i=this._engine.driver.query(e,ei,!0);i.forEach(r=>{if(r[Ze])return;let s=this._engine.fetchNamespacesByElement(r);s.size?s.forEach(o=>o.triggerLeaveAnimation(r,t,!1,!0)):this.clearElementCache(r)}),this._engine.afterFlushAnimationsDone(()=>i.forEach(r=>this.clearElementCache(r)))}triggerLeaveAnimation(e,t,i,r){let s=this._engine.statesByElement.get(e),o=new Map;if(s){let a=[];if(s.forEach((l,u)=>{if(o.set(u,l.value),this._triggers.has(u)){let f=this.trigger(e,u,ni,r);f&&a.push(f)}}),a.length)return this._engine.markElementAsRemoved(this.id,e,!0,t,o),i&&Tt(a).onDone(()=>this._engine.processLeaveNode(e)),!0}return!1}prepareLeaveAnimationListeners(e){let t=this._elementListeners.get(e),i=this._engine.statesByElement.get(e);if(t&&i){let r=new Set;t.forEach(s=>{let o=s.name;if(r.has(o))return;r.add(o);let l=this._triggers.get(o).fallbackTransition,u=i.get(o)||eo,f=new ri(ni),h=new si(this.id,o,e);this._engine.totalQueuedPlayers++,this._queue.push({element:e,triggerName:o,transition:l,fromState:u,toState:f,player:h,isFallbackTransition:!0})})}}removeNode(e,t){let i=this._engine;if(e.childElementCount&&this._signalRemovalForInnerTriggers(e,t),this.triggerLeaveAnimation(e,t,!0))return;let r=!1;if(i.totalAnimations){let s=i.players.length?i.playersByQueriedElement.get(e):[];if(s&&s.length)r=!0;else{let o=e;for(;o=o.parentNode;)if(i.statesByElement.get(o)){r=!0;break}}}if(this.prepareLeaveAnimationListeners(e),r)i.markElementAsRemoved(this.id,e,!1,t);else{let s=e[Ze];(!s||s===kd)&&(i.afterFlush(()=>this.clearElementCache(e)),i.destroyInnerAnimations(e),i._onRemovalComplete(e,t))}}insertNode(e,t){Fe(e,this._hostClassName)}drainQueuedTransitions(e){let t=[];return this._queue.forEach(i=>{let r=i.player;if(r.destroyed)return;let s=i.element,o=this._elementListeners.get(s);o&&o.forEach(a=>{if(a.name==i.triggerName){let l=sr(s,i.triggerName,i.fromState.value,i.toState.value);l._data=e,rr(i.player,a.phase,l,a.callback)}}),r.markedForDestroy?this._engine.afterFlush(()=>{r.destroy()}):t.push(i)}),this._queue=[],t.sort((i,r)=>{let s=i.transition.ast.depCount,o=r.transition.ast.depCount;return s==0||o==0?s-o:this._engine.driver.containsElement(i.element,r.element)?1:-1})}destroy(e){this.players.forEach(t=>t.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,e)}},ho=class{bodyNode;driver;_normalizer;players=[];newHostElements=new Map;playersByElement=new Map;playersByQueriedElement=new Map;statesByElement=new Map;disabledNodes=new Set;totalAnimations=0;totalQueuedPlayers=0;_namespaceLookup={};_namespaceList=[];_flushFns=[];_whenQuietFns=[];namespacesByHostElement=new Map;collectedEnterElements=[];collectedLeaveElements=[];onRemovalComplete=(e,t)=>{};_onRemovalComplete(e,t){this.onRemovalComplete(e,t)}constructor(e,t,i){this.bodyNode=e,this.driver=t,this._normalizer=i}get queuedPlayers(){let e=[];return this._namespaceList.forEach(t=>{t.players.forEach(i=>{i.queued&&e.push(i)})}),e}createNamespace(e,t){let i=new uo(e,t,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,t)?this._balanceNamespaceList(i,t):(this.newHostElements.set(t,i),this.collectEnterElement(t)),this._namespaceLookup[e]=i}_balanceNamespaceList(e,t){let i=this._namespaceList,r=this.namespacesByHostElement;if(i.length-1>=0){let o=!1,a=this.driver.getParentElement(t);for(;a;){let l=r.get(a);if(l){let u=i.indexOf(l);i.splice(u+1,0,e),o=!0;break}a=this.driver.getParentElement(a)}o||i.unshift(e)}else i.push(e);return r.set(t,e),e}register(e,t){let i=this._namespaceLookup[e];return i||(i=this.createNamespace(e,t)),i}registerTrigger(e,t,i){let r=this._namespaceLookup[e];r&&r.register(t,i)&&this.totalAnimations++}destroy(e,t){e&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{let i=this._fetchNamespace(e);this.namespacesByHostElement.delete(i.hostElement);let r=this._namespaceList.indexOf(i);r>=0&&this._namespaceList.splice(r,1),i.destroy(t),delete this._namespaceLookup[e]}))}_fetchNamespace(e){return this._namespaceLookup[e]}fetchNamespacesByElement(e){let t=new Set,i=this.statesByElement.get(e);if(i){for(let r of i.values())if(r.namespaceId){let s=this._fetchNamespace(r.namespaceId);s&&t.add(s)}}return t}trigger(e,t,i,r){if(fr(t)){let s=this._fetchNamespace(e);if(s)return s.trigger(t,i,r),!0}return!1}insertNode(e,t,i,r){if(!fr(t))return;let s=t[Ze];if(s&&s.setForRemoval){s.setForRemoval=!1,s.setForMove=!0;let o=this.collectedLeaveElements.indexOf(t);o>=0&&this.collectedLeaveElements.splice(o,1)}if(e){let o=this._fetchNamespace(e);o&&o.insertNode(t,i)}r&&this.collectEnterElement(t)}collectEnterElement(e){this.collectedEnterElements.push(e)}markElementAsDisabled(e,t){t?this.disabledNodes.has(e)||(this.disabledNodes.add(e),Fe(e,Ys)):this.disabledNodes.has(e)&&(this.disabledNodes.delete(e),En(e,Ys))}removeNode(e,t,i){if(fr(t)){let r=e?this._fetchNamespace(e):null;r?r.removeNode(t,i):this.markElementAsRemoved(e,t,!1,i);let s=this.namespacesByHostElement.get(t);s&&s.id!==e&&s.removeNode(t,i)}else this._onRemovalComplete(t,i)}markElementAsRemoved(e,t,i,r,s){this.collectedLeaveElements.push(t),t[Ze]={namespaceId:e,setForRemoval:r,hasAnimation:i,removedBeforeQueried:!1,previousTriggersValues:s}}listen(e,t,i,r,s){return fr(t)?this._fetchNamespace(e).listen(t,i,r,s):()=>{}}_buildInstruction(e,t,i,r,s){return e.transition.build(this.driver,e.element,e.fromState.value,e.toState.value,i,r,e.fromState.options,e.toState.options,t,s)}destroyInnerAnimations(e){let t=this.driver.query(e,ei,!0);t.forEach(i=>this.destroyActiveAnimationsForElement(i)),this.playersByQueriedElement.size!=0&&(t=this.driver.query(e,lr,!0),t.forEach(i=>this.finishActiveQueriedAnimationOnElement(i)))}destroyActiveAnimationsForElement(e){let t=this.playersByElement.get(e);t&&t.forEach(i=>{i.queued?i.markedForDestroy=!0:i.destroy()})}finishActiveQueriedAnimationOnElement(e){let t=this.playersByQueriedElement.get(e);t&&t.forEach(i=>i.finish())}whenRenderingDone(){return new Promise(e=>{if(this.players.length)return Tt(this.players).onDone(()=>e());e()})}processLeaveNode(e){let t=e[Ze];if(t&&t.setForRemoval){if(e[Ze]=kd,t.namespaceId){this.destroyInnerAnimations(e);let i=this._fetchNamespace(t.namespaceId);i&&i.clearElementCache(e)}this._onRemovalComplete(e,t.setForRemoval)}e.classList?.contains(Ys)&&this.markElementAsDisabled(e,!1),this.driver.query(e,qm,!0).forEach(i=>{this.markElementAsDisabled(i,!1)})}flush(e=-1){let t=[];if(this.newHostElements.size&&(this.newHostElements.forEach((i,r)=>this._balanceNamespaceList(i,r)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let i=0;i<this.collectedEnterElements.length;i++){let r=this.collectedEnterElements[i];Fe(r,Fm)}if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){let i=[];try{t=this._flushAnimations(i,e)}finally{for(let r=0;r<i.length;r++)i[r]()}}else for(let i=0;i<this.collectedLeaveElements.length;i++){let r=this.collectedLeaveElements[i];this.processLeaveNode(r)}if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(i=>i()),this._flushFns=[],this._whenQuietFns.length){let i=this._whenQuietFns;this._whenQuietFns=[],t.length?Tt(t).onDone(()=>{i.forEach(r=>r())}):i.forEach(r=>r())}}reportError(e){throw sd(e)}_flushAnimations(e,t){let i=new ii,r=[],s=new Map,o=[],a=new Map,l=new Map,u=new Map,f=new Set;this.disabledNodes.forEach(g=>{f.add(g);let m=this.driver.query(g,Lm,!0);for(let c=0;c<m.length;c++)f.add(m[c])});let h=this.bodyNode,y=Array.from(this.statesByElement.keys()),C=vd(y,this.collectedEnterElements),w=new Map,R=0;C.forEach((g,m)=>{let c=Ks+R++;w.set(m,c),g.forEach(d=>Fe(d,c))});let z=[],W=new Set,N=new Set;for(let g=0;g<this.collectedLeaveElements.length;g++){let m=this.collectedLeaveElements[g],c=m[Ze];c&&c.setForRemoval&&(z.push(m),W.add(m),c.hasAnimation?this.driver.query(m,jm,!0).forEach(d=>W.add(d)):N.add(m))}let T=new Map,q=vd(y,Array.from(W));q.forEach((g,m)=>{let c=ar+R++;T.set(m,c),g.forEach(d=>Fe(d,c))}),e.push(()=>{C.forEach((g,m)=>{let c=w.get(m);g.forEach(d=>En(d,c))}),q.forEach((g,m)=>{let c=T.get(m);g.forEach(d=>En(d,c))}),z.forEach(g=>{this.processLeaveNode(g)})});let J=[],ee=[];for(let g=this._namespaceList.length-1;g>=0;g--)this._namespaceList[g].drainQueuedTransitions(t).forEach(c=>{let d=c.player,k=c.element;if(J.push(d),this.collectedEnterElements.length){let le=k[Ze];if(le&&le.setForMove){if(le.previousTriggersValues&&le.previousTriggersValues.has(c.triggerName)){let b=le.previousTriggersValues.get(c.triggerName),_=this.statesByElement.get(c.element);if(_&&_.has(c.triggerName)){let p=_.get(c.triggerName);p.value=b,_.set(c.triggerName,p)}}d.destroy();return}}let A=!h||!this.driver.containsElement(h,k),Z=T.get(k),V=w.get(k),ne=this._buildInstruction(c,i,V,Z,A);if(ne.errors&&ne.errors.length){ee.push(ne);return}if(A){d.onStart(()=>Pt(k,ne.fromStyles)),d.onDestroy(()=>Ke(k,ne.toStyles)),r.push(d);return}if(c.isFallbackTransition){d.onStart(()=>Pt(k,ne.fromStyles)),d.onDestroy(()=>Ke(k,ne.toStyles)),r.push(d);return}let Ie=[];ne.timelines.forEach(le=>{le.stretchStartingKeyframe=!0,this.disabledNodes.has(le.element)||Ie.push(le)}),ne.timelines=Ie,i.append(k,ne.timelines);let je={instruction:ne,player:d,element:k};o.push(je),ne.queriedElements.forEach(le=>ke(a,le,[]).push(d)),ne.preStyleProps.forEach((le,b)=>{if(le.size){let _=l.get(b);_||l.set(b,_=new Set),le.forEach((p,v)=>_.add(v))}}),ne.postStyleProps.forEach((le,b)=>{let _=u.get(b);_||u.set(b,_=new Set),le.forEach((p,v)=>_.add(v))})});if(ee.length){let g=[];ee.forEach(m=>{g.push(od(m.triggerName,m.errors))}),J.forEach(m=>m.destroy()),this.reportError(g)}let H=new Map,x=new Map;o.forEach(g=>{let m=g.element;i.has(m)&&(x.set(m,m),this._beforeAnimationBuild(g.player.namespaceId,g.instruction,H))}),r.forEach(g=>{let m=g.element;this._getPreviousPlayers(m,!1,g.namespaceId,g.triggerName,null).forEach(d=>{ke(H,m,[]).push(d),d.destroy()})});let te=z.filter(g=>Ed(g,l,u)),j=new Map;bd(j,this.driver,N,u,He).forEach(g=>{Ed(g,l,u)&&te.push(g)});let O=new Map;C.forEach((g,m)=>{bd(O,this.driver,new Set(g),l,Rn)}),te.forEach(g=>{let m=j.get(g),c=O.get(g);j.set(g,new Map([...m?.entries()??[],...c?.entries()??[]]))});let B=[],me=[],de={};o.forEach(g=>{let{element:m,player:c,instruction:d}=g;if(i.has(m)){if(f.has(m)){c.onDestroy(()=>Ke(m,d.toStyles)),c.disabled=!0,c.overrideTotalTime(d.totalTime),r.push(c);return}let k=de;if(x.size>1){let Z=m,V=[];for(;Z=Z.parentNode;){let ne=x.get(Z);if(ne){k=ne;break}V.push(Z)}V.forEach(ne=>x.set(ne,k))}let A=this._buildAnimation(c.namespaceId,d,H,s,O,j);if(c.setRealPlayer(A),k===de)B.push(c);else{let Z=this.playersByElement.get(k);Z&&Z.length&&(c.parentPlayer=Tt(Z)),r.push(c)}}else Pt(m,d.fromStyles),c.onDestroy(()=>Ke(m,d.toStyles)),me.push(c),f.has(m)&&r.push(c)}),me.forEach(g=>{let m=s.get(g.element);if(m&&m.length){let c=Tt(m);g.setRealPlayer(c)}}),r.forEach(g=>{g.parentPlayer?g.syncPlayerEvents(g.parentPlayer):g.destroy()});for(let g=0;g<z.length;g++){let m=z[g],c=m[Ze];if(En(m,ar),c&&c.hasAnimation)continue;let d=[];if(a.size){let A=a.get(m);A&&A.length&&d.push(...A);let Z=this.driver.query(m,lr,!0);for(let V=0;V<Z.length;V++){let ne=a.get(Z[V]);ne&&ne.length&&d.push(...ne)}}let k=d.filter(A=>!A.destroyed);k.length?Wm(this,m,k):this.processLeaveNode(m)}return z.length=0,B.forEach(g=>{this.players.push(g),g.onDone(()=>{g.destroy();let m=this.players.indexOf(g);this.players.splice(m,1)}),g.play()}),B}afterFlush(e){this._flushFns.push(e)}afterFlushAnimationsDone(e){this._whenQuietFns.push(e)}_getPreviousPlayers(e,t,i,r,s){let o=[];if(t){let a=this.playersByQueriedElement.get(e);a&&(o=a)}else{let a=this.playersByElement.get(e);if(a){let l=!s||s==ni;a.forEach(u=>{u.queued||!l&&u.triggerName!=r||o.push(u)})}}return(i||r)&&(o=o.filter(a=>!(i&&i!=a.namespaceId||r&&r!=a.triggerName))),o}_beforeAnimationBuild(e,t,i){let r=t.triggerName,s=t.element,o=t.isRemovalTransition?void 0:e,a=t.isRemovalTransition?void 0:r;for(let l of t.timelines){let u=l.element,f=u!==s,h=ke(i,u,[]);this._getPreviousPlayers(u,f,o,a,t.toState).forEach(C=>{let w=C.getRealPlayer();w.beforeDestroy&&w.beforeDestroy(),C.destroy(),h.push(C)})}Pt(s,t.fromStyles)}_buildAnimation(e,t,i,r,s,o){let a=t.triggerName,l=t.element,u=[],f=new Set,h=new Set,y=t.timelines.map(w=>{let R=w.element;f.add(R);let z=R[Ze];if(z&&z.removedBeforeQueried)return new qt(w.duration,w.delay);let W=R!==l,N=$m((i.get(R)||Bm).map(H=>H.getRealPlayer())).filter(H=>{let x=H;return x.element?x.element===R:!1}),T=s.get(R),q=o.get(R),J=Hs(this._normalizer,w.keyframes,T,q),ee=this._buildPlayer(w,J,N);if(w.subTimeline&&r&&h.add(R),W){let H=new si(e,a,R);H.setRealPlayer(ee),u.push(H)}return ee});u.forEach(w=>{ke(this.playersByQueriedElement,w.element,[]).push(w),w.onDone(()=>Vm(this.playersByQueriedElement,w.element,w))}),f.forEach(w=>Fe(w,Zs));let C=Tt(y);return C.onDestroy(()=>{f.forEach(w=>En(w,Zs)),Ke(l,t.toStyles)}),h.forEach(w=>{ke(r,w,[]).push(C)}),C}_buildPlayer(e,t,i){return t.length>0?this.driver.animate(e.element,t,e.duration,e.delay,e.easing,i):new qt(e.duration,e.delay)}},si=class{namespaceId;triggerName;element;_player=new qt;_containsRealPlayer=!1;_queuedCallbacks=new Map;destroyed=!1;parentPlayer=null;markedForDestroy=!1;disabled=!1;queued=!0;totalTime=0;constructor(e,t,i){this.namespaceId=e,this.triggerName=t,this.element=i}setRealPlayer(e){this._containsRealPlayer||(this._player=e,this._queuedCallbacks.forEach((t,i)=>{t.forEach(r=>rr(e,i,void 0,r))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(e.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(e){this.totalTime=e}syncPlayerEvents(e){let t=this._player;t.triggerCallback&&e.onStart(()=>t.triggerCallback("start")),e.onDone(()=>this.finish()),e.onDestroy(()=>this.destroy())}_queueEvent(e,t){ke(this._queuedCallbacks,e,[]).push(t)}onDone(e){this.queued&&this._queueEvent("done",e),this._player.onDone(e)}onStart(e){this.queued&&this._queueEvent("start",e),this._player.onStart(e)}onDestroy(e){this.queued&&this._queueEvent("destroy",e),this._player.onDestroy(e)}init(){this._player.init()}hasStarted(){return this.queued?!1:this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(e){this.queued||this._player.setPosition(e)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(e){let t=this._player;t.triggerCallback&&t.triggerCallback(e)}};function Vm(n,e,t){let i=n.get(e);if(i){if(i.length){let r=i.indexOf(t);i.splice(r,1)}i.length==0&&n.delete(e)}return i}function Hm(n){return n??null}function fr(n){return n&&n.nodeType===1}function zm(n){return n=="start"||n=="done"}function yd(n,e){let t=n.style.display;return n.style.display=e??"none",t}function bd(n,e,t,i,r){let s=[];t.forEach(l=>s.push(yd(l)));let o=[];i.forEach((l,u)=>{let f=new Map;l.forEach(h=>{let y=e.computeStyle(u,h,r);f.set(h,y),(!y||y.length==0)&&(u[Ze]=Um,o.push(u))}),n.set(u,f)});let a=0;return t.forEach(l=>yd(l,s[a++])),o}function vd(n,e){let t=new Map;if(n.forEach(a=>t.set(a,[])),e.length==0)return t;let i=1,r=new Set(e),s=new Map;function o(a){if(!a)return i;let l=s.get(a);if(l)return l;let u=a.parentNode;return t.has(u)?l=u:r.has(u)?l=i:l=o(u),s.set(a,l),l}return e.forEach(a=>{let l=o(a);l!==i&&t.get(l).push(a)}),t}function Fe(n,e){n.classList?.add(e)}function En(n,e){n.classList?.remove(e)}function Wm(n,e,t){Tt(t).onDone(()=>n.processLeaveNode(e))}function $m(n){let e=[];return Nd(n,e),e}function Nd(n,e){for(let t=0;t<n.length;t++){let i=n[t];i instanceof pi?Nd(i.players,e):e.push(i)}}function Gm(n,e){let t=Object.keys(n),i=Object.keys(e);if(t.length!=i.length)return!1;for(let r=0;r<t.length;r++){let s=t[r];if(!e.hasOwnProperty(s)||n[s]!==e[s])return!1}return!0}function Ed(n,e,t){let i=t.get(n);if(!i)return!1;let r=e.get(n);return r?i.forEach(s=>r.add(s)):e.set(n,i),t.delete(n),!0}var Sn=class{_driver;_normalizer;_transitionEngine;_timelineEngine;_triggerCache={};onRemovalComplete=(e,t)=>{};constructor(e,t,i){this._driver=t,this._normalizer=i,this._transitionEngine=new ho(e.body,t,i),this._timelineEngine=new co(e.body,t,i),this._transitionEngine.onRemovalComplete=(r,s)=>this.onRemovalComplete(r,s)}registerTrigger(e,t,i,r,s){let o=e+"-"+r,a=this._triggerCache[o];if(!a){let l=[],u=[],f=Td(this._driver,s,l,u);if(l.length)throw Qu(r,l);a=Pm(r,f,this._normalizer),this._triggerCache[o]=a}this._transitionEngine.registerTrigger(t,r,a)}register(e,t){this._transitionEngine.register(e,t)}destroy(e,t){this._transitionEngine.destroy(e,t)}onInsert(e,t,i,r){this._transitionEngine.insertNode(e,t,i,r)}onRemove(e,t,i){this._transitionEngine.removeNode(e,t,i)}disableAnimations(e,t){this._transitionEngine.markElementAsDisabled(e,t)}process(e,t,i,r){if(i.charAt(0)=="@"){let[s,o]=zs(i),a=r;this._timelineEngine.command(s,t,o,a)}else this._transitionEngine.trigger(e,t,i,r)}listen(e,t,i,r,s){if(i.charAt(0)=="@"){let[o,a]=zs(i);return this._timelineEngine.listen(o,t,a,s)}return this._transitionEngine.listen(e,t,i,r,s)}flush(e=-1){this._transitionEngine.flush(e)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(e){this._transitionEngine.afterFlushAnimationsDone(e)}};function Km(n,e){let t=null,i=null;return Array.isArray(e)&&e.length?(t=to(e[0]),e.length>1&&(i=to(e[e.length-1]))):e instanceof Map&&(t=to(e)),t||i?new Zm(n,t,i):null}var Zm=(()=>{class n{_element;_startStyles;_endStyles;static initialStylesByElement=new WeakMap;_state=0;_initialStyles;constructor(t,i,r){this._element=t,this._startStyles=i,this._endStyles=r;let s=n.initialStylesByElement.get(t);s||n.initialStylesByElement.set(t,s=new Map),this._initialStyles=s}start(){this._state<1&&(this._startStyles&&Ke(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Ke(this._element,this._initialStyles),this._endStyles&&(Ke(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(n.initialStylesByElement.delete(this._element),this._startStyles&&(Pt(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(Pt(this._element,this._endStyles),this._endStyles=null),Ke(this._element,this._initialStyles),this._state=3)}}return n})();function to(n){let e=null;return n.forEach((t,i)=>{Qm(i)&&(e=e||new Map,e.set(i,t))}),e}function Qm(n){return n==="display"||n==="position"}var vr=class{element;keyframes;options;_specialStyles;_onDoneFns=[];_onStartFns=[];_onDestroyFns=[];_duration;_delay;_initialized=!1;_finished=!1;_started=!1;_destroyed=!1;_finalKeyframe;_originalOnDoneFns=[];_originalOnStartFns=[];domPlayer;time=0;parentPlayer=null;currentSnapshot=new Map;constructor(e,t,i,r){this.element=e,this.keyframes=t,this.options=i,this._specialStyles=r,this._duration=i.duration,this._delay=i.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(e=>e()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;let e=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,e,this.options),this._finalKeyframe=e.length?e[e.length-1]:new Map;let t=()=>this._onFinish();this.domPlayer.addEventListener("finish",t),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",t)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(e){let t=[];return e.forEach(i=>{t.push(Object.fromEntries(i))}),t}_triggerWebAnimation(e,t,i){return e.animate(this._convertKeyframesToObject(t),i)}onStart(e){this._originalOnStartFns.push(e),this._onStartFns.push(e)}onDone(e){this._originalOnDoneFns.push(e),this._onDoneFns.push(e)}onDestroy(e){this._onDestroyFns.push(e)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(e=>e()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(e=>e()),this._onDestroyFns=[])}setPosition(e){this.domPlayer===void 0&&this.init(),this.domPlayer.currentTime=e*this.time}getPosition(){return+(this.domPlayer.currentTime??0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){let e=new Map;this.hasStarted()&&this._finalKeyframe.forEach((i,r)=>{r!=="offset"&&e.set(r,this._finished?i:ur(this.element,r))}),this.currentSnapshot=e}triggerCallback(e){let t=e==="start"?this._onStartFns:this._onDoneFns;t.forEach(i=>i()),t.length=0}},Er=class{validateStyleProperty(e){return!0}validateAnimatableStyleProperty(e){return!0}containsElement(e,t){return Ws(e,t)}getParentElement(e){return or(e)}query(e,t,i){return $s(e,t,i)}computeStyle(e,t,i){return ur(e,t)}animate(e,t,i,r,s,o=[]){let a=r==0?"both":"forwards",l={duration:i,delay:r,fill:a};s&&(l.easing=s);let u=new Map,f=o.filter(C=>C instanceof vr);ud(i,r)&&f.forEach(C=>{C.currentSnapshot.forEach((w,R)=>u.set(R,w))});let h=ld(t).map(C=>new Map(C));h=dd(e,h,u);let y=Km(e,h);return new vr(e,h,l,y)}};var pr="@",xd="@.disabled",Sr=class{namespaceId;delegate;engine;_onDestroy;\u0275type=0;constructor(e,t,i,r){this.namespaceId=e,this.delegate=t,this.engine=i,this._onDestroy=r}get data(){return this.delegate.data}destroyNode(e){this.delegate.destroyNode?.(e)}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),this._onDestroy?.()}createElement(e,t){return this.delegate.createElement(e,t)}createComment(e){return this.delegate.createComment(e)}createText(e){return this.delegate.createText(e)}appendChild(e,t){this.delegate.appendChild(e,t),this.engine.onInsert(this.namespaceId,t,e,!1)}insertBefore(e,t,i,r=!0){this.delegate.insertBefore(e,t,i),this.engine.onInsert(this.namespaceId,t,e,r)}removeChild(e,t,i,r){if(r){this.delegate.removeChild(e,t,i);return}this.parentNode(t)&&this.engine.onRemove(this.namespaceId,t,this.delegate)}selectRootElement(e,t){return this.delegate.selectRootElement(e,t)}parentNode(e){return this.delegate.parentNode(e)}nextSibling(e){return this.delegate.nextSibling(e)}setAttribute(e,t,i,r){this.delegate.setAttribute(e,t,i,r)}removeAttribute(e,t,i){this.delegate.removeAttribute(e,t,i)}addClass(e,t){this.delegate.addClass(e,t)}removeClass(e,t){this.delegate.removeClass(e,t)}setStyle(e,t,i,r){this.delegate.setStyle(e,t,i,r)}removeStyle(e,t,i){this.delegate.removeStyle(e,t,i)}setProperty(e,t,i){t.charAt(0)==pr&&t==xd?this.disableAnimations(e,!!i):this.delegate.setProperty(e,t,i)}setValue(e,t){this.delegate.setValue(e,t)}listen(e,t,i,r){return this.delegate.listen(e,t,i,r)}disableAnimations(e,t){this.engine.disableAnimations(e,t)}},fo=class extends Sr{factory;constructor(e,t,i,r,s){super(t,i,r,s),this.factory=e,this.namespaceId=t}setProperty(e,t,i){t.charAt(0)==pr?t.charAt(1)=="."&&t==xd?(i=i===void 0?!0:!!i,this.disableAnimations(e,i)):this.engine.process(this.namespaceId,e,t.slice(1),i):this.delegate.setProperty(e,t,i)}listen(e,t,i,r){if(t.charAt(0)==pr){let s=Xm(e),o=t.slice(1),a="";return o.charAt(0)!=pr&&([o,a]=Jm(o)),this.engine.listen(this.namespaceId,s,o,a,l=>{let u=l._data||-1;this.factory.scheduleListenerCallback(u,i,l)})}return this.delegate.listen(e,t,i,r)}};function Xm(n){switch(n){case"body":return document.body;case"document":return document;case"window":return window;default:return n}}function Jm(n){let e=n.indexOf("."),t=n.substring(0,e),i=n.slice(e+1);return[t,i]}var Tr=class{delegate;engine;_zone;_currentId=0;_microtaskId=1;_animationCallbacksBuffer=[];_rendererCache=new Map;_cdRecurDepth=0;constructor(e,t,i){this.delegate=e,this.engine=t,this._zone=i,t.onRemovalComplete=(r,s)=>{s?.removeChild(null,r)}}createRenderer(e,t){let r=this.delegate.createRenderer(e,t);if(!e||!t?.data?.animation){let u=this._rendererCache,f=u.get(r);if(!f){let h=()=>u.delete(r);f=new Sr("",r,this.engine,h),u.set(r,f)}return f}let s=t.id,o=t.id+"-"+this._currentId;this._currentId++,this.engine.register(o,e);let a=u=>{Array.isArray(u)?u.forEach(a):this.engine.registerTrigger(s,o,e,u.name,u)};return t.data.animation.forEach(a),new fo(this,o,r,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(e,t,i){if(e>=0&&e<this._microtaskId){this._zone.run(()=>t(i));return}let r=this._animationCallbacksBuffer;r.length==0&&queueMicrotask(()=>{this._zone.run(()=>{r.forEach(s=>{let[o,a]=s;o(a)}),this._animationCallbacksBuffer=[]})}),r.push([t,i])}end(){this._cdRecurDepth--,this._cdRecurDepth==0&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}componentReplaced(e){this.engine.flush(),this.delegate.componentReplaced?.(e)}};var eg=(()=>{class n extends Sn{constructor(t,i,r){super(t,i,r)}ngOnDestroy(){this.flush()}static \u0275fac=function(i){return new(i||n)(ci(ko),ci(Qt),ci(Xt))};static \u0275prov=Ct({token:n,factory:n.\u0275fac})}return n})();function tg(){return new mr}function ng(n,e,t){return new Tr(n,e,t)}var Rd=[{provide:Xt,useFactory:tg},{provide:Sn,useClass:eg},{provide:Io,useFactory:ng,deps:[Go,Sn,Po]}],rv=[{provide:Qt,useClass:po},{provide:Rr,useValue:"NoopAnimations"},...Rd],ig=[{provide:Qt,useFactory:()=>new Er},{provide:Rr,useFactory:()=>"BrowserAnimations"},...Rd];function Id(){return Oo("NgEagerAnimations"),[...ig]}function Od(){let n=new _i;return n.itemsPerPageLabel="Mostrar",n.nextPageLabel="P\xE1gina siguiente",n.previousPageLabel="P\xE1gina anterior",n.firstPageLabel="Primera p\xE1gina",n.lastPageLabel="\xDAltima p\xE1gina",n.getRangeLabel=rg,n}var rg=(n,e,t)=>{if(t==0||e==0)return`0 de ${t}`;t=Math.max(t,0);let i=n*e,r=i<t?Math.min(i+e,t):i+e;return`${i+1} - ${r} de ${t}`};var Ad=(n,e)=>{let t=Q(ln),i=Q(sn),r=Q(Nt);if(n.url.startsWith(on.backendUrl)){let s=t.getAccessToken();s&&(n=n.clone({setHeaders:{Authorization:`Bearer ${s}`}}))}return e(n).pipe(li(s=>{if(t.isLoggingOut())return Cn(()=>s);switch(s.status){case 401:t.clearSession(),r.navigate(["/auth/login"]),i.showNotification("error","Tu sesi\xF3n ha expirado. Por favor, inicia sesi\xF3n nuevamente.","Sesi\xF3n expirada");break;case 403:i.showNotification("error",s?.error?.message||"No tienes permisos para realizar esta acci\xF3n","No autorizado");break}return Cn(()=>s)}))};var Pd=(n,e)=>{let t=Q(sn);return e(n).pipe(To(i=>{if(i instanceof Zo&&i.body){let r=i.body;r&&r.message&&t.showNotification("success",r.message)}}),li(i=>(t.showNotification("error",i?.error?.message||"Ha ocurrido un error."),Cn(()=>i))))};$o(Pu);var Dd={providers:[Bo({eventCoalescing:!0}),ea(Au),Id(),ia(na),Xo(Yo(),Jo([Ad,Pd])),wo(ha.forRoot({preventDuplicates:!0})),{provide:Ea,useValue:{maxWidth:"700px",width:"95vw",padding:"40px"}},{provide:_i,useValue:Od()},{provide:Uo,useValue:"es"},{provide:ta,useValue:"es-CO"},{provide:fa,useValue:pa}]};var wr=class n{_iconRegistry=Q(oa);_router=Q(Nt);_routerSubscription;webSocketService=Q(At);platformId=Q(xo);destroy$=new en;isConnectedWs=!1;constructor(){this._setMaterialOutlinedIconsDefault(),this._listenRouterChanges()}ngOnInit(){if(Mr(this.platformId)){let e=JSON.parse(localStorage.getItem("app_session")||"{}"),t=e.user?.id;t&&(this.webSocketService.connect(t,e.access_token),this.webSocketService.connectionStatus$.pipe(tn(this.destroy$)).subscribe(i=>{this.isConnectedWs=i}))}}_setMaterialOutlinedIconsDefault(){this._iconRegistry.setDefaultFontSetClass("material-icons")}_listenRouterChanges(){this._routerSubscription=this._router.events.subscribe(e=>{e instanceof di&&this._setScrollOnTop()})}_setScrollOnTop(){Mr(this.platformId)&&window.scrollTo({top:0,behavior:"smooth"})}ngOnDestroy(){this._routerSubscription.unsubscribe(),this.destroy$.next(),this.destroy$.complete(),this.webSocketService.disconnect()}static \u0275fac=function(t){return new(t||n)};static \u0275cmp=be({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,i){t&1&&ve(0,"router-outlet")},dependencies:[hi],encapsulation:2})};window.global=window;window.addEventListener("unhandledrejection",n=>{n.reason?.message?.includes("message channel closed")&&(n.preventDefault(),console.warn("Extension error suppressed:",n.reason))});Ko(wr,Dd).catch(n=>console.error(n));
