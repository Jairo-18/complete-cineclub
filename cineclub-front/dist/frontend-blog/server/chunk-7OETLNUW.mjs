import './polyfills.server.mjs';
import{a as N}from"./chunk-VP77Q7YO.mjs";import{b as P}from"./chunk-IZYF7JLB.mjs";import"./chunk-QFWZF5PC.mjs";import{a as Y}from"./chunk-54IAMWMY.mjs";import"./chunk-POLO5U2S.mjs";import{b as U,c as X}from"./chunk-DMVK7NGP.mjs";import"./chunk-XD35RQRI.mjs";import{A as J,D as K,E as Q,e as T,g as f,j as D,k as q,o as R,q as V,r as A,t as O,v as j,w as W,x as z,z as H}from"./chunk-R2LPZPTP.mjs";import{l as M,m as I,n as k,o as G}from"./chunk-37XX4R2Q.mjs";import{b as C,c as L}from"./chunk-QHGSIMU3.mjs";import"./chunk-3YY5WZBW.mjs";import{l as B}from"./chunk-6XZJ4HF4.mjs";import"./chunk-BKMGEJ4V.mjs";import"./chunk-ABBCMJJI.mjs";import{f as y,g as F}from"./chunk-5Y2PL6TA.mjs";import"./chunk-TPI6FTCS.mjs";import{Gb as h,La as a,Wb as o,Xa as S,Xb as w,_ as c,_c as E,mb as x,nb as s,ob as u,tb as v,ub as t,vb as i,wb as d}from"./chunk-I37AKPGM.mjs";import"./chunk-BPPYXBGU.mjs";import{h as b}from"./chunk-S6KH3LOX.mjs";function $(n,r){n&1&&(t(0,"mat-error"),o(1,"Correo electr\xF3nico requerido"),i())}function ee(n,r){n&1&&(t(0,"mat-error"),o(1,"Correo electr\xF3nico inv\xE1lido"),i())}function te(n,r){n&1&&(t(0,"mat-error"),o(1,"Contrase\xF1a es requerida"),i())}function ie(n,r){n&1&&(t(0,"mat-error"),o(1,"La contrase\xF1a debe tener al menos 6 caracteres"),i())}function oe(n,r){n&1&&o(0," Iniciando sesi\xF3n... ")}function ne(n,r){n&1&&o(0," Iniciar sesi\xF3n ")}var Z=class n{form;hidePassword=!0;isLoading=!1;isGoogleLoading=!1;_notificationsService=c(B);_singInService=c(N);_router=c(y);_fb=c(O);constructor(){this.form=this._fb.group({email:["",[f.required,f.email]],password:["",[f.required,f.minLength(6)]]})}login(){return b(this,null,function*(){if(this.form.invalid){this.form.markAllAsTouched();return}this.isLoading=!0;let{email:r,password:m}=this.form.value;try{let e=yield this._singInService.signIn(r,m);this._notificationsService.success("\xA1Bienvenido!"),this._router.navigate(["/home"])}catch(e){this._notificationsService.error(e instanceof Error?e.message:"Ocurri\xF3 un error inesperado.")}finally{this.isLoading=!1}})}togglePasswordVisibility(){this.hidePassword=!this.hidePassword}loginWithGoogle(){return b(this,null,function*(){try{this.isGoogleLoading=!0,yield this._singInService.signInWithGoogle()}catch(r){console.error("Error en login con Google:",r),this._notificationsService.error("Error al iniciar sesi\xF3n con Google")}finally{this.isGoogleLoading=!1}})}static \u0275fac=function(m){return new(m||n)};static \u0275cmp=S({type:n,selectors:[["app-login"]],decls:42,vars:11,consts:[["title","Bienvenido de vuelta","subtitle","Descubre nuevas pel\xEDculas y libros recomendados por nuestra comunidad"],[1,"mt-4","w-full",3,"formGroup"],["appearance","outline",1,"w-full"],["matInput","","formControlName","email","type","email","autocomplete","email"],["matPrefix",""],["matInput","","formControlName","password","autocomplete","current-password",3,"type"],["mat-icon-button","","matSuffix","","type","button",1,"mr-2",3,"click"],["mat-fab","","extended","",1,"!w-full",3,"click","disabled"],[1,"flex","items-center","mt-2"],[1,"flex-1","border-t","border-gray-600"],[1,"mx-4","text-black","text-sm"],[1,"flex","justify-center","mt-2","w-full"],["mat-stroked-button","",1,"w-full","flex","items-center","justify-between","px-4","py-3",3,"click"],[1,"flex","items-center","gap-2","mx-auto"],["src","assets/images/googleIcon.png","alt","Google",1,"w-6","h-6"],["routerLink","/auth/recover-password",1,"mt-3","md:mt-5","lg:mt-5","2xl:mt-5","3xl:mt-5","font-medium","text-sm","text-[#9811FB]"],[1,"flex-row"],[1,"font-medium","text-sm"],["routerLink","/auth/register",1,"font-medium","text-sm","text-[#9811FB]"]],template:function(m,e){if(m&1&&(t(0,"app-auth-card",0)(1,"form",1)(2,"mat-form-field",2)(3,"mat-label"),o(4,"Correo electr\xF3nico"),i(),d(5,"input",3),t(6,"mat-icon",4),o(7,"email"),i(),s(8,$,2,0,"mat-error"),s(9,ee,2,0,"mat-error"),i(),t(10,"mat-form-field",2)(11,"mat-label"),o(12,"Contrase\xF1a"),i(),d(13,"input",5),t(14,"mat-icon",4),o(15,"lock"),i(),t(16,"button",6),h("click",function(){return e.togglePasswordVisibility()}),t(17,"mat-icon"),o(18),i()(),s(19,te,2,0,"mat-error"),s(20,ie,2,0,"mat-error"),i(),t(21,"button",7),h("click",function(){return e.login()}),s(22,oe,1,0)(23,ne,1,0),i()(),t(24,"div",8),d(25,"div",9),t(26,"span",10),o(27,"O"),i(),d(28,"div",9),i(),t(29,"div",11)(30,"button",12),h("click",function(){return e.loginWithGoogle()}),t(31,"div",13),d(32,"img",14),t(33,"span"),o(34,"Iniciar sesi\xF3n con Google"),i()()()(),t(35,"a",15),o(36," \xBFOlvidaste tu contrase\xF1a? "),i(),t(37,"div",16)(38,"span",17),o(39,"\xBFNo tienes una cuenta?"),i(),t(40,"a",18),o(41," Reg\xEDstrate aqu\xED"),i()()()),m&2){let l,p,g,_;a(),v("formGroup",e.form),a(7),u((l=e.form.get("email"))!=null&&l.hasError("required")&&((l=e.form.get("email"))!=null&&l.touched)?8:-1),a(),u((p=e.form.get("email"))!=null&&p.hasError("email")&&((p=e.form.get("email"))!=null&&p.touched)?9:-1),a(4),v("type",e.hidePassword?"password":"text"),a(3),x("aria-label","Ocultar contrase\xF1a")("aria-pressed",!e.hidePassword),a(2),w(e.hidePassword?"visibility_off":"visibility"),a(),u((g=e.form.get("password"))!=null&&g.hasError("required")&&((g=e.form.get("password"))!=null&&g.touched)?19:-1),a(),u((_=e.form.get("password"))!=null&&_.hasError("minlength")&&((_=e.form.get("password"))!=null&&_.touched)?20:-1),a(),v("disabled",e.isLoading||e.form.invalid),a(),u(e.isLoading?22:23)}},dependencies:[E,F,G,I,M,k,Q,K,W,z,H,J,L,C,j,R,T,D,q,V,A,X,U,P,Y],encapsulation:2})};export{Z as Login};
