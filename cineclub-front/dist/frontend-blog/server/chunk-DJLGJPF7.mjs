import './polyfills.server.mjs';
import{a as L}from"./chunk-VRKUPS3B.mjs";import{d as G}from"./chunk-CPUCP4NP.mjs";import"./chunk-HOIKXKDC.mjs";import"./chunk-C7WF65TO.mjs";import{a as B}from"./chunk-KXZRHGC3.mjs";import{b as P}from"./chunk-IZYF7JLB.mjs";import{o as k}from"./chunk-37XX4R2Q.mjs";import{b as j,c as N}from"./chunk-QHGSIMU3.mjs";import"./chunk-3YY5WZBW.mjs";import"./chunk-BKMGEJ4V.mjs";import{Db as b,Gb as M,Ha as E,Ib as s,La as a,Wb as r,Xa as T,Xb as D,Yb as d,Zc as $,_ as y,_c as V,da as f,ea as g,ic as F,kc as O,na as p,nb as c,ob as x,qb as h,rb as u,sb as _,tb as S,ub as o,vb as n,wb as I}from"./chunk-I37AKPGM.mjs";import{a as C,b as w}from"./chunk-S6KH3LOX.mjs";var z=(i,t)=>t.id;function A(i,t){i&1&&(o(0,"div",4)(1,"div",7),I(2,"app-loader"),n()())}function U(i,t){if(i&1&&(o(0,"span",27),r(1),n()),i&2){let e=t.$implicit;a(),d(" ",e," ")}}function H(i,t){if(i&1&&(o(0,"div",16),u(1,U,2,1,"span",27,h),n()),i&2){let e=s().$implicit,l=s(2);a(),_(l.parseGenres(e.genres))}}function J(i,t){if(i&1){let e=b();o(0,"button",28),M("click",function(){f(e);let m=s().$implicit,v=s(2);return g(v.toggleOverview(m.id))}),r(1),n()}if(i&2){let e=s().$implicit,l=s(2);a(),d(" ",l.isOverviewExpanded(e.id)?"Ver menos":"Ver m\xE1s"," ")}}function q(i,t){if(i&1&&(o(0,"p",20)(1,"span",15),r(2,"Estreno:"),n(),r(3),F(4,"date"),n()),i&2){let e=s().$implicit;a(3),d(" ",O(4,1,e.releaseDate,"dd/MM/yyyy")," ")}}function K(i,t){if(i&1&&(o(0,"p",20)(1,"span",15),r(2,"Duraci\xF3n:"),n(),r(3),n()),i&2){let e=s().$implicit,l=s(2);a(3),d(" ",l.formatRuntime(e.runtime)," ")}}function Q(i,t){if(i&1){let e=b();o(0,"div",8)(1,"div",9),r(2),n(),o(3,"div",10)(4,"img",11),M("error",function(m){f(e);let v=s(2);return g(v.onImageError(m))}),n()(),o(5,"div",12)(6,"h3",13),r(7),n(),o(8,"p",14)(9,"span",15),r(10,"Director:"),n(),r(11),n(),c(12,H,3,0,"div",16),o(13,"p",17),r(14),c(15,J,2,1,"button",18),n(),o(16,"div",19),c(17,q,5,4,"p",20),c(18,K,4,1,"p",20),o(19,"div",21)(20,"mat-icon",22),r(21,"star"),n(),o(22,"span",23),r(23),n(),o(24,"span",24),r(25),o(26,"mat-icon",25),r(27,"thumb_up"),n(),r(28),o(29,"mat-icon",26),r(30,"thumb_down"),n(),r(31,") "),n()()()()()}if(i&2){let e=t.$implicit,l=t.$index,m=s(2);a(2),d(" ",l+1," "),a(2),S("src",m.getMoviePoster(e.posterPath),E)("alt",e.title),a(3),D(e.title),a(4),d(" ",e.director," "),a(),x(e.genres?12:-1),a(2),d(" ",m.getDisplayedOverview(e)||"Sin descripci\xF3n disponible."," "),a(),x(((e.overview==null?null:e.overview.length)||0)>150?15:-1),a(2),x(e.releaseDate?17:-1),a(),x(e.runtime?18:-1),a(5),d(" ",e.score||0," Puntos "),a(2),d(" (",e.upVotes||0," "),a(3),d(" / ",e.downVotes||0," ")}}function W(i,t){if(i&1&&(o(0,"div",5),u(1,Q,32,13,"div",8,z),n()),i&2){let e=s();a(),_(e.movies())}}function X(i,t){i&1&&(o(0,"p",6),r(1," No hay pel\xEDculas disponibles en el top por el momento. "),n())}var R=class i{_moviesService=y(L);movies=p([]);loading=p(!0);ngOnInit(){this.loadTopMovies()}loadTopMovies(){this.loading.set(!0),this._moviesService.getTopMovies(10).subscribe({next:t=>{this.movies.set(t.data),this.loading.set(!1)},error:t=>{console.error("Error loading top movies:",t),this.loading.set(!1)}})}getMoviePoster(t){let e="assets/images/default-movie.png",l="https://image.tmdb.org/t/p/w500";return!t||t.trim()===""||t==="null"||t==="undefined"?e:`${l}${t}`}onImageError(t){let e=t.target;e.src="assets/images/default-movie.png"}expandedOverviews=p({});parseGenres(t){if(!t)return[];try{if(Array.isArray(t))return t.map(e=>e.name);if(typeof t=="string"){let e=t.replace(/'/g,'"');return JSON.parse(e).map(m=>m.name)}return[]}catch(e){return console.error("Error parsing genres:",e),[]}}toggleOverview(t){this.expandedOverviews.update(e=>w(C({},e),{[t]:!e[t]}))}isOverviewExpanded(t){return this.expandedOverviews()[t]||!1}getDisplayedOverview(t){let e=t.overview||"";return e.length<=150||this.isOverviewExpanded(t.id)?e:e.slice(0,150)+"..."}formatRuntime(t){let e=Math.floor(t/60),l=t%60;return`${e}h ${l}m`}static \u0275fac=function(e){return new(e||i)};static \u0275cmp=T({type:i,selectors:[["app-top-movies"]],decls:9,vars:1,consts:[[1,"w-full","text-black","flex","flex-col","items-center","justify-center","p-3","md:px-6","py-6","md:py-12"],[1,"flex","flex-col","justify-start","w-full","mb-8"],[1,"text-lg","md:text-3xl","lg:text-4xl","2xl:text-5xl","3xl:text-6xl","font-extrabold","text-[#9811fb]","drop-shadow-md"],[1,"text-sm","md:text-base","lg:text-lg","2xl:text-lg","3xl:text-lg","font-semibold","mb-4","text-[#757575]"],[1,"flex","flex-col","items-center","justify-center","gap-2","text-gray-600"],[1,"grid","grid-cols-1","sm:grid-cols-2","lg:grid-cols-3","xl:grid-cols-4","gap-6","w-full"],[1,"text-gray-600","mt-8","text-lg","text-center"],[1,"flex","justify-center","items-center"],[1,"flex","flex-col","bg-[#F0F4F9]","rounded-lg","p-4","shadow-lg","border-[0.5px]","border-[#757575]","relative","transform","hover:scale-[1.02]","transition-transform","duration-300"],[1,"absolute","-top-3","-left-3","w-10","h-10","bg-[#9811fb]","text-white","rounded-full","flex","items-center","justify-center","font-bold","text-xl","shadow-lg","z-10","border-2","border-white"],[1,"relative","w-full","aspect-[2/3]","mb-4"],[1,"w-full","h-full","object-cover","rounded-lg","shadow-xl","border-[0.5px]","border-[#757575]",3,"error","src","alt"],[1,"flex","flex-col","flex-1","text-left"],[1,"text-lg","font-bold","text-gray-900","mb-2","line-clamp-2"],[1,"text-gray-600","text-sm","mb-2"],[1,"font-semibold"],[1,"flex","flex-wrap","gap-1.5","mb-3"],[1,"text-gray-700","text-sm","leading-relaxed","mb-3","line-clamp-none","flex-1"],[1,"text-[#9811fb]","text-xs","font-semibold","hover:underline","ml-1"],[1,"flex","flex-col","gap-1","text-gray-600","text-xs","mt-auto"],[1,"text-gray-600","text-sm"],[1,"flex","items-center","gap-2","mt-2","pt-2","border-t","border-gray-300"],[1,"text-yellow-500"],[1,"font-bold","text-base","text-gray-800"],[1,"text-xs","text-gray-500"],[1,"text-xs","align-middle","text-green-600"],[1,"text-xs","align-middle","text-red-600"],[1,"px-2","py-0.5","text-xs","bg-[#9811fb]","border","border-gray-300","rounded-full","text-white"],[1,"text-[#9811fb]","text-xs","font-semibold","hover:underline","ml-1",3,"click"]],template:function(e,l){e&1&&(o(0,"article",0)(1,"div",1)(2,"span",2),r(3," Top 10 Pel\xEDculas "),n(),o(4,"span",3),r(5," Las pel\xEDculas mejor valoradas por la comunidad "),n()(),c(6,A,3,0,"div",4)(7,W,3,0,"div",5)(8,X,2,0,"p",6),n()),e&2&&(a(6),x(l.loading()?6:l.movies().length>0?7:8))},dependencies:[V,P,N,j,k,G,B,$],encapsulation:2})};export{R as TopMovies};
